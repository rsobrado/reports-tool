window.Modernizr=function(e,b,l){var L="2.6.2",c={},u=true,h=b.documentElement,g="modernizr",F=b.createElement(g),j=F.style,f=b.createElement("input"),y=":)",E={}.toString,q=" -webkit- -moz- -o- -ms- ".split(" "),C="Webkit Moz O ms",A=C.split(" "),B=C.toLowerCase().split(" "),s={svg:"http://www.w3.org/2000/svg"},a={},G={},r={},v=[],x=v.slice,o,k=function(l,n,d,j){var k,m,f,i,c=b.createElement("div"),e=b.body,a=e||b.createElement("body");if(parseInt(d,10))while(d--){f=b.createElement("div");f.id=j?j[d]:g+(d+1);c.appendChild(f)}k=["&#173;",'<style id="s',g,'">',l,"</style>"].join("");c.id=g;(e?c:a).innerHTML+=k;a.appendChild(c);if(!e){a.style.background="";a.style.overflow="hidden";i=h.style.overflow;h.style.overflow="hidden";h.appendChild(a)}m=n(c,l);if(!e){a.parentNode.removeChild(a);h.style.overflow=i}else c.parentNode.removeChild(c);return !!m},H=function(c){var a=e.matchMedia||e.msMatchMedia;if(a)return a(c).matches;var b;k("@media "+c+" { #"+g+" { position: absolute; } }",function(a){b=(e.getComputedStyle?getComputedStyle(a,null):a.currentStyle)["position"]=="absolute"});return b},z=function(){var c={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function a(d,a){a=a||b.createElement(c[d]||"div");d="on"+d;var e=d in a;if(!e){if(!a.setAttribute)a=b.createElement("div");if(a.setAttribute&&a.removeAttribute){a.setAttribute(d,"");e=i(a[d],"function");if(!i(a[d],"undefined"))a[d]=l;a.removeAttribute(d)}}a=null;return e}return a}(),t={}.hasOwnProperty,p;if(!i(t,"undefined")&&!i(t.call,"undefined"))p=function(b,a){return t.call(b,a)};else p=function(b,a){return a in b&&i(b.constructor.prototype[a],"undefined")};if(!Function.prototype.bind)Function.prototype.bind=function(d){var a=this;if(typeof a!="function")throw new TypeError;var c=x.call(arguments,1),b=function(){if(this instanceof b){var g=function(){};g.prototype=a.prototype;var f=new g,e=a.apply(f,c.concat(x.call(arguments)));if(Object(e)===e)return e;return f}else return a.apply(d,c.concat(x.call(arguments)))};return b};function m(a){j.cssText=a}function J(a,b){return m(q.join(a+";")+(b||""))}function i(b,a){return typeof b===a}function n(b,a){return !!~(""+b).indexOf(a)}function D(b,c){for(var d in b){var a=b[d];if(!n(a,"-")&&j[a]!==l)return c=="pfx"?a:true}return false}function I(b,d,c){for(var e in b){var a=d[b[e]];if(a!==l){if(c===false)return b[e];if(i(a,"function"))return a.bind(c||d);return a}}return false}function d(c,a,e){var b=c.charAt(0).toUpperCase()+c.slice(1),d=(c+" "+A.join(b+" ")+b).split(" ");if(i(a,"string")||i(a,"undefined"))return D(d,a);else{d=(c+" "+B.join(b+" ")+b).split(" ");return I(d,a,e)}}a["flexbox"]=function(){return d("flexWrap")};a["flexboxlegacy"]=function(){return d("boxDirection")};a["canvas"]=function(){var a=b.createElement("canvas");return !!(a.getContext&&a.getContext("2d"))};a["canvastext"]=function(){return !!(c["canvas"]&&i(b.createElement("canvas").getContext("2d").fillText,"function"))};a["webgl"]=function(){return !!e.WebGLRenderingContext};a["touch"]=function(){var a;if("ontouchstart" in e||e.DocumentTouch&&b instanceof DocumentTouch)a=true;else k(["@media (",q.join("touch-enabled),("),g,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(b){a=b.offsetTop===9});return a};a["geolocation"]=function(){return "geolocation" in navigator};a["postmessage"]=function(){return !!e.postMessage};a["websqldatabase"]=function(){return !!e.openDatabase};a["indexedDB"]=function(){return !!d("indexedDB",e)};a["hashchange"]=function(){return z("hashchange",e)&&(b.documentMode===l||b.documentMode>7)};a["history"]=function(){return !!(e.history&&history.pushState)};a["draganddrop"]=function(){var a=b.createElement("div");return "draggable" in a||"ondragstart" in a&&"ondrop" in a};a["websockets"]=function(){return "WebSocket" in e||"MozWebSocket" in e};a["rgba"]=function(){m("background-color:rgba(150,255,150,.5)");return n(j.backgroundColor,"rgba")};a["hsla"]=function(){m("background-color:hsla(120,40%,100%,.5)");return n(j.backgroundColor,"rgba")||n(j.backgroundColor,"hsla")};a["multiplebgs"]=function(){m("background:url(https://),url(https://),red url(https://)");return /(url\s*\(.*?){3}/.test(j.background)};a["backgroundsize"]=function(){return d("backgroundSize")};a["borderimage"]=function(){return d("borderImage")};a["borderradius"]=function(){return d("borderRadius")};a["boxshadow"]=function(){return d("boxShadow")};a["textshadow"]=function(){return b.createElement("div").style.textShadow===""};a["opacity"]=function(){J("opacity:.55");return /^0.55$/.test(j.opacity)};a["cssanimations"]=function(){return d("animationName")};a["csscolumns"]=function(){return d("columnCount")};a["cssgradients"]=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";m((a+"-webkit- ".split(" ").join(b+a)+q.join(c+a)).slice(0,-a.length));return n(j.backgroundImage,"gradient")};a["cssreflections"]=function(){return d("boxReflect")};a["csstransforms"]=function(){return !!d("transform")};a["csstransforms3d"]=function(){var a=!!d("perspective");a&&"webkitPerspective" in h.style&&k("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b){a=b.offsetLeft===9&&b.offsetHeight===3});return a};a["csstransitions"]=function(){return d("transition")};a["fontface"]=function(){var a;k('@font-face {font-family:"font";src:url("https://")}',function(g,f){var e=b.getElementById("smodernizr"),c=e.sheet||e.styleSheet,d=c?c.cssRules&&c.cssRules[0]?c.cssRules[0].cssText:c.cssText||"":"";a=/src/i.test(d)&&d.indexOf(f.split(" ")[0])===0});return a};a["generatedcontent"]=function(){var a;k(["#",g,"{font:0/0 a}#",g,':after{content:"',y,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3});return a};a["video"]=function(){var c=b.createElement("video"),a=false;try{if(a=!!c.canPlayType){a=new Boolean(a);a.ogg=c.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");a.h264=c.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");a.webm=c.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}}catch(d){}return a};a["audio"]=function(){var c=b.createElement("audio"),a=false;try{if(a=!!c.canPlayType){a=new Boolean(a);a.ogg=c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"");a.mp3=c.canPlayType("audio/mpeg;").replace(/^no$/,"");a.wav=c.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"");a.m4a=(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,"")}}catch(d){}return a};a["localstorage"]=function(){try{localStorage.setItem(g,g);localStorage.removeItem(g);return true}catch(a){return false}};a["sessionstorage"]=function(){try{sessionStorage.setItem(g,g);sessionStorage.removeItem(g);return true}catch(a){return false}};a["webworkers"]=function(){return !!e.Worker};a["applicationcache"]=function(){return !!e.applicationCache};a["svg"]=function(){return !!b.createElementNS&&!!b.createElementNS(s.svg,"svg").createSVGRect};a["inlinesvg"]=function(){var a=b.createElement("div");a.innerHTML="<svg/>";return (a.firstChild&&a.firstChild.namespaceURI)==s.svg};a["smil"]=function(){return !!b.createElementNS&&/SVGAnimate/.test(E.call(b.createElementNS(s.svg,"animate")))};a["svgclippaths"]=function(){return !!b.createElementNS&&/SVGClipPath/.test(E.call(b.createElementNS(s.svg,"clipPath")))};function K(){c["input"]=function(c){for(var a=0,d=c.length;a<d;a++)r[c[a]]=!!(c[a] in f);if(r.list)r.list=!!(b.createElement("datalist")&&e.HTMLDataListElement);return r}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));c["inputtypes"]=function(g){for(var d=0,a,c,e,i=g.length;d<i;d++){f.setAttribute("type",c=g[d]);a=f.type!=="text";if(a){f.value=y;f.style.cssText="position:absolute;visibility:hidden;";if(/^range$/.test(c)&&f.style.WebkitAppearance!==l){h.appendChild(f);e=b.defaultView;a=e.getComputedStyle&&e.getComputedStyle(f,null).WebkitAppearance!=="textfield"&&f.offsetHeight!==0;h.removeChild(f)}else if(!/^(search|tel)$/.test(c))if(/^(url|email)$/.test(c))a=f.checkValidity&&f.checkValidity()===false;else a=f.value!=y}G[g[d]]=!!a}return G}("search tel url email datetime date month week time datetime-local number range color".split(" "))}for(var w in a)if(p(a,w)){o=w.toLowerCase();c[o]=a[w]();v.push((c[o]?"":"no-")+o)}c.input||K();c.addTest=function(a,b){if(typeof a=="object")for(var d in a)p(a,d)&&c.addTest(d,a[d]);else{a=a.toLowerCase();if(c[a]!==l)return c;b=typeof b=="function"?b():b;if(typeof u!=="undefined"&&u)h.className+=" "+(b?"":"no-")+a;c[a]=b}return c};m("");F=f=null;(function(m,a){var g=m.html5||{},r=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,q=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,d,l="_html5shiv",f=0,j={},b;(function(){try{var c=a.createElement("a");c.innerHTML="<xyz></xyz>";d="hidden" in c;b=c.childNodes.length==1||function(){a.createElement("a");var b=a.createDocumentFragment();return typeof b.cloneNode=="undefined"||typeof b.createDocumentFragment=="undefined"||typeof b.createElement=="undefined"}()}catch(e){d=true;b=true}})();function o(a,d){var c=a.createElement("p"),b=a.getElementsByTagName("head")[0]||a.documentElement;c.innerHTML="x<style>"+d+"</style>";return b.insertBefore(c.lastChild,b.firstChild)}function k(){var a=c.elements;return typeof a=="string"?a.split(" "):a}function e(b){var a=j[b[l]];if(!a){a={};f++;b[l]=f;j[f]=a}return a}function h(c,g,d){if(!g)g=a;if(b)return g.createElement(c);if(!d)d=e(g);var f;if(d.cache[c])f=d.cache[c].cloneNode();else if(q.test(c))f=(d.cache[c]=d.createElem(c)).cloneNode();else f=d.createElem(c);return f.canHaveChildren&&!r.test(c)?d.frag.appendChild(f):f}function n(c,d){if(!c)c=a;if(b)return c.createDocumentFragment();d=d||e(c);for(var g=d.frag.cloneNode(),f=0,h=k(),i=h.length;f<i;f++)g.createElement(h[f]);return g}function p(b,a){if(!a.cache){a.cache={};a.createElem=b.createElement;a.createFrag=b.createDocumentFragment;a.frag=a.createFrag()}b.createElement=function(d){if(!c.shivMethods)return a.createElem(d);return h(d,b,a)};b.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+k().join().replace(/\w+/g,function(b){a.createElem(b);a.frag.createElement(b);return 'c("'+b+'")'})+");return n}")(c,a.frag)}function i(f){if(!f)f=a;var g=e(f);if(c.shivCSS&&!d&&!g.hasCSS)g.hasCSS=!!o(f,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}");!b&&p(f,g);return f}var c={elements:g.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:g.shivCSS!==false,supportsUnknownElements:b,shivMethods:g.shivMethods!==false,type:"default",shivDocument:i,createElement:h,createDocumentFragment:n};m.html5=c;i(a)})(this,b);c._version=L;c._prefixes=q;c._domPrefixes=B;c._cssomPrefixes=A;c.mq=H;c.hasEvent=z;c.testProp=function(a){return D([a])};c.testAllProps=d;c.testStyles=k;c.prefixed=function(a,b,c){if(!b)return d(a,"pfx");else return d(a,b,c)};h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(u?" js "+v.join(" "):"");return c}(this,this.document);(function(a){var r=a.fn.domManip,d="_tmplitem",q=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,p={key:0,data:{}},h=0,c=0,l=[];function g(e,d,g,i){var c={data:i||(d?d.data:{}),_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:u,nest:w,wrap:x,html:v,update:t};e&&a.extend(c,e,{nodes:[],parent:d});if(g){c.tmpl=g;c._ctnt=c._ctnt||c.tmpl(a,c);c.key=++h;(l.length?f:b)[h]=c}return c}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,d){a.fn[f]=function(n){var g=[],i=a(n),k,h,m,l,j=this.length===1&&this[0].parentNode;e=b||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&i.length===1){i[d](this[0]);g=this}else{for(h=0,m=i.length;h<m;h++){c=h;k=(h>0?this.clone(true):this).get();a.fn[d].apply(a(i[h]),k);g=g.concat(k)}c=0;g=this.pushStack(g,f,i.selector)}l=e;e=null;a.tmpl.complete(l);return g}});a.fn.extend({tmpl:function(d,c,b){return a.tmpl(this[0],d,c,b)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(d,l,j){if(d[0]&&d[0].nodeType){var f=a.makeArray(arguments),g=d.length,i=0,h;while(i<g&&!(h=a.data(d[i++],"tmplItem")));if(g>1)f[0]=[a.makeArray(d)];if(h&&c)f[2]=function(b){a.tmpl.afterManip(this,b,j)};r.apply(this,f)}else r.apply(this,arguments);c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(d,h,e,c){var j,k=!c;if(k){c=p;d=a.template[d]||a.template(null,d);f={}}else if(!d){d=c.tmpl;b[c.key]=c;c.nodes=[];c.wrapped&&n(c,c.wrapped);return a(i(c,null,c.tmpl(a,c)))}if(!d)return [];if(typeof h==="function")h=h.call(c||{});e&&e.wrapped&&n(e,e.wrapped);j=a.isArray(h)?a.map(h,function(a,b){if(a)a.$index=b;return a?g(e,c,d,a):null}):[g(e,c,d,h)];return k?a(i(c,null,j)):j},tmplItem:function(b){var c;if(b instanceof a)b=b[0];while(b&&b.nodeType===1&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode));return c||p},template:function(c,b){if(b){if(typeof b==="string")b=o(b);else if(b instanceof a)b=b[0]||{};if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",o(b.innerHTML));return typeof c==="string"?(a.template[c]=b):b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,q.test(c)?c:a(c)):null},encode:function(a){return (""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(f,b,d){var e=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(f,b);m(e);c++}});function i(e,g,f){var b,c=f?a.map(f,function(a){return typeof a==="string"?e.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+e.key+'" $2'):a:i(a,e,a._ctnt)}):e;if(g)return c;c=c.join("");c.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(f,c,e,d){b=a(e).get();m(b);if(c)b=j(c).concat(b);if(d)b=b.concat(j(d))});return b?b:j(c)}function j(c){var b=document.createElement("div");b.innerHTML=c;return a.makeArray(b.childNodes)}function o(b){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(m,l,j,d,b,c,e){var i=a.tmpl.tag[j],h,f,g;if(!i)throw"Template command not found: "+j;h=i._default||[];if(c&&!/\w$/.test(b)){b+=c;c=""}if(b){b=k(b);e=e?","+k(e)+")":c?")":"";f=c?b.indexOf(".")>-1?b+c:"("+b+").call($item"+e:b;g=c?f:"(typeof("+b+")==='function'?("+b+").call($item):("+b+"))"}else g=f=h.$1||"null";d=k(d);return "');"+i[l?"close":"open"].split("$notnull_1").join(b?"typeof("+b+")!=='undefined' && ("+b+")!=null":"true").split("$1a").join(g).split("$1").join(f).split("$2").join(d?d.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(d,c,b,a){a=a?","+a+")":b?")":"";return a?"("+c+").call($item"+a:d}):h.$2||"")+"_.push('"})+"');}return _;")}function n(c,b){c._wrap=i(c,true,a.isArray(b)?b:[q.test(b)?b:a(b).html()]).join("")}function k(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}function m(o){var n="_"+c,k,j,l={},e,p,i;for(e=0,p=o.length;e<p;e++){if((k=o[e]).nodeType!==1)continue;j=k.getElementsByTagName("*");for(i=j.length-1;i>=0;i--)m(j[i]);m(k)}function m(j){var p,i=j,k,e,m;if(m=j.getAttribute(d)){while(i.parentNode&&(i=i.parentNode).nodeType===1&&!(p=i.getAttribute(d)));if(p!==m){i=i.parentNode?i.nodeType===11?0:i.getAttribute(d)||0:0;if(!(e=b[m])){e=f[m];e=g(e,b[i]||f[i],null,true);e.key=++h;b[h]=e}c&&o(m)}j.removeAttribute(d)}else if(c&&(e=a.data(j,"tmplItem"))){o(e.key);b[e.key]=e;i=a.data(j.parentNode,"tmplItem");i=i?i.key:0}if(e){k=e;while(k&&k.key!=i){k.nodes.push(j);k=k.parent}delete e._ctnt;delete e._wrap;a.data(j,"tmplItem",e)}function o(a){a=a+n;e=l[a]=l[a]||g(e,b[e.parent.key+n]||e.parent,null,true)}}}function u(a,d,c,b){if(!a)return l.pop();l.push({_:a,tmpl:d,item:this,data:c,options:b})}function w(d,c,b){return a.tmpl(a.template(d),c,b,this)}function x(b,d){var c=b.options||{};c.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,c,b.item)}function v(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||s(a)})}function t(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}})(jQuery);var okToRunScript=false,campaignMarketTimer=null,campaignCountTimer=null;$.extend({googlepush:function(c,b,d,a,e){if(_gaq)if(typeof a!=="undefined"||typeof e!=="undefined")if(typeof e=="undefined")_gaq.push(["_trackEvent",c,b,d,a]);else _gaq.push(["_trackEvent",c,b,d,a,e]);else{if(!a)a=1;_gaq.push(["_trackEvent",c,b,d,a])}},googlepushList:function(f,a,c,b,d,e){f.selectedIndex>=a&&this.googlepush(c,b,d,e)},googlepushCheckBox:function(e,b,a,c,d){e.checked&&this.googlepush(b,a,c,d)},googlepushCustomVar:function(b,a,d,c){_gaq&&_gaq.push(["_setCustomVar",b,a,d,c])},googlepushTrackPageview:function(a){_gaq&&_gaq.push(["_trackPageview",a])},GATrafficCategorization:function(b){try{var d="",f="",c="/GoogleAnalytics/GetReferWithHashTag";if(location.href.indexOf("gclid")==-1&&location.href.indexOf("utm_")==-1){if(window.location.hash){var g=window.location.hash.substring(1),a=[];a=g.split("=");if(a.length>0&&a[0]=="refer")d=a[1]}else{var e=this.getQueryString("refer");if(typeof e!="undefined"&&e!="")d=e}if(typeof document.referrer!="undefined"&&document.referrer!="")f=document.referrer;if(typeof b!="undefined"&&b!="")c="/"+b+c;jQuery.ajax({type:"GET",url:c,data:{refVal:d,refUrl:f},success:function(a){if(a!=""&&typeof a==="string")eval(a);okToRunScript=true},error:function(){okToRunScript=true}})}else okToRunScript=true}catch(h){}},SetDataLayerPair:function(c,a){try{var b="/GoogleAnalytics/SetDataLayerPair";if(typeof a=="undefined")a=0;jQuery.ajax({type:"GET",url:b,data:{key:c,optValue:a},success:function(a){if(a!=""&&typeof a==="string")if(typeof dataLayer=="undefined"){var c=a,b=c.replace("dataLayer","window.parent.dataLayer");eval(b)}else eval(a)},error:function(){}})}catch(d){}},getQueryString:function(b){function a(){var b={},a,d=/\+/g,f=/([^&=]+)=?([^&]*)/g,c=function(a){return decodeURIComponent(a.replace(d," "))},e=window.location.search.substring(1);while(a=f.exec(e))b[c(a[1])]=c(a[2]);return b}if(!this.queryStringParams)this.queryStringParams=a();return this.queryStringParams[b]}});function setMarketTrackEventAfterCampaignParams(a,b,c,d){if(okToRunScript){clearTimeout(campaignMarketTimer);_gaq.push(["_setCustomVar",1,"Market",a+", "+b+":"+c,3]);_gaq.push(["_trackEvent","Market",a+", "+b,c,0,true])}else campaignMarketTimer=setTimeout(function(){setMarketTrackEventAfterCampaignParams(a,b,c,d)},d)}function setTimerToTrackCommunityCount(b,a,c){if(okToRunScript){clearTimeout(campaignCountTimer);_gaq.push(["_trackEvent","CommunityResultsCount",b,a,0,true])}else campaignCountTimer=setTimeout(function(){setTimerToTrackCommunityCount(b,a,c)},c)};NHS={};NHS.Scripts={};NHS.Scripts.Helper={};NHS.Scripts.Helper.JSON={};NHS.Scripts.Globals={};NHS.Scripts.CommunityResults={};NHS.Scripts.CommunityDetail={};NHS.Scripts.HomeDetail={};NHS.Scripts.PropertyMap={};NHS.Scripts.MediaPlayer={};NHS.Scripts.SearchAlert={};var tempNum,fromP,createeBook=true,$jq=jQuery.noConflict();$jq(document).ready(function(){HighlightNav();$jq("#lnkSignIn").click(function(){$jq.googlepush("Account Events","Create Account","Open Form - Header Link")});$jq(".GAPush li a").click(function(){var a=$jq(this).parent().parent(),d=a.attr("id"),b=a.find("li"),c=b.index($jq(this).parent())+1;$jq.googlepush("Site Links","SEO Links",d+c)});setTimeout(function(){$jq(".nhs_SpotCommImg a").click(function(){var b=$jq(this),a=b.attr("type");$jq.googlepush("Images","Spotlight - "+a,"Select Images")})},5e3);jQuery("#nhs_Header > nav > ul > li > a").click(function(a){jQuery.NhsCancelEvent(a)});var a=jQuery("#nhs_Header > nav > ul"),b=0;a.find("li").each(function(){jQuery(this).find(">div").hide();if(jQuery(this).find(">div").length>0){jQuery(this).children("li>a").on("touchstart mouseenter mouseup",function(b){if(jQuery(this).hasClass("nhs_Active")){if(b.type=="mouseenter")return false;if(b.type=="touchstart")return true;if(b.type=="mouseup"){jQuery(this).parent().find(">div").stop(true,true).fadeOut(500);jQuery(this).removeClass("nhs_Active")}}else{if(b.type=="touchstart"){a.find("li>a").removeClass("nhs_Active");a.find("li>div").stop(true,true).fadeOut(500)}jQuery(this).parent().find(">div").stop(true,true).fadeIn(300);jQuery(this).addClass("nhs_Active")}if(b.type=="touchstart")return false});jQuery(this).mouseleave(function(){jQuery(this).find(">div").stop(true,true).fadeOut(500);jQuery(this).find("a").removeClass("nhs_Active")})}});ReferModuleHandler.SetRefer()});NHS.Scripts.Helper.logError=function(a,f,e){var c="Browser: "+navigator.appCodeName+" - "+navigator.appName+" Version: "+navigator.appVersion;if(a!==null&&typeof a!=="undefined"){var d={Message:a.hasOwnProperty("message")?a.message:a,Number:a.hasOwnProperty("lineNumber")?a.lineNumber:a,Name:a.hasOwnProperty("message")?a.name:a,Href:f,AddInfo:e,BrowserInfo:c},b=$jq.toJSON(d);$jq.ajax({type:"POST",url:"/Log/LogError",data:{nhsJsError:b},dataType:"json"});return true}};NHS.Scripts.Helper.createDelegate=function(b,a){return function(){a.apply(b,arguments)}};Function.prototype.bind=function(a){var c=this;if(arguments.length<=1)return function(){return c.apply(a,arguments)};else{var b=Array.prototype.slice.call(arguments,1);return function(){return c.apply(a,arguments.length===0?b:b.concat(Array.prototype.slice.call(arguments)))}}};NHS.Scripts.Helper.createCookie=function(e,d,b){if(b){var a=new Date;a.setTime(a.getTime()+b*24*60*60*1e3);var c="; expires="+a.toGMTString()}else var c="";document.cookie=e+"="+d+c+"; path=/"};NHS.Scripts.Helper.readCookie=function(e){for(var c=e+"=",d=document.cookie.split(";"),b=0;b<d.length;b++){var a=d[b];while(a.charAt(0)==" ")a=a.substring(1,a.length);if(a.indexOf(c)==0)return a.substring(c.length,a.length)}return null};NHS.Scripts.Helper.eraseCookie=function(a){NHS.Scripts.Helper.createCookie(a,"",-1)};NHS.Scripts.Helper.JSON.toString=function(b){var c=typeof b;if(c!="object"||b===null)return String(b);else{var e,a,f=[],d=b&&b.constructor==Array;for(e in b){a=b[e];c=typeof a;if(c=="string")a='"'+a+'"';else if(c=="object"&&a!==null)a=JSON.stringify(a);f.push((d?"":'"'+e+'":')+String(a))}return (d?"[":"{")+String(f)+(d?"]":"}")}};NHS.Scripts.Helper.stopBubble=function(a){if(!a)var a=window.event;a.cancelBubble=true;a.stopPropagation&&a.stopPropagation()};window.onerror=function(){};NHS.Scripts.Helper.FieldDefaultValue=function(a,e,d,c,b){if(typeof a=="string")this._field=$jq("#"+a);else this._field=$jq(a);this._defaultValue=e;this._defaultValueClass=d;if(c!=null)this._submitButton=$jq("#"+c);if(b!=null)this._submitButton2=$jq("#"+b)};NHS.Scripts.Helper.FieldDefaultValue.prototype={initialize:function(){if(this._field.val()==""){this._field.addClass(this._defaultValueClass);this._field.val(this._defaultValue)}this._focusHandler=NHS.Scripts.Helper.createDelegate(this,this._onFocus);this._blurHandler=NHS.Scripts.Helper.createDelegate(this,this._onBlur);this._submitHandler=NHS.Scripts.Helper.createDelegate(this,this._onSubmit);this._field.focus(this._focusHandler);this._field.blur(this._blurHandler);this._submitButton!=null&&this._submitButton.click(this._submitHandler);typeof this._submitButton2!="undefined"&&this._submitButton2.click(this._submitHandler)},_onFocus:function(){if(this._field.val()==this._defaultValue){this._field.removeClass(this._defaultValueClass);this._field.val("")}},_onBlur:function(){if(this._field.val()==""){this._field.addClass(this._defaultValueClass);this._field.val(this._defaultValue)}},_onSubmit:function(){this._field!=null&&this._field.val()==this._defaultValue&&this._field.val("")}};$jq.fn.clearSelect=function(){return this.each(function(){if(this.tagName=="SELECT")this.options.length=0})};$jq.fn.fillSelect=function(a){return this.clearSelect().each(function(){if(this.tagName=="SELECT"){var b=this;$jq.each(a,function(d,a){var c=new Option(a.Text,a.Value);if($jq.browser.msie)b.add(c);else b.add(c,null)})}})};Number.prototype.formatCurrency=function(g,a,f,e){var d=this,a=isNaN(a=Math.abs(a))?2:a,f=f==undefined?",":f,e=e==undefined?".":e,h=d<0?"-":"",c=parseInt(d=Math.abs(+d||0).toFixed(a))+"",b=(b=c.length)>3?b%3:0;return g+h+(b?c.substr(0,b)+e:"")+c.substr(b).replace(/(\d{3})(?=\d)/g,"$1"+e)+(a?f+Math.abs(d-c).toFixed(a).slice(2):"")};function UseOnSubmit(){var a=navigator.userAgent.toLowerCase(),b=false;if(a.indexOf("firefox")==-1&&a.indexOf("apple")==-1&&a.indexOf("msie 9.0")==-1&&a.indexOf("chrome")==-1&&a.indexOf("msie 10.0")==-1)b=true;return b}function FillMarkets(){try{var b=$jq("#ddlMarket"),a=$jq("[id*='ddlState'] :selected").text();a!=null&&a!=""&&$jq.ajax({type:"GET",url:"/BoylSearch/GetAreas",dataType:"json",data:{state:a},success:function(a){b.empty();$jq.each(a,function(c,a){b.append($jq("<option></option>").text(a.Text).val(a.Value))})}})}catch(c){}}function getThePath(e,a){for(var d,b=0;b<e.length;b++){var c=e[b].replace("\\","//");a=a.replace("/","\\").toLowerCase();if(c.toLowerCase().indexOf(a)!=-1&&a!=""){d=c;break}}return d}function reload(a){window.location.href=a}function HighlightRegion(e){var b=[];b=e.split(",");for(var d=[],a=1,h,g,c=0;c<b.length;c++){var f=b[c].split(";");d.push(f[1])}$jq("div").each(function(){var a=$jq(this).attr("class");if(a=="nhsStaticContent"){$jq(this).addClass("nhs_Overlay");$jq(this).mouseover(function(){$jq(this).removeClass("nhs_Overlay_Out");$jq(this).addClass("nhs_Overlay_Over");var a=$jq(this).children().children("[class*='stNumber']");tempNum=$jq(a).html();var b=$jq(a).attr("title");$jq(a).html(tempNum+'   <b class="stNumberPath">'+getThePath(d,b)+"</b>")});$jq(this).mouseout(function(){$jq(this).removeClass("nhs_Overlay_Over");$jq(this).addClass("nhs_Overlay_Out");var a=$jq(this).children().children("[class*='stNumber']");$jq(a).html(tempNum)})}});$jq("b").each(function(){var b=$jq(this).attr("class");if(b=="stNumber"){$jq(this).html(a);a>9&&$(this).css("left","8px");a=a+1}})}function closeThisModal(){reloadParent()}function SetTextBoxesDescriptions(){!Modernizr.input.placeholder&&jQuery("[placeholder]").focus(function(){var a=jQuery(this);if(a.val()==a.attr("placeholder")){a.val("");a.removeClass("placeholder")}}).blur(function(){var a=jQuery(this);if(a.val()==""||a.val()==a.attr("placeholder")){a.addClass("placeholder");a.val(a.attr("placeholder"))}}).blur().parents("form").submit(function(){jQuery(this).find("[placeholder]").each(function(){var a=jQuery(this);a.val()==a.attr("placeholder")&&a.val("")})})}function ss(c,b){var a=$jq("#FromPage").val();if(a.indexOf("createalertmodal")!=-1){$jq("#nhs_Login").fadeOut();tb_resizeWindow(c,b)}}function getRecoCheckedBox(a){var d=a.checked,c=a.name.split("_"),b=c[3];if(a.checked)$jq("#CblReqComm_"+b.toString()).val(false);else $jq("#CblReqComm_"+b.toString()).val(true)}function SetPromosToggle(){var a=215,b="...more",c="less";if($jq("#liPromos").hasClass("option2"))a=100;else if($jq("#liPromos").hasClass("option3"))a=55;$jq(".more").each(function(){var c=$jq(this).html();if(c.length>a){var e=c.substr(0,a),f=c.substr(a,c.length-a+1),d=e+'<span class="moreellipses">&nbsp;</span><span class="morecontent"><span>'+f+'</span>&nbsp;&nbsp;<a href="javascript:void(0)" class="morelink">'+b+"</a></span>";$jq(this).html(d)}});$jq(".morelink").click(function(){if($jq(this).hasClass("less")){$jq(this).removeClass("less");$jq(this).html(b)}else{$jq(this).addClass("less");$jq(this).html(c)}$jq(this).parent().prev().toggle();$jq(this).prev().toggle();return false})}function tb_refresParentDetailPage(){refreshparentwindow=true}$jq(document).ready(function(){if(NHS.Scripts.Globals.IsDebug&&$j.browser.mozilla)try{window.loadFirebugConsole()}catch(a){if(typeof console=="undefined")console={log:function(){}}}else if(typeof console=="undefined")console={log:function(){}}});if(!Array.prototype.indexOf)Array.prototype.indexOf=function(c,b){for(var a=b||0,d=this.length;a<d;a++)if(this[a]==c)return a;return -1};function Reload(){window.location.reload()}function ValidFullName(b){var a=new RegExp(/^[a-zA-Z]+\s[a-zA-Z]+$/i);return a.test(b)}function ValidEmail(b){var a=new RegExp(/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/i);return a.test(b)}function ValidFullNameWithNumberLastName(a){var b=new RegExp(/^([A-Za-z]+(-?'?[A-Za-z+'?-?]+)?)(\s([A-Za-z]+(-?'?[A-Za-z+'?-?]+)?))+?$/i);return b.test(a)&&a.split(" ").length>1}function ValidZipcode(b){var a=new RegExp(/^\d{5}(-\d{4})?$/i);return a.test(b)}function HighlightNav(){var a=location.pathname,b=false;if($jq('#mv_SearchNav li a[href="'+a+'"]')!=null){$jq('#mv_SearchNav li a[href="'+a+'"]').parent().addClass("active");b=true}if(a.charAt(a.length-1)=="/"&&!b){$jq('#mv_SearchNav li a[href="'+a.substring(0,a.length-1)+'"]').parent().addClass("active");b=true}var c=a.split("/");c.length>2&&$jq('#mv_SearchNav li a[href="/'+c[1]+'/"]').parent().addClass("active")}function FreeBrochureSubmitGAEvents(){jQuery("#CreateAlert").prop("checked")&&jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Option Checked - Send Me More");jQuery("#Newsletter").prop("checked")&&jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Option Checked - Free Newsletter");jQuery("#Promos").prop("checked")&&jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Option Checked - Special Promotions")}function disableScrollKeys(){jQuery(document).keypress(function(b){var a=b.keyCode;if(a>=37&&a<=40)return false})}function enableScrollKeys(){jQuery(document).unbind("keypress",null)}function SubmitGetBrochures(){var a=jQuery("input[id^='chkReqCommBrochure_']:checked").length+jQuery("input[id^='chkReqHomeBrochure_']:checked").length;jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Submit Form - Get Free Brochures",a);jQuery.SetDataLayerPair("recommendedLead",a)}var VWOCountTimer=null;function VWOReady(a){if(typeof _vwo_code!="undefined")if(_vwo_code.finished()){clearTimeout(VWOCountTimer);jQuery.isFunction(a)&&a.call()}else VWOCountTimer=setTimeout(function(){VWOReady(a)},500);else jQuery.isFunction(a)&&a.call()}var ReferModuleHandler=function(b){"use strict";var a={},e="/common/setrefer";function c(){return b.GetHashTagParameter("refer")}function d(){var a=c(),d="";if(a!=null&&a!=""){if(typeof document.referrer!="undefined"&&document.referrer!="")d=document.referrer;b.ajax({type:"GET",url:e,data:{refVal:a,refUrl:d}}).done(function(){})}}a.SetRefer=function(){d()};return a}(jQuery);var _callAddThis=true,_commIdHD=0,_builderIdHD=0,_marketIdCR=0;NHS.Scripts.Globals.EventLogger=function(a){this._siteRoot=a.siteRoot;this._partnerId=a.partnerID;this._marketId=a.marketId;this._fromPage=a.fromPage;this._communityId=a.communityId;this._builderId=a.builderId;this._planId=a.planId;this._specId=a.specId;this._homeSearchViewMetricDisplayed=a.homeSearchViewMetricDisplayed;this._homeSearchViewMetricHidden=a.homeSearchViewMetricHidden};NHS.Scripts.Globals.EventLogger.prototype={logListHubEvent:function(a,d,c,b){try{var f=new ListHubTracker({provider:a,test:d});f.submit(c,b)}catch(e){}},logAndRedirect:function(i,h,a,d,c,f,g,e,b){this._marketId=e;this.logEvent(a,d,c,f,g);this._redirect(i,h,b);return false},logFeaturedListingAndRedirect:function(i,h,b,e,g,f,a,c){this._marketId=a;var d={featuredlistingId:e,communityId:g,builderId:f,marketId:a};this.logEventWithParameters(b,d);this._redirect(i,h,c);return false},logBasicListingAndRedirect:function(d,c,a,b){this.logBasicListingEvent(a,b);this._redirect(d,c);return false},logEventWithParameters:function(a,c){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logViewWithParameters(b,a,c)}},logEvent:function(a,d,c){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,d,c,0,0,0)}},logBasicListingEvent:function(a,c){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,0,0,0,0,c)}},logEvent:function(a,d,c,e,f){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,d,c,e,f,0)}},setAllowAddThis:function(){_callAddThis=false;setTimeout(function(){_callAddThis=true},2e3)},logMultiEvent:function(a,c,d,e,f){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,c,d,e,f,0)}},logHomeResultsMetrics:function(c,d){if(c){var a;if(d==1)a=this._homeSearchViewMetricDisplayed;else a=this._homeSearchViewMetricHidden;var b=this._siteRoot+"eventlogger/logevent-"+c;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logMetrics(b,a)}},attachEventsToAddThis:function(){var a=this;typeof addthis!="undefined"&&addthis.addEventListener("addthis.menu.share",function(e){if(_callAddThis){var d=e.data.service.toString().toLowerCase(),b="MHSMS",c=a._planId>0||a._specId>0;if(d.indexOf("favorites")==-1&&d.indexOf("print")==-1&&d.indexOf("email")==-1){if(a._planId==0&&a._specId==0&&a._communityId==0)b="MHSMS";else{c=a._planId>0||a._specId>0;b=c?"HDSMS":"CDSMS"}a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId)}else if(d.indexOf("email")>-1){c=a._planId>0||a._specId>0;b=c?"HOMSTF":"COMSTF";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()}else if(d.indexOf("print")>-1){c=a._planId>0||a._specId>0;b=c?"HOMPR":"COMPR";if($jq(this).hasClass("nextStepsPrint"))b=c?"HDNSPRN":"CDNSPRN";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()}}});$jq(".addthis_button_email").click(function(){var c=a._planId>0||a._specId>0,b=c?"HOMSTF":"COMSTF";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()});$jq(".addthis_button_print").click(function(){var c=a._planId>0||a._specId>0,b=c?"HOMPR":"COMPR";if($jq(this).hasClass("nextStepsPrint"))b=c?"HDNSPRN":"CDNSPRN";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()});$jq("#btn_fb_mh").click(function(){var b="MHSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()});$jq("#btn_tw_mh").click(function(){var b="MHSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()})},attachEventsToDetails:function(){var a=this;try{FB.Event.subscribe("edge.create",function(){var c=a._planId>0||a._specId>0,b=c?"HDSMS":"CDSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()})}catch(b){}$jq("#btn_fb_bottom").click(function(){var c=a._planId>0||a._specId>0,b=c?"HDSMS":"CDSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis();jQuery.SetDataLayerPair("siteSocialMediaS")});$jq("#btn_tw_bottom").click(function(){var c=a._planId>0||a._specId>0,b=c?"HDSMS":"CDSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis();jQuery.SetDataLayerPair("siteSocialMediaS")})},_redirect:function(a,b,c){if(!a)var a=window.event;try{a.cancelBubble=true}catch(d){}a.stopPropagation&&a.stopPropagation();if(b)if(c)window.open(b);else setTimeout(function(){window.location.href=b},500)},_logViewWithParameters:function(a,e,b){var d=a;if(this._fromPage=="communityresults"){d=a;if(this._siteRoot=="/")d="/NewHomeSource"+a}if(b.builderId)a=a+"/builder-"+b.builderId;if(b.communityId)a=a+"/community-"+b.communityId;if(b.communityList)a=a+"/communitylist-"+b.communityList;if(b.marketId)a=a+"/market-"+b.marketId;if(b.planId)a=a+"/planid-"+b.planId;if(b.specId)a=a+"/specid-"+b.specId;if(b.basiclistingId)a=a+"/basiclistingid-"+b.basiclistingId;if(b.featuredlistingId)a=a+"/featuredlistingid-"+b.featuredlistingId;if(b.refer)a=a+"/refer-"+b.refer;if(b.totalHomes)a=a+"/totalhomes-"+b.totalHomes;if(b.builderCommunityList)a=a+"?buildercommunitylist="+b.builderCommunityList;if(b.basicListingList)a=a+"?basiclistinglist="+b.basicListingList;if(b.homeList)a=a+"?homeList="+b.homeList;if(b.featuredListingList)a=a+"?featuredlistinglist="+b.featuredListingList;var c=true;if(typeof b.async!="undefined")c=b.async;$jq.ajax({type:"Post",url:a,async:c})},_logView:function(a,j,c,b,f,g,i){if(a.indexOf("http://")<0)a=a.replace(" ","").replace("//","/");var d=this._fromPage,h=a,e=f>0||g>0;if(c==0&&e)c=_commIdHD;if(b==0&&e)b=_builderIdHD;if(this._fromPage=="communityresults"){h=a;d=this._siteRoot+"communityresults";if(this._siteRoot=="/"){h="/NewHomeSource"+a;d="/NewHomeSource/communityresults"}}if(i==0)a=a+"/builder-"+b+"/community-"+c+"/planid-"+f+"/specid-"+g+"/market-"+this._marketId;else a=a+"/basiclisting-"+i+"/market-"+this._marketId;$jq.ajax({type:"Post",url:a,async:true})},_logMetrics:function(c,a){var b={logsInChains:a};$jq.ajax({type:"POST",url:"http://"+location.host+"/metricseventlogger/",data:b,dataType:"json"})}};if(typeof NHS=="undefined"){NHS={};NHS.Scripts={}}NHS.Scripts.Facebook=function(a){this._parameters=a};var redirect=null;NHS.Scripts.Facebook.prototype={initialize:function(){var a=this;jQuery.getScript("//connect.facebook.net/en_US/all.js",function(){jQuery("#fbLoginButton").click(function(){jQuery.googlepush("Account Events","Access Account","Sign In - Create Account - Facebook")});redirect=jQuery("#FromPage").val();if(a._parameters.redirect)redirect=a._parameters.redirect;jQuery.InitFacebookControls(a._parameters.appId);jQuery("#fbLoginButton").click(function(b){jQuery.NhsCancelEventAndStopPropagation(b);FB.login(a.statusChange,{scope:"email"});return false});jQuery("#lnkSignOff,.lnkSignOff").click(function(){FB.logout()})})},statusChange:function(a){a.status==="connected"&&FB.api("/me",function(a){var b={Email:a.email,Id:a.id,FirstName:a.first_name,LastName:a.last_name,MiddleName:a.middle_name,Name:a.name};jQuery.ajax({type:"POST",url:"/Facebook/FacebookLogin",data:b,success:function(b){if(b){typeof _gaq!="undefined"&&_gaq.push(["_setCustomVar",1,"User","{facebook:"+a.id+"}",2]);setTimeout(function(){if(redirect)location.href=redirect;else location.reload()},100)}}})})}};jQuery.extend({CheckLoginState:function(){FB.getLoginStatus(function(b){var a=new NHS.Scripts.Facebook;a.statusChange(b)})},InitFacebookControls:function(a){FB.init({appId:a,status:true,cookie:true,xfbml:true,oauth:true,version:"v2.0"})}});NHS.Scripts.Search=function(b,a){this._typeAheadUrl=b;this.alreadyiInitialize=false;a=typeof a==="undefined"?true:a;a&&this.initialize()};NHS.Scripts.Search.prototype={initialize:function(){var a=this;if(a.alreadyiInitialize==false){jQuery("#nhs_GlobalSearchNavSubmit").click(function(){var c=a.showErrorSearchTextMessage,b=jQuery("#nhs_GlobalSearchNavLocation").val();if(!c(b)){b=jQuery.trim(b);if(b.length>0&&b!="Enter Location or Community Name"){jQuery.googlepush("Search Events","Search Action","Search - NavigationNew");return true}}jQuery("#nhs_field_validation_error").show();jQuery("#nhs_GlobalSearchNavSubmit").removeAttr("disabled");return false});var b=jQuery("#nhs_GlobalSearchNavLocation");a.validateSearchBox(b.closest("form"),jQuery("span.field-validation-error"),b,false);this.setupSearchBox("nhs_GlobalSearchNavLocation","SearchType",false);SetTextBoxesDescriptions();a.alreadyiInitialize=true}},testValidation:function(d){var g=this,b=[["",true,"NOK"],[" ",true,"NOK"],[" , ",true,"NOK"],["123",true,"NOK"],["12345",false,"NOK"],["123456",true,"NOK"],["123,",true,"NOK"],["12345,",true,"NOK"],["123456,",true,"NOK"],["test",false,"NOK"],["test test",false,"NOK"],["test,",true,"NOK"],["test test,",true,"NOK"],["test 23",false,"NOK"],["test 123",false,"NOK"],["test 1234",false,"NOK"],["test 23,",true,"NOK"],["test 123,",true,"NOK"],["test 1234,",true,"NOK"],["g 5 q a,r",true,"NOK"],["g 5 q a, r",true,"NOK"],["g 5 q a, 1",true,"NOK"],["test 23,tx",false,"NOK"],["test 123,fx",false,"NOK"],["test 1234, zd",false,"NOK"],["test 23,tx Area",false,"NOK"],["test 123,fx Area",false,"NOK"],["test 1234, zd Area",false,"NOK"],[",",true,"NOK"],[",t",true,"NOK"],[",tx",true,"NOK"],[", t",true,"NOK"],[", t x",true,"NOK"],[",  tx",true,"NOK"],["  ,  tx",true,"NOK"],[",tx Area",true,"NOK"],["0,tx Area",false,"NOK"]];console.log(b);if(typeof d!="undefined")for(index in d)b.push(d[index]);for(index in b){var a=String(b[index][0]),f=g.showErrorSearchTextMessage(a)==Boolean(b[index][1]);if(f==false){console.info("\n ============ + ERROR + =================");console.info("ERROR :: "+a+" ["+index+"] :: "+String(g.showErrorSearchTextMessage(a))+" == "+String(b[index][1])+" => "+String(f));if(typeof a=="undefined"||a=="")console.info("num #1 :: "+String(true));else if(a.indexOf(",")==-1&&!isNaN(a)&&(new RegExp(/(?:^|[^\d])(\d{5})(?:$|[^\d])/mg)).test(a)==false)console.info("num #2 :: "+String(true));else if(a.split(",").length>1&&(a.split(",")[0].trim()===""||a.split(",")[1].trim()===""||a.split(",")[1].trim().length<2))console.info("num #3 :: "+String(true));else a.indexOf(",")==-1&&(new RegExp("[a-zA-Z0-9 ]+$")).test(a)==false&&console.info("num #4 :: "+String(true));console.info("=================================== \n")}else b[index][2]="OK"}var c="The test is 100% OK!",e=true;for(index in b)if(b[index][2]=="NOK"){c="TEST FAIL!";e=false;break}console.info("\n ************************");if(e)console.info(c);else console.error(c);console.info("************************ \n")},showErrorSearchTextMessage:function(c){var a=String(c).trim(),b=false;if(typeof a=="undefined"||a=="")b=true;else if(a.indexOf(",")==-1&&!isNaN(a)&&(new RegExp(/(?:^|[^\d])(\d{5})(?:$|[^\d])/mg)).test(a)==false)b=true;else if(a.split(",").length>1&&(a.split(",")[0].trim()===""||a.split(",")[1].trim()===""||a.split(",")[1].trim().length<2))b=true;else if(a.indexOf(",")==-1&&(new RegExp("[a-zA-Z0-9 ]+$")).test(a)==false)b=true;return b},validateSearchFormFromInputText:function(b,a){var c=this;a=typeof a==="undefined"?false:a;c.validateSearchBox(b.closest("form"),b.closest("form").find(".field-validation-error"),b,a)},validateSearchBox:function(a,c,b,d){var e=this;jQuery(a).on("submit",function(g){var f=jQuery(b).val().trim(),a=e;if(a.showErrorSearchTextMessage(f)){jQuery.NhsCancelEvent(g);if(d)alert("Enter a valid text to search");else jQuery(c).show();return false}return true})},setupSearchBox:function(b,e,c){var d=this;c=typeof c==="undefined"?false:c;jQuery("#"+b).keypress(function(){jQuery(".field-validation-error").hide()});var a=jQuery("#"+b);if(a!==null&&a.length>0){d.validateSearchBox(a.closest("form"),a.closest("form").find(".field-validation-error"),a,c);a.autocomplete({source:this._typeAheadUrl,select:function(g,a){g.preventDefault();var c=a.item.value.substring(a.item.value.indexOf("|")+1),f=a.item.value.substring(0,a.item.value.indexOf("|"));jQuery("#"+e).val(c);jQuery("#"+b).val(f);jQuery.isFunction(d.AutoCompleteSelect)&&d.AutoCompleteSelect(c,f)},focus:function(a){a.preventDefault()}}).data("ui-autocomplete")._renderItem=function(b,a){a.label=a.value.substring(0,a.value.indexOf("|"));a.label=a.label.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+$jq.ui.autocomplete.escapeRegex(this.term.trim())+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong id='ui-id'>$1</strong>");if(a.label.indexOf(" in ")!=-1)a.label=a.label.substring(0,a.label.indexOf(" in "))+"<span id='ui-id'> in "+a.label.substring(a.label.indexOf(" in ")+4)+"</span>";return jQuery("<li></li>").data("item.autocomplete",a).append("<a>"+a.label+"</a>").appendTo(b)};a.autocomplete().data("ui-autocomplete").menu.element.detach().appendTo(jQuery("#"+b).parent())}}}