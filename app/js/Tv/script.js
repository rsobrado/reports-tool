NHS={};NHS.Scripts={};NHS.Scripts.Helper={};NHS.Scripts.Helper.JSON={};NHS.Scripts.Globals={};NHS.Scripts.CommunityResults={};NHS.Scripts.CommunityDetail={};NHS.Scripts.HomeDetail={};NHS.Scripts.PropertyMap={};NHS.Scripts.MediaPlayer={};NHS.Scripts.SearchAlert={};var tempNum,fromP,createeBook=true,$jq=jQuery.noConflict();$jq(document).ready(function(){HighlightNav();$jq("#lnkSignIn").click(function(){$jq.googlepush("Account Events","Create Account","Open Form - Header Link")});$jq(".GAPush li a").click(function(){var a=$jq(this).parent().parent(),d=a.attr("id"),b=a.find("li"),c=b.index($jq(this).parent())+1;$jq.googlepush("Site Links","SEO Links",d+c)});setTimeout(function(){$jq(".nhs_SpotCommImg a").click(function(){var b=$jq(this),a=b.attr("type");$jq.googlepush("Images","Spotlight - "+a,"Select Images")})},5e3);jQuery("#nhs_Header > nav > ul > li > a").click(function(a){jQuery.NhsCancelEvent(a)});var a=jQuery("#nhs_Header > nav > ul"),b=0;a.find("li").each(function(){jQuery(this).find(">div").hide();if(jQuery(this).find(">div").length>0){jQuery(this).children("li>a").on("touchstart mouseenter mouseup",function(b){if(jQuery(this).hasClass("nhs_Active")){if(b.type=="mouseenter")return false;if(b.type=="touchstart")return true;if(b.type=="mouseup"){jQuery(this).parent().find(">div").stop(true,true).fadeOut(500);jQuery(this).removeClass("nhs_Active")}}else{if(b.type=="touchstart"){a.find("li>a").removeClass("nhs_Active");a.find("li>div").stop(true,true).fadeOut(500)}jQuery(this).parent().find(">div").stop(true,true).fadeIn(300);jQuery(this).addClass("nhs_Active")}if(b.type=="touchstart")return false});jQuery(this).mouseleave(function(){jQuery(this).find(">div").stop(true,true).fadeOut(500);jQuery(this).find("a").removeClass("nhs_Active")})}});ReferModuleHandler.SetRefer()});NHS.Scripts.Helper.logError=function(a,f,e){var c="Browser: "+navigator.appCodeName+" - "+navigator.appName+" Version: "+navigator.appVersion;if(a!==null&&typeof a!=="undefined"){var d={Message:a.hasOwnProperty("message")?a.message:a,Number:a.hasOwnProperty("lineNumber")?a.lineNumber:a,Name:a.hasOwnProperty("message")?a.name:a,Href:f,AddInfo:e,BrowserInfo:c},b=$jq.toJSON(d);$jq.ajax({type:"POST",url:"/Log/LogError",data:{nhsJsError:b},dataType:"json"});return true}};NHS.Scripts.Helper.createDelegate=function(b,a){return function(){a.apply(b,arguments)}};Function.prototype.bind=function(a){var c=this;if(arguments.length<=1)return function(){return c.apply(a,arguments)};else{var b=Array.prototype.slice.call(arguments,1);return function(){return c.apply(a,arguments.length===0?b:b.concat(Array.prototype.slice.call(arguments)))}}};NHS.Scripts.Helper.createCookie=function(e,d,b){if(b){var a=new Date;a.setTime(a.getTime()+b*24*60*60*1e3);var c="; expires="+a.toGMTString()}else var c="";document.cookie=e+"="+d+c+"; path=/"};NHS.Scripts.Helper.readCookie=function(e){for(var c=e+"=",d=document.cookie.split(";"),b=0;b<d.length;b++){var a=d[b];while(a.charAt(0)==" ")a=a.substring(1,a.length);if(a.indexOf(c)==0)return a.substring(c.length,a.length)}return null};NHS.Scripts.Helper.eraseCookie=function(a){NHS.Scripts.Helper.createCookie(a,"",-1)};NHS.Scripts.Helper.JSON.toString=function(b){var c=typeof b;if(c!="object"||b===null)return String(b);else{var e,a,f=[],d=b&&b.constructor==Array;for(e in b){a=b[e];c=typeof a;if(c=="string")a='"'+a+'"';else if(c=="object"&&a!==null)a=JSON.stringify(a);f.push((d?"":'"'+e+'":')+String(a))}return (d?"[":"{")+String(f)+(d?"]":"}")}};NHS.Scripts.Helper.stopBubble=function(a){if(!a)var a=window.event;a.cancelBubble=true;a.stopPropagation&&a.stopPropagation()};window.onerror=function(){};NHS.Scripts.Helper.FieldDefaultValue=function(a,e,d,c,b){if(typeof a=="string")this._field=$jq("#"+a);else this._field=$jq(a);this._defaultValue=e;this._defaultValueClass=d;if(c!=null)this._submitButton=$jq("#"+c);if(b!=null)this._submitButton2=$jq("#"+b)};NHS.Scripts.Helper.FieldDefaultValue.prototype={initialize:function(){if(this._field.val()==""){this._field.addClass(this._defaultValueClass);this._field.val(this._defaultValue)}this._focusHandler=NHS.Scripts.Helper.createDelegate(this,this._onFocus);this._blurHandler=NHS.Scripts.Helper.createDelegate(this,this._onBlur);this._submitHandler=NHS.Scripts.Helper.createDelegate(this,this._onSubmit);this._field.focus(this._focusHandler);this._field.blur(this._blurHandler);this._submitButton!=null&&this._submitButton.click(this._submitHandler);typeof this._submitButton2!="undefined"&&this._submitButton2.click(this._submitHandler)},_onFocus:function(){if(this._field.val()==this._defaultValue){this._field.removeClass(this._defaultValueClass);this._field.val("")}},_onBlur:function(){if(this._field.val()==""){this._field.addClass(this._defaultValueClass);this._field.val(this._defaultValue)}},_onSubmit:function(){this._field!=null&&this._field.val()==this._defaultValue&&this._field.val("")}};$jq.fn.clearSelect=function(){return this.each(function(){if(this.tagName=="SELECT")this.options.length=0})};$jq.fn.fillSelect=function(a){return this.clearSelect().each(function(){if(this.tagName=="SELECT"){var b=this;$jq.each(a,function(d,a){var c=new Option(a.Text,a.Value);if($jq.browser.msie)b.add(c);else b.add(c,null)})}})};Number.prototype.formatCurrency=function(g,a,f,e){var d=this,a=isNaN(a=Math.abs(a))?2:a,f=f==undefined?",":f,e=e==undefined?".":e,h=d<0?"-":"",c=parseInt(d=Math.abs(+d||0).toFixed(a))+"",b=(b=c.length)>3?b%3:0;return g+h+(b?c.substr(0,b)+e:"")+c.substr(b).replace(/(\d{3})(?=\d)/g,"$1"+e)+(a?f+Math.abs(d-c).toFixed(a).slice(2):"")};function UseOnSubmit(){var a=navigator.userAgent.toLowerCase(),b=false;if(a.indexOf("firefox")==-1&&a.indexOf("apple")==-1&&a.indexOf("msie 9.0")==-1&&a.indexOf("chrome")==-1&&a.indexOf("msie 10.0")==-1)b=true;return b}function FillMarkets(){try{var b=$jq("#ddlMarket"),a=$jq("[id*='ddlState'] :selected").text();a!=null&&a!=""&&$jq.ajax({type:"GET",url:"/BoylSearch/GetAreas",dataType:"json",data:{state:a},success:function(a){b.empty();$jq.each(a,function(c,a){b.append($jq("<option></option>").text(a.Text).val(a.Value))})}})}catch(c){}}function getThePath(e,a){for(var d,b=0;b<e.length;b++){var c=e[b].replace("\\","//");a=a.replace("/","\\").toLowerCase();if(c.toLowerCase().indexOf(a)!=-1&&a!=""){d=c;break}}return d}function reload(a){window.location.href=a}function HighlightRegion(e){var b=[];b=e.split(",");for(var d=[],a=1,h,g,c=0;c<b.length;c++){var f=b[c].split(";");d.push(f[1])}$jq("div").each(function(){var a=$jq(this).attr("class");if(a=="nhsStaticContent"){$jq(this).addClass("nhs_Overlay");$jq(this).mouseover(function(){$jq(this).removeClass("nhs_Overlay_Out");$jq(this).addClass("nhs_Overlay_Over");var a=$jq(this).children().children("[class*='stNumber']");tempNum=$jq(a).html();var b=$jq(a).attr("title");$jq(a).html(tempNum+'   <b class="stNumberPath">'+getThePath(d,b)+"</b>")});$jq(this).mouseout(function(){$jq(this).removeClass("nhs_Overlay_Over");$jq(this).addClass("nhs_Overlay_Out");var a=$jq(this).children().children("[class*='stNumber']");$jq(a).html(tempNum)})}});$jq("b").each(function(){var b=$jq(this).attr("class");if(b=="stNumber"){$jq(this).html(a);a>9&&$(this).css("left","8px");a=a+1}})}function closeThisModal(){reloadParent()}function SetTextBoxesDescriptions(){!Modernizr.input.placeholder&&jQuery("[placeholder]").focus(function(){var a=jQuery(this);if(a.val()==a.attr("placeholder")){a.val("");a.removeClass("placeholder")}}).blur(function(){var a=jQuery(this);if(a.val()==""||a.val()==a.attr("placeholder")){a.addClass("placeholder");a.val(a.attr("placeholder"))}}).blur().parents("form").submit(function(){jQuery(this).find("[placeholder]").each(function(){var a=jQuery(this);a.val()==a.attr("placeholder")&&a.val("")})})}function ss(c,b){var a=$jq("#FromPage").val();if(a.indexOf("createalertmodal")!=-1){$jq("#nhs_Login").fadeOut();tb_resizeWindow(c,b)}}function getRecoCheckedBox(a){var d=a.checked,c=a.name.split("_"),b=c[3];if(a.checked)$jq("#CblReqComm_"+b.toString()).val(false);else $jq("#CblReqComm_"+b.toString()).val(true)}function SetPromosToggle(){var a=215,b="...more",c="less";if($jq("#liPromos").hasClass("option2"))a=100;else if($jq("#liPromos").hasClass("option3"))a=55;$jq(".more").each(function(){var c=$jq(this).html();if(c.length>a){var e=c.substr(0,a),f=c.substr(a,c.length-a+1),d=e+'<span class="moreellipses">&nbsp;</span><span class="morecontent"><span>'+f+'</span>&nbsp;&nbsp;<a href="javascript:void(0)" class="morelink">'+b+"</a></span>";$jq(this).html(d)}});$jq(".morelink").click(function(){if($jq(this).hasClass("less")){$jq(this).removeClass("less");$jq(this).html(b)}else{$jq(this).addClass("less");$jq(this).html(c)}$jq(this).parent().prev().toggle();$jq(this).prev().toggle();return false})}function tb_refresParentDetailPage(){refreshparentwindow=true}$jq(document).ready(function(){if(NHS.Scripts.Globals.IsDebug&&$j.browser.mozilla)try{window.loadFirebugConsole()}catch(a){if(typeof console=="undefined")console={log:function(){}}}else if(typeof console=="undefined")console={log:function(){}}});if(!Array.prototype.indexOf)Array.prototype.indexOf=function(c,b){for(var a=b||0,d=this.length;a<d;a++)if(this[a]==c)return a;return -1};function Reload(){window.location.reload()}function ValidFullName(b){var a=new RegExp(/^[a-zA-Z]+\s[a-zA-Z]+$/i);return a.test(b)}function ValidEmail(b){var a=new RegExp(/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/i);return a.test(b)}function ValidFullNameWithNumberLastName(a){var b=new RegExp(/^([A-Za-z]+(-?'?[A-Za-z+'?-?]+)?)(\s([A-Za-z]+(-?'?[A-Za-z+'?-?]+)?))+?$/i);return b.test(a)&&a.split(" ").length>1}function ValidZipcode(b){var a=new RegExp(/^\d{5}(-\d{4})?$/i);return a.test(b)}function HighlightNav(){var a=location.pathname,b=false;if($jq('#mv_SearchNav li a[href="'+a+'"]')!=null){$jq('#mv_SearchNav li a[href="'+a+'"]').parent().addClass("active");b=true}if(a.charAt(a.length-1)=="/"&&!b){$jq('#mv_SearchNav li a[href="'+a.substring(0,a.length-1)+'"]').parent().addClass("active");b=true}var c=a.split("/");c.length>2&&$jq('#mv_SearchNav li a[href="/'+c[1]+'/"]').parent().addClass("active")}function FreeBrochureSubmitGAEvents(){jQuery("#CreateAlert").prop("checked")&&jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Option Checked - Send Me More");jQuery("#Newsletter").prop("checked")&&jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Option Checked - Free Newsletter");jQuery("#Promos").prop("checked")&&jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Option Checked - Special Promotions")}function disableScrollKeys(){jQuery(document).keypress(function(b){var a=b.keyCode;if(a>=37&&a<=40)return false})}function enableScrollKeys(){jQuery(document).unbind("keypress",null)}function SubmitGetBrochures(){var a=jQuery("input[id^='chkReqCommBrochure_']:checked").length+jQuery("input[id^='chkReqHomeBrochure_']:checked").length;jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Submit Form - Get Free Brochures",a);jQuery.SetDataLayerPair("recommendedLead",a)}var VWOCountTimer=null;function VWOReady(a){if(typeof _vwo_code!="undefined")if(_vwo_code.finished()){clearTimeout(VWOCountTimer);jQuery.isFunction(a)&&a.call()}else VWOCountTimer=setTimeout(function(){VWOReady(a)},500);else jQuery.isFunction(a)&&a.call()}var ReferModuleHandler=function(b){"use strict";var a={},e="/common/setrefer";function c(){return b.GetHashTagParameter("refer")}function d(){var a=c(),d="";if(a!=null&&a!=""){if(typeof document.referrer!="undefined"&&document.referrer!="")d=document.referrer;b.ajax({type:"GET",url:e,data:{refVal:a,refUrl:d}}).done(function(){})}}a.SetRefer=function(){d()};return a}(jQuery);NHS.Scripts.Search=function(b,a){this._typeAheadUrl=b;this.alreadyiInitialize=false;a=typeof a==="undefined"?true:a;a&&this.initialize()};NHS.Scripts.Search.prototype={initialize:function(){var a=this;if(a.alreadyiInitialize==false){jQuery("#nhs_GlobalSearchNavSubmit").click(function(){var c=a.showErrorSearchTextMessage,b=jQuery("#nhs_GlobalSearchNavLocation").val();if(!c(b)){b=jQuery.trim(b);if(b.length>0&&b!="Enter Location or Community Name"){jQuery.googlepush("Search Events","Search Action","Search - NavigationNew");return true}}jQuery("#nhs_field_validation_error").show();jQuery("#nhs_GlobalSearchNavSubmit").removeAttr("disabled");return false});var b=jQuery("#nhs_GlobalSearchNavLocation");a.validateSearchBox(b.closest("form"),jQuery("span.field-validation-error"),b,false);this.setupSearchBox("nhs_GlobalSearchNavLocation","SearchType",false);SetTextBoxesDescriptions();a.alreadyiInitialize=true}},testValidation:function(d){var g=this,b=[["",true,"NOK"],[" ",true,"NOK"],[" , ",true,"NOK"],["123",true,"NOK"],["12345",false,"NOK"],["123456",true,"NOK"],["123,",true,"NOK"],["12345,",true,"NOK"],["123456,",true,"NOK"],["test",false,"NOK"],["test test",false,"NOK"],["test,",true,"NOK"],["test test,",true,"NOK"],["test 23",false,"NOK"],["test 123",false,"NOK"],["test 1234",false,"NOK"],["test 23,",true,"NOK"],["test 123,",true,"NOK"],["test 1234,",true,"NOK"],["g 5 q a,r",true,"NOK"],["g 5 q a, r",true,"NOK"],["g 5 q a, 1",true,"NOK"],["test 23,tx",false,"NOK"],["test 123,fx",false,"NOK"],["test 1234, zd",false,"NOK"],["test 23,tx Area",false,"NOK"],["test 123,fx Area",false,"NOK"],["test 1234, zd Area",false,"NOK"],[",",true,"NOK"],[",t",true,"NOK"],[",tx",true,"NOK"],[", t",true,"NOK"],[", t x",true,"NOK"],[",  tx",true,"NOK"],["  ,  tx",true,"NOK"],[",tx Area",true,"NOK"],["0,tx Area",false,"NOK"]];console.log(b);if(typeof d!="undefined")for(index in d)b.push(d[index]);for(index in b){var a=String(b[index][0]),f=g.showErrorSearchTextMessage(a)==Boolean(b[index][1]);if(f==false){console.info("\n ============ + ERROR + =================");console.info("ERROR :: "+a+" ["+index+"] :: "+String(g.showErrorSearchTextMessage(a))+" == "+String(b[index][1])+" => "+String(f));if(typeof a=="undefined"||a=="")console.info("num #1 :: "+String(true));else if(a.indexOf(",")==-1&&!isNaN(a)&&(new RegExp(/(?:^|[^\d])(\d{5})(?:$|[^\d])/mg)).test(a)==false)console.info("num #2 :: "+String(true));else if(a.split(",").length>1&&(a.split(",")[0].trim()===""||a.split(",")[1].trim()===""||a.split(",")[1].trim().length<2))console.info("num #3 :: "+String(true));else a.indexOf(",")==-1&&(new RegExp("[a-zA-Z0-9 ]+$")).test(a)==false&&console.info("num #4 :: "+String(true));console.info("=================================== \n")}else b[index][2]="OK"}var c="The test is 100% OK!",e=true;for(index in b)if(b[index][2]=="NOK"){c="TEST FAIL!";e=false;break}console.info("\n ************************");if(e)console.info(c);else console.error(c);console.info("************************ \n")},showErrorSearchTextMessage:function(c){var a=String(c).trim(),b=false;if(typeof a=="undefined"||a=="")b=true;else if(a.indexOf(",")==-1&&!isNaN(a)&&(new RegExp(/(?:^|[^\d])(\d{5})(?:$|[^\d])/mg)).test(a)==false)b=true;else if(a.split(",").length>1&&(a.split(",")[0].trim()===""||a.split(",")[1].trim()===""||a.split(",")[1].trim().length<2))b=true;else if(a.indexOf(",")==-1&&(new RegExp("[a-zA-Z0-9 ]+$")).test(a)==false)b=true;return b},validateSearchFormFromInputText:function(b,a){var c=this;a=typeof a==="undefined"?false:a;c.validateSearchBox(b.closest("form"),b.closest("form").find(".field-validation-error"),b,a)},validateSearchBox:function(a,c,b,d){var e=this;jQuery(a).on("submit",function(g){var f=jQuery(b).val().trim(),a=e;if(a.showErrorSearchTextMessage(f)){jQuery.NhsCancelEvent(g);if(d)alert("Enter a valid text to search");else jQuery(c).show();return false}return true})},setupSearchBox:function(b,e,c){var d=this;c=typeof c==="undefined"?false:c;jQuery("#"+b).keypress(function(){jQuery(".field-validation-error").hide()});var a=jQuery("#"+b);if(a!==null&&a.length>0){d.validateSearchBox(a.closest("form"),a.closest("form").find(".field-validation-error"),a,c);a.autocomplete({source:this._typeAheadUrl,select:function(g,a){g.preventDefault();var c=a.item.value.substring(a.item.value.indexOf("|")+1),f=a.item.value.substring(0,a.item.value.indexOf("|"));jQuery("#"+e).val(c);jQuery("#"+b).val(f);jQuery.isFunction(d.AutoCompleteSelect)&&d.AutoCompleteSelect(c,f)},focus:function(a){a.preventDefault()}}).data("ui-autocomplete")._renderItem=function(b,a){a.label=a.value.substring(0,a.value.indexOf("|"));a.label=a.label.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+$jq.ui.autocomplete.escapeRegex(this.term.trim())+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong id='ui-id'>$1</strong>");if(a.label.indexOf(" in ")!=-1)a.label=a.label.substring(0,a.label.indexOf(" in "))+"<span id='ui-id'> in "+a.label.substring(a.label.indexOf(" in ")+4)+"</span>";return jQuery("<li></li>").data("item.autocomplete",a).append("<a>"+a.label+"</a>").appendTo(b)};a.autocomplete().data("ui-autocomplete").menu.element.detach().appendTo(jQuery("#"+b).parent())}}};if(typeof NHS=="undefined"){NHS={};NHS.Scripts={}}NHS.Scripts.Facebook=function(a){this._parameters=a};var redirect=null;NHS.Scripts.Facebook.prototype={initialize:function(){var a=this;jQuery.getScript("//connect.facebook.net/en_US/all.js",function(){jQuery("#fbLoginButton").click(function(){jQuery.googlepush("Account Events","Access Account","Sign In - Create Account - Facebook")});redirect=jQuery("#FromPage").val();if(a._parameters.redirect)redirect=a._parameters.redirect;jQuery.InitFacebookControls(a._parameters.appId);jQuery("#fbLoginButton").click(function(b){jQuery.NhsCancelEventAndStopPropagation(b);FB.login(a.statusChange,{scope:"email"});return false});jQuery("#lnkSignOff,.lnkSignOff").click(function(){FB.logout()})})},statusChange:function(a){a.status==="connected"&&FB.api("/me",function(a){var b={Email:a.email,Id:a.id,FirstName:a.first_name,LastName:a.last_name,MiddleName:a.middle_name,Name:a.name};jQuery.ajax({type:"POST",url:"/Facebook/FacebookLogin",data:b,success:function(b){if(b){typeof _gaq!="undefined"&&_gaq.push(["_setCustomVar",1,"User","{facebook:"+a.id+"}",2]);setTimeout(function(){if(redirect)location.href=redirect;else location.reload()},100)}}})})}};jQuery.extend({CheckLoginState:function(){FB.getLoginStatus(function(b){var a=new NHS.Scripts.Facebook;a.statusChange(b)})},InitFacebookControls:function(a){FB.init({appId:a,status:true,cookie:true,xfbml:true,oauth:true,version:"v2.0"})}});var BCMAPI=new function(){this.token="";this.callback="BCMAPI.flush";this.url="http://api.brightcove.com/services/library";this.calls=[{command:"find_all_videos",def:false},{command:"find_video_by_id",def:"video_id"},{command:"find_video_by_id_unfiltered",def:"video_id"},{command:"find_videos_by_ids",def:"video_ids"},{command:"find_videos_by_ids_unfiltered",def:"video_ids"},{command:"find_video_by_reference_id",def:"reference_id"},{command:"find_video_by_reference_id_unfiltered",def:"reference_id"},{command:"find_videos_by_reference_ids",def:"reference_ids"},{command:"find_videos_by_reference_ids_unfiltered",def:"reference_ids"},{command:"find_videos_by_campaign_id",def:"campaign_id"},{command:"find_videos_by_tags",def:"or_tags"},{command:"find_videos_by_text",def:"text"},{command:"find_videos_by_user_id",def:"user_id"},{command:"find_modified_videos",def:"from_date"},{command:"find_related_videos",def:"video_id"},{command:"find_all_playlists",def:false},{command:"find_playlist_by_id",def:"playlist_id"},{command:"find_playlists_by_ids",def:"playlist_ids"},{command:"find_playlist_by_reference_id",def:"reference_id"},{command:"find_playlists_by_reference_ids",def:"reference_ids"},{command:"find_playlists_for_player_id",def:"player_id"},{command:"search_videos",def:"all"}];this.inject=function(b){var a=document.createElement("script");a.setAttribute("src",this.url+"?"+b);a.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(a);return true};this.find=function(c,a){c=c.toLowerCase().replace(/(find_)|(_)|(get_)/g,"");a=a||null;var f=null,b="";for(var d in this.calls){if(typeof this.calls[d].command=="undefined")continue;if(c==this.calls[d].command.toLowerCase().replace(/(find_)|(_)|(get_)/g,"")){c=this.calls[d].command;if(typeof this.calls[d].def!="undefined")f=this.calls[d].def;break}}b="command="+c;if(typeof a=="object"&&a){for(var e in a)if(e=="selector")b+="&"+f+"="+encodeURIComponent(a[e]);else b+="&"+e+"="+encodeURIComponent(a[e]);if(typeof a.callback!="string")b+="&callback="+this.callback;if(typeof a.token!="string")b+="&token="+this.token}else if(a){b+="&"+f+"="+encodeURIComponent(a)+"&callback="+this.callback;b+="&token="+this.token}else{b+="&token="+this.token;b+="&callback="+this.callback}this.inject(b);return true};this.search=function(a){return this.find("search_videos",a)};this.flush=function(){return true}};(function(a){a.fn.slides=function(b){b=a.extend({},a.fn.slides.option,b);return this.each(function(){a("."+b.container,a(this)).children().wrapAll('<div class="slides_control"/>');var d=a(this),c=a(".slides_control",d),p=c.children().size(),h=c.children().outerWidth(),x=c.children().outerHeight(),g=b.start-1,k=b.effect.indexOf(",")<0?b.effect:b.effect.replace(" ","").split(",")[0],u=b.effect.indexOf(",")<0?k:b.effect.replace(" ","").split(",")[1],e=0,j=0,m=0,f=0,s,l,o,q,z,t,v,r;if(p<2){a("."+b.container,a(this)).fadeIn(b.fadeSpeed,b.fadeEasing,function(){s=true;b.slidesLoaded()});a("."+b.next+", ."+b.prev).fadeOut(0);return false}function i(g,k,i){if(!l&&s){l=true;switch(g){case "next":j=f;e=f+1;e=p===e?0:e;q=h*2;g=-h*2;f=e;break;case "prev":j=f;e=f-1;e=e===-1?p-1:e;q=0;g=0;f=e;break;case "pagination":e=parseInt(i,10);j=a("."+b.paginationClass+" li."+b.currentClass+" a",d).attr("href").match("[^#/]+$");if(e>j){q=h*2;g=-h*2}else{q=0;g=0}f=e}b.animationStart(f);if(k==="fade")if(b.crossfade)c.children(":eq("+e+")",d).css({zIndex:10}).fadeIn(b.fadeSpeed,b.fadeEasing,function(){if(b.autoHeight)c.animate({height:c.children(":eq("+e+")",d).outerHeight()},b.autoHeightSpeed,function(){c.children(":eq("+j+")",d).css({display:"none",zIndex:0});c.children(":eq("+e+")",d).css({zIndex:0});b.animationComplete(e+1);l=false});else{c.children(":eq("+j+")",d).css({display:"none",zIndex:0});c.children(":eq("+e+")",d).css({zIndex:0});b.animationComplete(e+1);l=false}});else c.children(":eq("+j+")",d).fadeOut(b.fadeSpeed,b.fadeEasing,function(){if(b.autoHeight)c.animate({height:c.children(":eq("+e+")",d).outerHeight()},b.autoHeightSpeed,function(){c.children(":eq("+e+")",d).fadeIn(b.fadeSpeed,b.fadeEasing)});else c.children(":eq("+e+")",d).fadeIn(b.fadeSpeed,b.fadeEasing,function(){a.browser.msie&&a(this).get(0).style.removeAttribute("filter")});b.animationComplete(e+1);l=false});else{c.children(":eq("+e+")").css({left:q,display:"block"});if(b.autoHeight)c.animate({left:g,height:c.children(":eq("+e+")").outerHeight()},b.slideSpeed,b.slideEasing,function(){c.css({left:-h});c.children(":eq("+e+")").css({left:h,zIndex:5});c.children(":eq("+j+")").css({left:h,display:"none",zIndex:0});b.animationComplete(e+1);l=false});else c.animate({left:g},b.slideSpeed,b.slideEasing,function(){c.css({left:-h});c.children(":eq("+e+")").css({left:h,zIndex:5});c.children(":eq("+j+")").css({left:h,display:"none",zIndex:0});b.animationComplete(e+1);l=false})}if(b.pagination){a("."+b.paginationClass+" li."+b.currentClass,d).removeClass(b.currentClass);a("."+b.paginationClass+" li:eq("+e+")",d).addClass(b.currentClass);a("#slides_count > span").html(f+1)}}}function w(){clearInterval(d.data("interval"))}function n(){if(b.pause){clearTimeout(d.data("pause"));clearInterval(d.data("interval"));v=setTimeout(function(){clearTimeout(d.data("pause"));r=setInterval(function(){i("next",k)},b.play);d.data("interval",r)},b.pause);d.data("pause",v)}else w()}if(p<2)return;if(g<0)g=0;if(g>p)g=p-1;if(b.start)f=g;b.randomize&&c.randomize();a("."+b.container,d).css({overflow:"hidden",position:"relative"});c.children().css({position:"absolute",top:0,left:c.children().outerWidth(),zIndex:0,display:"none"});c.css({position:"relative",width:h*3,height:x,left:-h});a("."+b.container,d).css({display:"block"});if(b.autoHeight){c.children().css({height:"auto"});c.animate({height:c.children(":eq("+g+")").outerHeight()},b.autoHeightSpeed)}if(b.preload&&c.find("img:eq("+g+")").length){a("."+b.container,d).css({background:"url("+b.preloadImage+") no-repeat 50% 50%"});var y=c.find("img:eq("+g+")").attr("src")+"?"+(new Date).getTime();if(a("img",d).parent().attr("class")!="slides_control")t=c.children(":eq(0)")[0].tagName.toLowerCase();else t=c.find("img:eq("+g+")");c.find("img:eq("+g+")").attr("src",y).load(function(){c.find(t+":eq("+g+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){a(this).css({zIndex:5});a("."+b.container,d).css({background:""});s=true;b.slidesLoaded()})})}else c.children(":eq("+g+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){s=true;b.slidesLoaded()});if(b.bigTarget){c.children().css({cursor:"pointer"});c.children().click(function(){i("next",k);return false})}if(b.hoverPause&&b.play){c.bind("mouseover",function(){w()});c.bind("mouseleave",function(){n()})}if(b.generateNextPrev){a("."+b.container,d).after('<a href="#" class="'+b.prev+'">Prev</a>');a("."+b.prev,d).after('<a href="#" class="'+b.next+'">Next</a>')}if(b.bigNextPrev){a("."+b.container,d).after('<a href="#" class="big'+b.prev+'">Prev</a>');a(".big"+b.prev,d).after('<a href="#" class="big'+b.next+'">Next</a>')}a("."+b.next,d).click(function(a){a.preventDefault();b.play&&n();i("next",k)});a("."+b.prev,d).click(function(a){a.preventDefault();b.play&&n();i("prev",k)});a(".big"+b.next,d).click(function(a){a.preventDefault();b.play&&n();i("next",k)});a(".big"+b.prev,d).click(function(a){a.preventDefault();b.play&&n();i("prev",k)});if(b.generateCount){c.children().each(function(){m++});d.prepend('<p id="slides_count"><span></span> of '+m+"</p>")}a("#slides_count > span").html(f+1);if(b.generatePagination){if(b.prependPagination)d.prepend("<ul class="+b.paginationClass+"></ul>");else d.append("<ul class="+b.paginationClass+"></ul>");c.children().each(function(){a("."+b.paginationClass,d).append('<li><a href="#'+m+'">'+(m+1)+"</a></li>");m++})}else a("."+b.paginationClass+" li a",d).each(function(){a(this).attr("href","#"+m);m++});a("."+b.paginationClass+" li:eq("+g+")",d).addClass(b.currentClass);a("."+b.paginationClass+" li a",d).click(function(){b.play&&n();o=a(this).attr("href").match("[^#/]+$");f!=o&&i("pagination",u,o);return false});a("a.link",d).click(function(){b.play&&n();o=a(this).attr("href").match("[^#/]+$")-1;f!=o&&i("pagination",u,o);return false});if(b.play){r=setInterval(function(){i("next",k)},b.play);d.data("interval",r)}})};a.fn.slides.option={preload:false,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:false,next:"next",prev:"prev",pagination:true,generatePagination:true,prependPagination:false,paginationClass:"pagination",currentClass:"current",generateCount:false,fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:false,randomize:false,play:0,pause:0,hoverPause:false,autoHeight:false,autoHeightSpeed:350,bigTarget:false,bigNextPrev:false,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}};a.fn.randomize=function(b){function c(){return Math.round(Math.random())-.5}return a(this).each(function(){var g=a(this),e=g.children(),f=e.length;if(f>1){e.hide();var d=[];for(i=0;i<f;i++)d[d.length]=i;d=d.sort(c);a.each(d,function(f,d){var a=e.eq(d),c=a.clone(true);c.show().appendTo(g);b!==undefined&&b(a,c);a.remove()})}})}})(jQuery);var _callAddThis=true,_commIdHD=0,_builderIdHD=0,_marketIdCR=0;NHS.Scripts.Globals.EventLogger=function(a){this._siteRoot=a.siteRoot;this._partnerId=a.partnerID;this._marketId=a.marketId;this._fromPage=a.fromPage;this._communityId=a.communityId;this._builderId=a.builderId;this._planId=a.planId;this._specId=a.specId;this._homeSearchViewMetricDisplayed=a.homeSearchViewMetricDisplayed;this._homeSearchViewMetricHidden=a.homeSearchViewMetricHidden};NHS.Scripts.Globals.EventLogger.prototype={logListHubEvent:function(a,d,c,b){try{var f=new ListHubTracker({provider:a,test:d});f.submit(c,b)}catch(e){}},logAndRedirect:function(i,h,a,d,c,f,g,e,b){this._marketId=e;this.logEvent(a,d,c,f,g);this._redirect(i,h,b);return false},logFeaturedListingAndRedirect:function(i,h,b,e,g,f,a,c){this._marketId=a;var d={featuredlistingId:e,communityId:g,builderId:f,marketId:a};this.logEventWithParameters(b,d);this._redirect(i,h,c);return false},logBasicListingAndRedirect:function(d,c,a,b){this.logBasicListingEvent(a,b);this._redirect(d,c);return false},logEventWithParameters:function(a,c){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logViewWithParameters(b,a,c)}},logEvent:function(a,d,c){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,d,c,0,0,0)}},logBasicListingEvent:function(a,c){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,0,0,0,0,c)}},logEvent:function(a,d,c,e,f){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,d,c,e,f,0)}},setAllowAddThis:function(){_callAddThis=false;setTimeout(function(){_callAddThis=true},2e3)},logMultiEvent:function(a,c,d,e,f){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,c,d,e,f,0)}},logHomeResultsMetrics:function(c,d){if(c){var a;if(d==1)a=this._homeSearchViewMetricDisplayed;else a=this._homeSearchViewMetricHidden;var b=this._siteRoot+"eventlogger/logevent-"+c;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logMetrics(b,a)}},attachEventsToAddThis:function(){var a=this;typeof addthis!="undefined"&&addthis.addEventListener("addthis.menu.share",function(e){if(_callAddThis){var d=e.data.service.toString().toLowerCase(),b="MHSMS",c=a._planId>0||a._specId>0;if(d.indexOf("favorites")==-1&&d.indexOf("print")==-1&&d.indexOf("email")==-1){if(a._planId==0&&a._specId==0&&a._communityId==0)b="MHSMS";else{c=a._planId>0||a._specId>0;b=c?"HDSMS":"CDSMS"}a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId)}else if(d.indexOf("email")>-1){c=a._planId>0||a._specId>0;b=c?"HOMSTF":"COMSTF";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()}else if(d.indexOf("print")>-1){c=a._planId>0||a._specId>0;b=c?"HOMPR":"COMPR";if($jq(this).hasClass("nextStepsPrint"))b=c?"HDNSPRN":"CDNSPRN";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()}}});$jq(".addthis_button_email").click(function(){var c=a._planId>0||a._specId>0,b=c?"HOMSTF":"COMSTF";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()});$jq(".addthis_button_print").click(function(){var c=a._planId>0||a._specId>0,b=c?"HOMPR":"COMPR";if($jq(this).hasClass("nextStepsPrint"))b=c?"HDNSPRN":"CDNSPRN";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()});$jq("#btn_fb_mh").click(function(){var b="MHSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()});$jq("#btn_tw_mh").click(function(){var b="MHSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()})},attachEventsToDetails:function(){var a=this;try{FB.Event.subscribe("edge.create",function(){var c=a._planId>0||a._specId>0,b=c?"HDSMS":"CDSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()})}catch(b){}$jq("#btn_fb_bottom").click(function(){var c=a._planId>0||a._specId>0,b=c?"HDSMS":"CDSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis();jQuery.SetDataLayerPair("siteSocialMediaS")});$jq("#btn_tw_bottom").click(function(){var c=a._planId>0||a._specId>0,b=c?"HDSMS":"CDSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis();jQuery.SetDataLayerPair("siteSocialMediaS")})},_redirect:function(a,b,c){if(!a)var a=window.event;try{a.cancelBubble=true}catch(d){}a.stopPropagation&&a.stopPropagation();if(b)if(c)window.open(b);else setTimeout(function(){window.location.href=b},500)},_logViewWithParameters:function(a,e,b){var d=a;if(this._fromPage=="communityresults"){d=a;if(this._siteRoot=="/")d="/NewHomeSource"+a}if(b.builderId)a=a+"/builder-"+b.builderId;if(b.communityId)a=a+"/community-"+b.communityId;if(b.communityList)a=a+"/communitylist-"+b.communityList;if(b.marketId)a=a+"/market-"+b.marketId;if(b.planId)a=a+"/planid-"+b.planId;if(b.specId)a=a+"/specid-"+b.specId;if(b.basiclistingId)a=a+"/basiclistingid-"+b.basiclistingId;if(b.featuredlistingId)a=a+"/featuredlistingid-"+b.featuredlistingId;if(b.refer)a=a+"/refer-"+b.refer;if(b.totalHomes)a=a+"/totalhomes-"+b.totalHomes;if(b.builderCommunityList)a=a+"?buildercommunitylist="+b.builderCommunityList;if(b.basicListingList)a=a+"?basiclistinglist="+b.basicListingList;if(b.homeList)a=a+"?homeList="+b.homeList;if(b.featuredListingList)a=a+"?featuredlistinglist="+b.featuredListingList;var c=true;if(typeof b.async!="undefined")c=b.async;$jq.ajax({type:"Post",url:a,async:c})},_logView:function(a,j,c,b,f,g,i){if(a.indexOf("http://")<0)a=a.replace(" ","").replace("//","/");var d=this._fromPage,h=a,e=f>0||g>0;if(c==0&&e)c=_commIdHD;if(b==0&&e)b=_builderIdHD;if(this._fromPage=="communityresults"){h=a;d=this._siteRoot+"communityresults";if(this._siteRoot=="/"){h="/NewHomeSource"+a;d="/NewHomeSource/communityresults"}}if(i==0)a=a+"/builder-"+b+"/community-"+c+"/planid-"+f+"/specid-"+g+"/market-"+this._marketId;else a=a+"/basiclisting-"+i+"/market-"+this._marketId;$jq.ajax({type:"Post",url:a,async:true})},_logMetrics:function(c,a){var b={logsInChains:a};$jq.ajax({type:"POST",url:"http://"+location.host+"/metricseventlogger/",data:b,dataType:"json"})}};NHS.Scripts.NhsTv=function(){};NHS.Scripts.NhsTv.prototype={get_log:function(){return this._log},initialize:function(){this._setUi()},_setUi:function(){var a=$jq(".nhs_TvCol1").height(),b=$jq(".nhs_TvCol2").height();if(a>=b)$jq(".nhs_TvCol2").height(a-45);else $jq(".nhs_TvCol1").height(b);var c=$jq(".nhs_TvSearchMenu ul");c.find("li").each(function(){if($jq(this).find("ul").length>0){$jq(this).children("li > span").on("touchstart mouseenter mouseup",function(a){if($jq(this).hasClass("nhs_Active")){if(a.type=="mouseenter")return false;if(a.type=="touchstart")return true;if(a.type=="mouseup"){$jq(this).parent().find("ul").stop(true,true).hide();$jq(this).removeClass("nhs_Active")}}else{$jq(this).parent().find("ul").stop(true,true).show();$jq(this).addClass("nhs_Active");$jq.googlepush("NHS TV Page","Search","Sub Market Hover")}if(a.type=="touchstart")return false});$jq(this).mouseleave(function(){$jq(this).find("ul").stop(true,true).hide();$jq(this).find("span").removeClass("nhs_Active")})}})}}