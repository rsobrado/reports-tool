if(typeof NHS=="undefined"){NHS={};NHS.Scripts={}}NHS.Scripts.GoogleMapApi=function(b){var a={};jQuery.extend(true,a,this.defaultOptios);this.options=jQuery.extend(true,a,b);this.markersArray=[];this.infowindow=new google.maps.InfoWindow(this.options.InfoWindowOptions);this.infowindowTooltip=new google.maps.InfoWindow(this.options.InfoWindowOptions);this.map=null;this.bounds=new google.maps.LatLngBounds;this.isMapCreate=false};NHS.Scripts.GoogleMapApi.prototype={defaultOptios:{MapOptions:{Latitude:null,Longitude:null,Zoom:8,ContainerName:"map-canvas",zoomControl:true,ZoomControlStyle:"LARGE",zoomControlPosition:null,disableDefaultUI:false,Draggable:true,Scrollwheel:true,DisableDoubleClickZoom:false,panControl:false,overviewControl:false,streetViewControl:false},CreateMapWrap:true,DirectionsDisplayPanel:null,MarkerPointOptions:{optimized:true},Loader:"",MinZoom:3,MaxZoom:null,MarkerClustererOptions:{gridSize:50,maxZoom:15,cssName:null,imagePath:null,zoomOnClick:true,minimumClusterSize:null},UseClusterer:false,InfoWindowOptions:{disableAutoPan:false},MarkerPointAsynOptions:{Listener:"idle",UrlServer:null},ProcessResultOptions:{Latitude:"",Longitude:"",Name:""},Events:{OnMapCreate:null,OnMarkersCreate:null,OnMarkersRemove:function(){},OnGetMarkerPointAsyn:function(){},MarkerClickCallBack:null,IdleCallBack:null,MarkerMouseOverCallBack:null,MarkerMouseOutCallBack:null,ZoomChangesCallBack:null,DragChangesCallBack:null,ClickCallBack:null,InfowindowTooltipReadyCallBack:null,InfowindowReadyCallBack:null,tInfowindowOffsetCallBack:null},Autocomplete:{CreateControl:false,BindToBound:false,Autocompletecontrol:"pac-input"}},createMap:function(){var a=this,b=a.options.MapOptions,d=a.options.MarkerClustererOptions,c={zoom:b.Zoom,center:new google.maps.LatLng(b.Latitude,b.Longitude),zoomControl:b.zoomControl,zoomControlOptions:{style:google.maps.ZoomControlStyle[b.ZoomControlStyle],position:google.maps.ControlPosition[b.zoomControlPosition]},disableDefaultUI:b.disableDefaultUI,draggable:b.Draggable,scrollwheel:b.Scrollwheel,disableDoubleClickZoom:b.DisableDoubleClickZoom,panControl:b.panControl,streetViewControl:b.streetViewControl,overviewMapControl:b.overviewMapControl,maxZoom:a.options.MaxZoom,minZoom:a.options.MinZoom};a.options.CreateMapWrap&&a.createMapWrap();a.map=new google.maps.Map(document.getElementById(b.ContainerName),c);google.maps.Map.prototype.clearOverlays=function(){a.clearOverlays()};jQuery.isFunction(a.options.Events.ClickCallBack)&&google.maps.event.addListener(a.map,"click",function(){a.options.Events.ClickCallBack.call(a)});google.maps.event.addListener(a.map,"dragend",function(){jQuery.isFunction(a.options.Events.DragChangesCallBack)&&a.options.Events.DragChangesCallBack.call(a)});if(window["MarkerClusterer"])a.markerCluster=new MarkerClusterer(a.map,[],d);a.getMarkerPointAsyn();a.CreateOverlay();jQuery.isFunction(a.options.Events.InfowindowTooltipReadyCallBack)&&google.maps.event.addListener(a.infowindowTooltip,"domready",function(){a.options.Events.InfowindowTooltipReadyCallBack.call(a)});jQuery.isFunction(a.options.Events.InfowindowReadyCallBack)&&google.maps.event.addListener(a.infowindow,"domready",function(){a.options.Events.InfowindowReadyCallBack.call(a)});jQuery.isFunction(a.options.Events.ZoomChangesCallBack)&&google.maps.event.addListener(a.map,"zoom_changed",function(){a.options.Events.ZoomChangesCallBack.call(a,a.map.getZoom())});google.maps.event.addListener(a.map,"idle",function(){a.RemoveGoogleInfo();jQuery.isFunction(a.options.Events.IdleCallBack)&&a.options.Events.IdleCallBack.call(a);jQuery.isFunction(a.options.Events.OnMapCreate)&&!a.isMapCreate&&a.options.Events.OnMapCreate();a.isMapCreate=true});google.maps.event.addListenerOnce(a.map,"tilesloaded",a.RemoveGoogleInfo)},createMapWrap:function(){var a=this,b=a.options.MapOptions;jQuery("#"+b.ContainerName).wrap('<div id="nhs_mapwrap" style="position:relative;" />');jQuery("#nhs_mapwrap").append('<div id="nhs_OverlayMap" style="position: absolute;z-index:99999;top: 0px;left: 0px;height:100%;width:100%;background-color: #000;filter: alpha(opacity=35);-moz-opacity: 0.35;opacity: 0.35;"></div>');jQuery("#nhs_mapwrap").append('<div id="nhs_LoadingMap" class="nhs_Loading" style="position:absolute;"><p>Updating</p></div>');a.showLoading()},hideLoading:function(){jQuery("#nhs_LoadingMap, #nhs_OverlayMap").hide();jQuery(".gm-style > div > a").attr("href")&&setTimeout(function(){for(var b=jQuery(".gm-style-cc").length,a=1;a<b;a+=1)jQuery(".gm-style-cc").eq("-1").remove();jQuery(".gm-style > div > a").removeAttr("href").removeAttr("title")},800)},showLoading:function(){jQuery("#nhs_LoadingMap, #nhs_OverlayMap").show()},clearOverlays:function(){for(var a=this,b=0;b<a.markersArray.length;b++)a.markersArray[b].setMap(null);a.markersArray=[];a.bounds=new google.maps.LatLngBounds;a.markerCluster&&a.markerCluster.clearMarkers();a.options.Events.OnMarkersRemove()},getMarkerPointAsyn:function(){var a=this,b=a.options.MarkerPointAsynOptions;if(b.Listener&&b.UrlServer){a.options.Events.OnGetMarkerPointAsyn(b);google.maps.event.addListener(a.map,b.Listener,function(){a.showLoading();var c=a.getBoundsFromMap();a.map.clearOverlays();jQuery.getJSON(b.UrlServer,c,function(b){a.processResult(b)})})}else a.hideLoading()},getBoundsFromMap:function(){var e=this,a=e.map.getBounds(),b=a.getNorthEast(),c=a.getSouthWest(),d={minLat:c.lat(),minLng:c.lng(),maxLat:b.lat(),maxLng:b.lng()};return d},processResult:function(a){var c=this;c.showLoading();var d=c.options.ProcessResultOptions;if(a!==null)for(var b=0;b<a.length;b++){var e=c.getHtmlInfowindow(a,a[b]),f=c.getIconMarkerPoint(a,a[b]),g=c.getNameMarkerPoint(a,a[b]);c.createMarkerPoint(a[b][d.Latitude],a[b][d.Longitude],g,e,f,a[b])}c.hideLoading()},getHtmlInfowindow:function(){return null},getIconMarkerPoint:function(){return null},getNameMarkerPoint:function(d,b){var c=this,a=c.options.ProcessResultOptions;return b[a.Name]},createMarkerPoint:function(g,h,f,c,d,e){var a=this,b=a._createMarkerPoint(g,h,f,c,d,e);if(a.options.UseClusterer==false)b.setMap(a.map);else a.markerCluster&&a.markerCluster.addMarker(b);a.markersArray.push(b)},_createMarkerPoint:function(j,k,i,d,h,c){var a=this,e=new google.maps.LatLng(j,k),f=a.options.MarkerPointOptions,g={position:e,icon:h,title:i,optimized:f.optimized,zIndex:99};a.bounds.extend(e);var b=new google.maps.Marker(g);jQuery.isFunction(a.options.Events.OnMarkersCreate)&&a.options.Events.OnMarkersCreate(c,a.infowindow,b);typeof d=="string"&&google.maps.event.addListener(b,"click",function(){a.infowindow.setContent(d);a.infowindow.open(a.map,b);jQuery.isFunction(a.options.Events.MarkerClickCallBack)&&a.options.Events.MarkerClickCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});typeof d!="string"&&jQuery.isFunction(a.options.Events.MarkerClickCallBack)&&google.maps.event.addListener(b,"click",function(){a.options.Events.MarkerClickCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});jQuery.isFunction(a.options.Events.MarkerMouseOverCallBack)&&google.maps.event.addListener(b,"mouseover",function(){a.options.Events.MarkerMouseOverCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});jQuery.isFunction(a.options.Events.MarkerMouseOutCallBack)&&google.maps.event.addListener(b,"mouseout",function(){a.options.Events.MarkerMouseOutCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});return b},AutoFit:function(){var a=this;a.map.fitBounds(a.bounds)},CreateOverlay:function(){this.ourOverlay=new google.maps.OverlayView;this.ourOverlay.draw=function(){};this.ourOverlay.setMap(this.map)},GetInfowindowOffset:function(b,f,g,h){var d=0,e=0,a=this.ourOverlay.getProjection().fromLatLngToContainerPixel(h.getPosition()),i=this.ourOverlay.getProjection().fromLatLngToContainerPixel(g.getBounds().getSouthWest()),c=this.ourOverlay.getProjection().fromLatLngToContainerPixel(g.getBounds().getNorthEast());if(a.x<b/2)d=b/2-a.x;else if(a.x>c.x-b/2)d=c.x-b/2-a.x;if(a.y<f)e=a.y+f-(a.y-c.y);else e=a.y+20-(a.y-c.y);return new google.maps.Size(d,e)},GetPixelFromLatLng:function(b){var a=this.map.getProjection(),c=a.fromLatLngToPoint(b);return c},RemoveGoogleInfo:function(){if(jQuery(".gm-style > div > a").attr("href")){for(var b=jQuery(".gm-style-cc").length,a=1;a<b;a+=1)jQuery(".gm-style-cc").eq("-1").remove();jQuery(".gm-style > div > a").removeAttr("href").removeAttr("title")}}};(function(){(function(a,f,e){var b,d,c;c="slidesjs";d={width:940,height:528,start:1,navigation:{active:true,effect:"slide"},pagination:{active:true,effect:"slide"},play:{active:false,effect:"slide",interval:5e3,auto:false,swap:true,pauseOnHover:false,restartDelay:2500},effect:{slide:{speed:500},fade:{speed:300,crossfade:true}},callback:{loaded:function(){},start:function(){},complete:function(){}}};b=function(){function b(b,e){this.element=b;this.options=a.extend(true,{},d,e);this._defaults=d;this._name=c;this.init()}return b}();b.prototype.init=function(){var b,h,e,g,i,d,c=this;b=a(this.element);this.data=a.data(this);a.data(this,"animating",false);a.data(this,"total",b.children().not(".slidesjs-navigation",b).length);a.data(this,"current",this.options.start-1);a.data(this,"vendorPrefix",this._getVendorPrefix());if(typeof TouchEvent!=="undefined"){a.data(this,"touch",true);this.options.effect.slide.speed=this.options.effect.slide.speed/2}b.css({overflow:"hidden"});b.slidesContainer=b.children().not(".slidesjs-navigation",b).wrapAll("<div class='slidesjs-container'>",b).parent().css({overflow:"hidden",position:"relative"});a(".slidesjs-container",b).wrapInner("<div class='slidesjs-control'>",b).children();a(".slidesjs-control",b).css({position:"relative",left:0});a(".slidesjs-control",b).children().addClass("slidesjs-slide").css({position:"absolute",top:0,left:0,width:"100%",zIndex:0,display:"none",webkitBackfaceVisibility:"hidden"});a.each(a(".slidesjs-control",b).children(),function(c){var b;b=a(this);return b.attr("slidesjs-index",c)});if(this.data.touch){a(".slidesjs-control",b).on("touchstart",function(a){return c._touchstart(a)});a(".slidesjs-control",b).on("touchmove",function(a){return c._touchmove(a)});a(".slidesjs-control",b).on("touchend",function(a){return c._touchend(a)})}b.fadeIn(0);this.update();this.data.touch&&this._setuptouch();a(".slidesjs-control",b).children(":eq("+this.data.current+")").eq(0).fadeIn(0,function(){return a(this).css({zIndex:10})});if(this.options.navigation.active){i=a("<a>",{"class":"slidesjs-previous slidesjs-navigation",href:"#",title:"Previous",text:"Previous"}).appendTo(b);h=a("<a>",{"class":"slidesjs-next slidesjs-navigation",href:"#",title:"Next",text:"Next"}).appendTo(b)}a(".slidesjs-next",b).click(function(a){a.preventDefault();c.stop(true);return c.next(c.options.navigation.effect)});a(".slidesjs-previous",b).click(function(a){a.preventDefault();c.stop(true);return c.previous(c.options.navigation.effect)});if(this.options.play.active){g=a("<a>",{"class":"slidesjs-play slidesjs-navigation",href:"#",title:"Play",text:"Play"}).appendTo(b);d=a("<a>",{"class":"slidesjs-stop slidesjs-navigation",href:"#",title:"Stop",text:"Stop"}).appendTo(b);g.click(function(a){a.preventDefault();return c.play(true)});d.click(function(a){a.preventDefault();return c.stop(true)});this.options.play.swap&&d.css({display:"none"})}if(this.options.pagination.active){e=a("<ul>",{"class":"slidesjs-pagination"}).appendTo(b);a.each(new Array(this.data.total),function(f){var b,d;b=a("<li>",{"class":"slidesjs-pagination-item"}).appendTo(e);d=a("<a>",{href:"#","data-slidesjs-item":f,html:f+1}).appendTo(b);return d.click(function(b){b.preventDefault();c.stop(true);return c.goto(a(b.currentTarget).attr("data-slidesjs-item")*1+1)})})}a(f).bind("resize",function(){return c.update()});this._setActive();this.options.play.auto&&this.play();return this.options.callback.loaded(this.options.start)};b.prototype._setActive=function(d){var b,c;b=a(this.element);this.data=a.data(this);c=d>-1?d:this.data.current;a(".active",b).removeClass("active");return a(".slidesjs-pagination li:eq("+c+") a",b).addClass("active")};b.prototype.update=function(){var b,d,c;b=a(this.element);this.data=a.data(this);a(".slidesjs-control",b).children(":not(:eq("+this.data.current+"))").css({display:"none",left:0,zIndex:0});c=b.width();d=this.options.height/this.options.width*c;this.options.width=c;this.options.height=d;return a(".slidesjs-control, .slidesjs-container",b).css({width:c,height:d})};b.prototype.next=function(b){var c;c=a(this.element);this.data=a.data(this);a.data(this,"direction","next");if(b===void 0)b=this.options.navigation.effect;if(b==="fade")return this._fade();else return this._slide()};b.prototype.previous=function(b){var c;c=a(this.element);this.data=a.data(this);a.data(this,"direction","previous");if(b===void 0)b=this.options.navigation.effect;if(b==="fade")return this._fade();else return this._slide()};b.prototype.goto=function(b){var d,c;d=a(this.element);this.data=a.data(this);if(c===void 0)c=this.options.pagination.effect;if(b>this.data.total)b=this.data.total;else if(b<1)b=1;if(typeof b==="number")if(c==="fade")return this._fade(b);else return this._slide(b);else if(typeof b==="string")if(b==="first")if(c==="fade")return this._fade(0);else return this._slide(0);else if(b==="last")if(c==="fade")return this._fade(this.data.total);else return this._slide(this.data.total)};b.prototype._setuptouch=function(){var e,c,b,d;e=a(this.element);this.data=a.data(this);d=a(".slidesjs-control",e);c=this.data.current+1;b=this.data.current-1;if(b<0)b=this.data.total-1;if(c>this.data.total-1)c=0;d.children(":eq("+c+")").css({display:"block",left:this.options.width});return d.children(":eq("+b+")").css({display:"block",left:-this.options.width})};b.prototype._touchstart=function(c){var d,b;d=a(this.element);this.data=a.data(this);b=c.originalEvent.touches[0];this._setuptouch();a.data(this,"touchtimer",Number(new Date));a.data(this,"touchstartx",b.pageX);a.data(this,"touchstarty",b.pageY);return c.stopPropagation()};b.prototype._touchend=function(h){var g,e,c,b,f,i,d,j=this;g=a(this.element);this.data=a.data(this);i=h.originalEvent.touches[0];b=a(".slidesjs-control",g);if(b.position().left>this.options.width*.5||b.position().left>this.options.width*.1&&Number(new Date)-this.data.touchtimer<250){a.data(this,"direction","previous");this._slide()}else if(b.position().left<-(this.options.width*.5)||b.position().left<-(this.options.width*.1)&&Number(new Date)-this.data.touchtimer<250){a.data(this,"direction","next");this._slide()}else{c=this.data.vendorPrefix;d=c+"Transform";e=c+"TransitionDuration";f=c+"TransitionTimingFunction";b[0].style[d]="translateX(0px)";b[0].style[e]=this.options.effect.slide.speed*.85+"ms"}b.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){c=j.data.vendorPrefix;d=c+"Transform";e=c+"TransitionDuration";f=c+"TransitionTimingFunction";b[0].style[d]="";b[0].style[e]="";return b[0].style[f]=""});return h.stopPropagation()};b.prototype._touchmove=function(c){var f,g,d,b,e;f=a(this.element);this.data=a.data(this);b=c.originalEvent.touches[0];g=this.data.vendorPrefix;d=a(".slidesjs-control",f);e=g+"Transform";a.data(this,"scrolling",Math.abs(b.pageX-this.data.touchstartx)<Math.abs(b.pageY-this.data.touchstarty));if(!this.data.animating&&!this.data.scrolling){c.preventDefault();this._setuptouch();d[0].style[e]="translateX("+(b.pageX-this.data.touchstartx)+"px)"}return c.stopPropagation()};b.prototype.play=function(f){var c,e,d,b=this;c=a(this.element);this.data=a.data(this);if(!this.data.playInterval){if(f){e=this.data.current;this.data.direction="next";if(this.options.play.effect==="fade")this._fade();else this._slide()}a.data(this,"playInterval",setInterval(function(){e=b.data.current;b.data.direction="next";if(b.options.play.effect==="fade")return b._fade();else return b._slide()},this.options.play.interval));d=a(".slidesjs-container",c);if(this.options.play.pauseOnHover){d.unbind();d.bind("mouseenter",function(){return b.stop()});d.bind("mouseleave",function(){if(b.options.play.restartDelay)return a.data(b,"restartDelay",setTimeout(function(){return b.play(true)},b.options.play.restartDelay));else return b.play()})}a.data(this,"playing",true);a(".slidesjs-play",c).addClass("slidesjs-playing");if(this.options.play.swap){a(".slidesjs-play",c).hide();return a(".slidesjs-stop",c).show()}}};b.prototype.stop=function(c){var b;b=a(this.element);this.data=a.data(this);clearInterval(this.data.playInterval);this.options.play.pauseOnHover&&c&&a(".slidesjs-container",b).unbind();a.data(this,"playInterval",null);a.data(this,"playing",false);a(".slidesjs-play",b).removeClass("slidesjs-playing");if(this.options.play.swap){a(".slidesjs-stop",b).hide();return a(".slidesjs-play",b).show()}};b.prototype._slide=function(e){var l,d,g,k,c,h,b,m,j,i,f=this;l=a(this.element);this.data=a.data(this);if(!this.data.animating&&e!==this.data.current+1){a.data(this,"animating",true);d=this.data.current;if(e>-1){e=e-1;i=e>d?1:-1;g=e>d?-this.options.width:this.options.width;c=e}else{i=this.data.direction==="next"?1:-1;g=this.data.direction==="next"?-this.options.width:this.options.width;c=d+i}if(c===-1)c=this.data.total-1;if(c===this.data.total)c=0;this._setActive(c);b=a(".slidesjs-control",l);e>-1&&b.children(":not(:eq("+d+"))").css({display:"none",left:0,zIndex:0});b.children(":eq("+c+")").css({display:"block",left:i*this.options.width,zIndex:10});this.options.callback.start(d+1);if(this.data.vendorPrefix){h=this.data.vendorPrefix;j=h+"Transform";k=h+"TransitionDuration";m=h+"TransitionTimingFunction";b[0].style[j]="translateX("+g+"px)";b[0].style[k]=this.options.effect.slide.speed+"ms";return b.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){b[0].style[j]="";b[0].style[k]="";b.children(":eq("+c+")").css({left:0});b.children(":eq("+d+")").css({display:"none",left:0,zIndex:0});a.data(f,"current",c);a.data(f,"animating",false);b.unbind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd");b.children(":not(:eq("+c+"))").css({display:"none",left:0,zIndex:0});f.data.touch&&f._setuptouch();return f.options.callback.complete(c+1)})}else return b.stop().animate({left:g},this.options.effect.slide.speed,function(){b.css({left:0});b.children(":eq("+c+")").css({left:0});return b.children(":eq("+d+")").css({display:"none",left:0,zIndex:0},a.data(f,"current",c),a.data(f,"animating",false),f.options.callback.complete(c+1))})}};b.prototype._fade=function(e){var h,f,b,c,g,d=this;h=a(this.element);this.data=a.data(this);if(!this.data.animating&&e!==this.data.current+1){a.data(this,"animating",true);f=this.data.current;if(e){e=e-1;g=e>f?1:-1;b=e}else{g=this.data.direction==="next"?1:-1;b=f+g}if(b===-1)b=this.data.total-1;if(b===this.data.total)b=0;this._setActive(b);c=a(".slidesjs-control",h);c.children(":eq("+b+")").css({display:"none",left:0,zIndex:10});this.options.callback.start(f+1);if(this.options.effect.fade.crossfade){c.children(":eq("+this.data.current+")").stop().fadeOut(this.options.effect.fade.speed);return c.children(":eq("+b+")").stop().fadeIn(this.options.effect.fade.speed,function(){c.children(":eq("+b+")").css({zIndex:0});a.data(d,"animating",false);a.data(d,"current",b);return d.options.callback.complete(b+1)})}else return c.children(":eq("+f+")").stop().fadeOut(this.options.effect.fade.speed,function(){c.children(":eq("+b+")").stop().fadeIn(d.options.effect.fade.speed,function(){return c.children(":eq("+b+")").css({zIndex:10})});a.data(d,"animating",false);a.data(d,"current",b);return d.options.callback.complete(b+1)})}};b.prototype._getVendorPrefix=function(){var f,b,d,a,c;f=e.body||e.documentElement;d=f.style;a="transition";c=["Moz","Webkit","Khtml","O","ms"];a=a.charAt(0).toUpperCase()+a.substr(1);b=0;while(b<c.length){if(typeof d[c[b]+a]==="string")return c[b];b++}return false};return a.fn[c]=function(d){return this.each(function(){if(!a.data(this,"plugin_"+c))return a.data(this,"plugin_"+c,new b(this,d))})}})(jQuery,window,document)}).call(this);NHS.Scripts.Tv=function(a){this.parameters=a;this.searchTypeahead=new NHS.Scripts.Search(this.parameters.AutoCompliteUrl)};onYouTubeIframeAPIReady=function(){for(var h=jQuery(".nhs_EmbedYTPlayer"),f,a,e,c,b,d,i=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,g=0;g<h.length;g+=1){f=jQuery(h[g]);c=f.attr("data").split("&");b=c[0].match(i);d=c[1].split("=");a=f.attr("id");if(b&&b[2].length==11)e=b[2];if(Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0)NHS.Scripts.Tv.prototype.nhsYoutubePlayers[a]=new YT.Player(a,{videoId:e,playerVars:{autohide:1,autoplay:0,controls:2,showinfo:0,fs:1,modestbranding:0,enablejsapi:1,cc_load_policy:0,origin:d[1],wmode:"opaque"},events:{onStateChange:NHS.Scripts.Tv.prototype.onPlayerStateChange}});else NHS.Scripts.Tv.prototype.nhsYoutubePlayers[a]=new YT.Player(a,{videoId:e,playerVars:{autohide:1,autoplay:0,controls:2,showinfo:0,fs:1,modestbranding:0,enablejsapi:1,cc_load_policy:0,origin:d[1]},events:{onStateChange:NHS.Scripts.Tv.prototype.onPlayerStateChange}})}};jQuery("#nhs_TvSegments a.btnCss").click(function(){var b=jQuery(this).attr("data"),a=NHS.Scripts.Tv.prototype.nhsYoutubePlayers[b];a&&a.getPlayerState&&a.getPlayerState()!=1&&a.playVideo();return false});NHS.Scripts.Tv.prototype={nhsYoutubePlayers:{},init:function(){this.initMap();this.initLocationBox();this.loadYoutubeAPI();this.initPagination();this.bindPaginationEvents();this.initEvents();this.createNavigationMenu()},createNavigationMenu:function(){var i=this,e=jQuery("#FeaturedHomes"),d=jQuery("#FindCommunities"),g=jQuery("#ViewSegments"),f=jQuery("#ShowSponsors"),b,a,c,h;if(e!==null&&e.length>0)b=jQuery("<li><a href='#FeaturedHomes' onclick=\"jQuery.googlepush('NHS TV Page', 'Button Row', 'Featured Homes')\">Featured Homes</a></li>");if(d!==null&&d.length>0)a=jQuery("<li><a href='#FindCommunities' onclick=\"jQuery.googlepush('NHS TV Page', 'Button Row', 'Find Communities')\">Find Communities</a></li>");if(g!==null&&g.length>0)c=jQuery("<li><a href='#ViewSegments' onclick=\"jQuery.googlepush('NHS TV Page', 'Button Row', 'View Segments')\">View Segments</a></li>");if(f!==null&&f.length>0)h=jQuery("<li><a href='#ShowSponsors' onclick=\"jQuery.googlepush('NHS TV Page', 'Button Row', 'Show Sponsors')\">Show Sponsors</a></li>");if(i.parameters.PartnerId!=1)jQuery("#nhs_UlNavigation").append(c,b,a);else jQuery("#nhs_UlNavigation").append(b,a,c);jQuery("#nhs_UlNavigation").append(h)},initEvents:function(){var a=this;jQuery("#nhs_tvSignUp").click(function(){a.validateNewsLetterValues("#nhs_tvSignUp",false)});jQuery("#nhs_tvSmallSignUp").click(function(){a.validateNewsLetterValues("#nhs_tvSmallSignUp",true)});jQuery("#nhs_TvMarketSlides").slidesjs({width:960,height:425,pagination:{active:true,effect:"slide"},effect:{slide:{speed:900},fade:{speed:300,crossfade:true}},play:{active:false,effect:"slide",interval:6e3,auto:true,swap:true,pauseOnHover:true,restartDelay:2e4}});jQuery("#nhs_TvMarketSlides .slidesjs-next").click(function(){jQuery.googlepush("NHS TV Page","Slider","Slider Right")});jQuery("#nhs_TvMarketSlides").find("ul").find("li").find("a").click(function(){jQuery.googlepush("NHS TV Page","Slider","Slider Button")});jQuery("#nhs_TvMarketFeaturedSlides").slidesjs({width:960,height:320,pagination:{active:true,effect:"slide"},effect:{slide:{speed:900},fade:{speed:300,crossfade:true}},play:{active:false,effect:"slide",interval:7e3,auto:true,swap:true,pauseOnHover:true,restartDelay:2e4}});jQuery("#nhs_TvMarketFeaturedSlides").find(".slidesjs-next").click(function(){jQuery.googlepush("NHS TV Page","Featured","Slider Right")});jQuery(".btnContestModal").click(function(){jQuery.googlepush("NHS TV Page","Slider","Contest Click")});jQuery("a.btnContestModal").attr("href","/newhomesourcetv/contestmodal/"+a.parameters.MarketId+"?width=640&amp;height=320")},bindPaginationEvents:function(){var d=jQuery(".nhs_TvVideoPage").parent(),c=jQuery(".nhs_TvVideoItem"),b=c.length,a=6;jQuery(".slidesjs-pagination li a",d).click(function(){jQuery.googlepush("NHS TV Page","Segments","Slider Button");var h=jQuery(".slidesjs-pagination li .active",d),g=jQuery(this),i=g.attr("data").match("[^#/]+$"),j=h.attr("data").match("[^#/]+$");if(j[0]!==i[0]){h.removeClass("active");g.addClass("active");var e=i*a,f=e+a;for(e;e<f&&e<b;e+=1)c[e].style.display="";e=j*a;f=e+a;for(e;e<f&&e<b;e+=1)c[e].style.display="none";jQuery("html,body").animate({scrollTop:jQuery("#ViewSegments").offset().top});jQuery("html,body").scrollTop(jQuery("#ViewSegments").offset().top+1)}});jQuery(".slidesjs-previous",d).click(function(){jQuery.googlepush("NHS TV Page","Segments","Slider Left");var f=jQuery(".slidesjs-pagination li .active",d),i=f.attr("data").match("[^#/]+$"),h=parseInt(i)-1,j=f.parent().prev().find("a:first");if(0<=h){f.removeClass("active");j.addClass("active");var e=h*a,g=e+a;for(e;e<g&&e<b;e+=1)c[e].style.display="";e=i*a;g=e+a;for(e;e<g&&e<b;e+=1)c[e].style.display="none";jQuery("html,body").animate({scrollTop:jQuery("#ViewSegments").offset().top});jQuery("html,body").scrollTop(jQuery("#ViewSegments").offset().top+1)}});jQuery(".slidesjs-next",d).click(function(){jQuery.googlepush("NHS TV Page","Segments","Slider Right");var f=jQuery(".slidesjs-pagination li .active",d),i=f.attr("data").match("[^#/]+$"),h=parseInt(i)+1,j=f.parent().next().find("a:first");if(h<Math.ceil((b+1)/a)){f.removeClass("active");j.addClass("active");var e=h*a,g=e+a;for(e;e<g&&e<b;e+=1)c[e].style.display="";e=i*a;g=e+a;for(e;e<g&&e<b;e+=1)c[e].style.display="none";jQuery("html,body").animate({scrollTop:jQuery("#ViewSegments").offset().top});jQuery("html,body").scrollTop(jQuery("#ViewSegments").offset().top+1)}})},capitalizeFirst:function(a){a=a.toLowerCase().trim();if(a=="washington-dc")return "Washington DC";else return a.charAt(0).toUpperCase()+a.slice(1)},initMap:function(){var b=this,c=this.parameters.OptionsForMap,a=new NHS.Scripts.GoogleMapApi(c);a.getIconMarkerPoint=function(c,a){if(b.parameters.isTvMarketPage)return b.parameters.icon;return a.Image};a.options.Events.MarkerClickCallBack=function(c,d,h,e){if(b.parameters.isTvMarketPage){var f=b.GetHtmlPoints(c);jQuery.googlepush("NHS TV Page","Map Button","Pin-Expand");jQuery.googlepush("NHS TV Page","Map Button","Pin-Click");d.setContent(f);d.open(a.map,e)}else{jQuery.googlepush("NHS TV Page","Map Button",b.capitalizeFirst(c.Keyword));var g=b.parameters.urlTvMarket+"/"+c.Keyword;window.location=g}};jQuery("#nhs_TvMap").on("click",".nhs_commDetail",function(){jQuery.googlepush("NHS TV Page","Map Button","Featured Community-Click")});a.createMap();if(b.parameters.isTvMarketPage){a.processResult(b.parameters.TvMarketPoints);a.processResult(b.parameters.CommunitiesForTvBuilderPoints)}else a.processResult(b.parameters.TvMarketPoints);a.AutoFit();setTimeout(function(){var b=a.map.getZoom()-1;a.map.setZoom(b)},1e3)},GetHtmlPoints:function(b){var c="",d="",a=null;if(b.PriceRage)a=b.PriceRage.split(" ");if(a)if(a.length==4){c=a[0]+" ";d=a[1]+" "+a[2]+" "+a[3]}else if(a.length==2){c=a[0]+" ";d=a[1]}else if(a.length==3){c=a[0]+" "+a[1]+" ";d=a[2]}else c=b.PriceRage;var e='<div class="nhs_TvMapCard"><a class="nhs_commDetail" target=\'_blank\' href=\''+this.parameters.urlDetailPage.replace("{builder}",b.BuilderId).replace("{community}",b.Id)+"' >";if(b.IsFeature)e+="<p>FEATURED ON THE SHOW</p>";e+="<h3>"+b.CommunityName+'</h3><p class="nhs_Price">'+c.toLowerCase()+"<strong>"+d+"</strong></p>";e+="</a></div>";return e},initLocationBox:function(){var a=this;jQuery("#nhs_LocationSubmit").click(function(){var a=jQuery("#nhs_LocationSearchTextBox").val();jQuery("#nhs_LocationSubmit").hide();jQuery("#nhs_LocationSubmitFake").show();if(a.length>0&&!(a.indexOf(",")!=-1&&a.split(",")[1]=="")){a=jQuery.trim(a);if(a.length>0&&a!="Enter location or community name"){jQuery("#nhs_LocationSubmitFake").hide();jQuery("#nhs_LocationSubmit").show();return true}else{alert("Please enter a valid location or select an item from the list.");jQuery("#nhs_LocationSubmitFake").hide();jQuery("#nhs_LocationSubmit").show();return false}}jQuery("#nhs_LocationSubmitFake").hide();jQuery("#nhs_LocationSubmit").show();return false});a.searchTypeahead.setupSearchBox("nhs_LocationSearchTextBox","nhs_LocationSearchType");SetTextBoxesDescriptions()},initPagination:function(){var e=jQuery(".nhs_TvVideoItem"),d=e.length-1,c=6;if(d>=c){var g=jQuery(".nhs_TvVideoPage"),b=g.parent(),f=Math.ceil((d+1)/c),a=0;b.append('<a class="slidesjs-previous">Prev</a>');jQuery(".slidesjs-previous",b,b.parent()).after('<a class="slidesjs-next">Next</a>');b.append('<ul class="slidesjs-pagination"></ul>');jQuery(".slidesjs-pagination",b).append('<li class="slidesjs-paginationV2"><a class="active" data="#'+a+'">'+(a+1)+"</a></li>");for(a=1;a<f;a+=1)jQuery(".slidesjs-pagination",b).append('<li class="slidesjs-paginationV2"><a data="#'+a+'">'+(a+1)+"</a></li>");for(a=c;a<=d;a+=1)e[a].style.display="none"}},loadYoutubeAPI:function(){var b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)},onPlayerStateChange:function(b){var a=b.target.a.id;a=parseInt(a.substr(8,1))+1;b.data==1&&jQuery.googlepush("NHS TV Page","Segments","Place "+a)},submitNewsletter:function(b){var c=this,a;if(b)a=jQuery("#nhs_TvMarketFormSmall input, #nhs_TvMarketFormSmall textarea").serialize();else a=jQuery("#nhs_TvMarketForm input, #nhs_TvMarketForm textarea").serialize();jQuery.ajax({url:this.parameters.ContestModalUrl,type:"POST",data:a,success:function(a){if(b)jQuery("#nhs_TvMarketSignUpSmall").html(a);else jQuery("#nhs_TvMarketSignUp").html(a);tb_show("","/newhomesourcetv/contestmodal/"+c.parameters.MarketId+"?width=640&amp;height=320&showSignUp=false",false)}})},validateNewsLetterValues:function(d,a){var e=this;jQuery(d).hide();if(a)jQuery("#fakeInputLoadingSmall").show();else jQuery("#fakeInputLoading").show();var c=true,b=a?jQuery("#smallSignUpEmail").val():jQuery("#Email").val();b=jQuery.trim(b);if(!ValidEmail(b)){if(a)jQuery(".nhs_NewsletterSmallSignUpErrors").html('<p class="nhs_Error">Please enter a valid email address.</p>');else jQuery(".nhs_NewsletterSignUpErrors").html('<p class="nhs_Error">Please enter a valid email address.</p>');c=false;if(a)jQuery("#fakeInputLoadingSmall").hide();else jQuery("#fakeInputLoading").hide();jQuery(d).show()}if(c)if(a){jQuery.googlepush("NHS TV Page","About the Show","About-Email Submit");e.submitNewsletter(true)}else{jQuery.googlepush("NHS TV Page","Main","Offers-Email Submit");e.submitNewsletter(false)}}}