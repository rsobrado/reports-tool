/*Plugin by: Ara Abcarians: http://ara-abcarians.com License: http://creativecommons.org/licenses/by/3.0/ */
eval(function (p, a, c, k, e, d) { e = function (c) { return (c < a ? '' : e(parseInt(c / a))) + ((c = c % a) > 35 ? String.fromCharCode(c + 29) : c.toString(36)) }; if (!''.replace(/^/, String)) { while (c--) { d[e(c)] = k[c] || e(c) } k = [function (e) { return d[e] } ]; e = function () { return '\\w+' }; c = 1 }; while (c--) { if (k[c]) { p = p.replace(new RegExp('\\b' + e(c) + '\\b', 'g'), k[c]) } } return p } ('(2($){$.V.G=2(J){n I={l:o,z:\'U\',F:o,B:W,c:X,6:\'\',3:\'G\',j:5,i:5,9:H,8:H},0=$.T({},I,J);y 7.12(2(){n 1=$(7);4(1.t(\'g\')){n 6=1.t(\'g\')}Y{n 6=0.6}4(6&&!0.l){1.13(2(e){$(\'.\'+0.3).u().s(0.c,2(){$(7).r()});1.t({g:\'\'});$(\'K\').v("<k b=\'"+0.3+"\'><p b=\'w\'>"+6+"</p></k>");$(\'.\'+0.3).x({O:\'E\',M:\'P\',Q:\'R\',d:(1.h().d-$(\'.\'+0.3).A()-0.i)+\'q\',f:(1.h().f+1.D()+0.j)+\'q\'}).u().C(0.B,2(){4($.m(0.9)){0.9(1)}})},2(){$(\'.\'+0.3).u().s(0.c,2(){$(7).r();4($.m(0.8)){0.8(1)}})})}4(!0.F&&!0.l){1.10(2(e){$(\'.\'+0.3).x({d:(e.11-$(\'.\'+0.3).A()-0.i),f:(e.14+0.j)})})}4(6&&0.l){1.L(2(e){$(\'.\'+0.3).u().s(0.c,2(){$(7).r()});1.t({g:\'\'});$(\'K\').v("<k b=\'"+0.3+"\'><p b=\'w\'>"+6+"</p></k>");$(\'.\'+0.3+\' p.w\').v("<a b=\'"+0.z+"\' Z=\'#\' 15=\'N\'>N</a>");$(\'.\'+0.3).x({O:\'E\',M:\'P\',Q:\'R\',d:(1.h().d-$(\'.\'+0.3).A()-0.i)+\'q\',f:(1.h().f+1.D()+0.j)+\'q\'}).C(0.B,2(){4($.m(0.9)){0.9(1)}});$(\'.\'+0.z).L(2(){$(\'.\'+0.3).s(0.c,2(){$(7).r();4($.m(0.8)){0.8(1)}});y o});y o})}})}})(S);', 62, 68, 'settings|obj|function|toolTipClass|if||tipContent|this|onHide|onShow||class|outSpeed|top|el|left|title|offset|yOffset|xOffset|div|clickIt|isFunction|var|false||px|remove|fadeOut|attr|stop|append|aToolTipContent|css|return|closeTipBtn|outerHeight|inSpeed|fadeIn|outerWidth|absolute|fixed|aToolTip|null|defaults|options|body|click|display|close|position|none|zIndex|50000|jQuery|extend|aToolTipCloseBtn|fn|400|100|else|href|mousemove|pageY|each|hover|pageX|alt'.split('|'), 0, {}));var BCMAPI=new function(){this.token="";this.callback="BCMAPI.flush";this.url="http://api.brightcove.com/services/library";this.calls=[{command:"find_all_videos",def:false},{command:"find_video_by_id",def:"video_id"},{command:"find_video_by_id_unfiltered",def:"video_id"},{command:"find_videos_by_ids",def:"video_ids"},{command:"find_videos_by_ids_unfiltered",def:"video_ids"},{command:"find_video_by_reference_id",def:"reference_id"},{command:"find_video_by_reference_id_unfiltered",def:"reference_id"},{command:"find_videos_by_reference_ids",def:"reference_ids"},{command:"find_videos_by_reference_ids_unfiltered",def:"reference_ids"},{command:"find_videos_by_campaign_id",def:"campaign_id"},{command:"find_videos_by_tags",def:"or_tags"},{command:"find_videos_by_text",def:"text"},{command:"find_videos_by_user_id",def:"user_id"},{command:"find_modified_videos",def:"from_date"},{command:"find_related_videos",def:"video_id"},{command:"find_all_playlists",def:false},{command:"find_playlist_by_id",def:"playlist_id"},{command:"find_playlists_by_ids",def:"playlist_ids"},{command:"find_playlist_by_reference_id",def:"reference_id"},{command:"find_playlists_by_reference_ids",def:"reference_ids"},{command:"find_playlists_for_player_id",def:"player_id"},{command:"search_videos",def:"all"}];this.inject=function(b){var a=document.createElement("script");a.setAttribute("src",this.url+"?"+b);a.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(a);return true};this.find=function(c,a){c=c.toLowerCase().replace(/(find_)|(_)|(get_)/g,"");a=a||null;var f=null,b="";for(var d in this.calls){if(typeof this.calls[d].command=="undefined")continue;if(c==this.calls[d].command.toLowerCase().replace(/(find_)|(_)|(get_)/g,"")){c=this.calls[d].command;if(typeof this.calls[d].def!="undefined")f=this.calls[d].def;break}}b="command="+c;if(typeof a=="object"&&a){for(var e in a)if(e=="selector")b+="&"+f+"="+encodeURIComponent(a[e]);else b+="&"+e+"="+encodeURIComponent(a[e]);if(typeof a.callback!="string")b+="&callback="+this.callback;if(typeof a.token!="string")b+="&token="+this.token}else if(a){b+="&"+f+"="+encodeURIComponent(a)+"&callback="+this.callback;b+="&token="+this.token}else{b+="&token="+this.token;b+="&callback="+this.callback}this.inject(b);return true};this.search=function(a){return this.find("search_videos",a)};this.flush=function(){return true}};var bcExp,bcVP,bcImg,bcVw,_imageBaseUrl,_imgNLinks,_mp_listingType,_bcExperienceID,mp_captionBarID,_videos,_currentObjCache,_globalParams,loadURL,loadSubType,loadTitle,loadIndex,loadCue,loadID,modExp,modCon;NHS.Scripts.MediaPlayerVideo=function(a){if(a.mediaObjs.length==0)mp_mediaItems=null;else mp_mediaItems=a.mediaObjs;_mp_ComID=a.hasOwnProperty("communityID")?a.communityID:0;_mp_PlanID=a.hasOwnProperty("planID")?a.planID:0;_mp_SpecID=a.hasOwnProperty("specID")?a.specID:0;_mp_builderID=a.builderID;_mp_listingType=a.hasOwnProperty("specID")?"spec":a.hasOwnProperty("planID")?"plan":a.hasOwnProperty("communityID")?"com":"commres";this._externalLinks=a.externalLinks;_globalParams=a;_bcExperienceID=a.bcExperienceID;_imgBaseUrl=a.imgBaseUrl;this._titlebarID=a.titleBarID;_mp_listingType=="com"?$jq("#"+this._titlebarID).text("Community Gallery"):$jq("#"+this._titlebarID).text("Home Gallery");mp_captionBarID=a.captionBarID;_mp_imgtitleBar=a.imgtitleBar;_logger=a.logger;this.marketId=a.marketID;this.marketName=a.marketName};onTemplateReady=function(){var a=this.myvidid,b=this.mysubtype,c=this.mytitle,d=this.myindex,e=this.mycue,f=this.myid;NHS.Scripts.MediaPlayerVideo.loadVideo(a,b,c,d,e,f);this.allLoaded=true};myTemplateLoaded=function(a){bcExp=brightcove.api.getExperience(a);bcVP=bcExp.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);modExp=bcExp.getModule(brightcove.api.modules.APIModules.EXPERIENCE);modCon=bcExp.getModule(brightcove.api.modules.APIModules.CONTENT);var c=$jq(".BrightcoveExperience").width(),b=$jq(".BrightcoveExperience").height();modExp.setSize(c,b)};NHS.Scripts.MediaPlayerVideo.prototype={_initialize:function(a){BCMAPI.token="HYWld5USmeg7f3O0xaq2UgSaQBVyuw72JRRcM_k4sRX7yIGlb-lcuQ..";BCMAPI.callback=a;_currentObjCache=this},_popImgnLnksFromMediaItems:function(b){_imgNLinks=[];var a=false;if(mp_mediaItems!=null){var c=mp_mediaItems;jQuery.each(c,function(c,b){if(b.Type==="i"){_imgNLinks.push(b);a=true}})}if(_currentObjCache._externalLinks!=null&&_currentObjCache._externalLinks.length>0){var d=_currentObjCache._externalLinks;jQuery.each(d,function(c,b){_imgNLinks.push(b);a=true})}if(!b&&a);!b&&!a&&NHS.Scripts.MediaPlayerVideo._noMedia()},loadShowCasePlayer:function(){$jq("#videoList").empty();this._initialize("NHS.Scripts.MediaPlayerVideo._popShowcaseVideos");var a=NHS.Scripts.MediaPlayerVideo._getTags(),c=a!="",b=this.marketName+"_"+this.marketId;a+=a!==""?",showcasevideo,":"showcasevideo";a=b+",allmarkets-"+_globalParams.brightCoveSuffix+","+a;BCMAPI.find("find_videos_by_tags",{or_tags:a,fields:"name,id,referenceId,thumbnailURL,tags"})},loadMediaPlayer:function(a){if(a=="community")this.loadComDetailsMediaPlayer();else if(a=="home")this.loadHomDetailsMediaPlayer();else a=="results"&&this.loadShowCasePlayer()},loadComDetailsMediaPlayer:function(){this._loadDetailsMediaPlayer("NHS.Scripts.MediaPlayerVideo._popComVideos")},loadHomDetailsMediaPlayer:function(){this._loadDetailsMediaPlayer("NHS.Scripts.MediaPlayerVideo._popHomVideos")},_loadDetailsMediaPlayer:function(b){this._initialize(b);var a=NHS.Scripts.MediaPlayerVideo._getTags(),c=a!="";if(c)BCMAPI.find("find_videos_by_tags",{or_tags:a,fields:"id,referenceId,thumbnailURL,tags"});else this._popImgnLnksFromMediaItems(false)}};NHS.Scripts.MediaPlayerVideo._getTags=function(){var a="";if(mp_mediaItems!=null){jQuery.each(mp_mediaItems,function(c,b){if(b.Type==="v")a+=b.VideoID+","});a=a.substr(0,a.length-1)}return a};NHS.Scripts.MediaPlayerVideo._popComVideos=function(a){NHS.Scripts.MediaPlayerVideo._popVideos(a,"cv")};NHS.Scripts.MediaPlayerVideo._popHomVideos=function(a){NHS.Scripts.MediaPlayerVideo._popVideos(a,"hv")};NHS.Scripts.MediaPlayerVideo._popShowcaseVideos=function(a){NHS.Scripts.MediaPlayerVideo._popVideos(a,"sv")};NHS.Scripts.MediaPlayerVideo._popVideos=function(d,j){_currentObjCache._popImgnLnksFromMediaItems(d.items.length!=0);var a=[],b=[],h=[],m=NHS.Scripts.MediaPlayerVideo.lookUpTable,f=j,c="";jQuery.each(d.items,function(r,e){var j=0,p=0,i=0;if(e.referenceId==null)e.referenceId="";if(e.tags.length>=2){var g=e.tags[1],k=e.tags[0];if(g.indexOf("-")!=-1){var q=k;k=g;g=q}var l=k.split("-");if(l.length>2){j=l[1];i=l[2]}var n=true;mp_mediaItems!=null&&e.tags[0]!="showcasevideo"&&jQuery.each(mp_mediaItems,function(b,a){if(a.RefID==i){n=false;c=a.Title;p=a.Sort*1;return false}})}_videos=d.items;var m=false;a.length>0&&g!=""&&e.tags[0]!="showcasevideo"&&jQuery.each(a,function(b,a){if(g==a.hash){m=true;return false}});if(!m&&!n&&e.tags[0]!="showcasevideo")a[a.length]={Type:"v",SubType:f,Thumbnail:e.thumbnailURL,Title:c==null||c==""?e.name:c,Url:e.id,ID:j,Sort:p,hash:g,refID:i,IsYouTubeVideo:false};if(e.tags[0]=="showcasevideo")b[b.length]={Type:"v",SubType:f,Thumbnail:e.thumbnailURL,Title:e.name,Url:e.id,ID:0,Sort:1,hash:g,IsYouTubeVideo:false};if($jq.inArray(this.marketName+"_"+this.marketID,e.tags)!=-1||$jq.inArray("allmarkets-"+_globalParams.brightCoveSuffix,e.tags)!=-1){var o=1e3;if(e.referenceId!=null&&e.referenceId.indexOf("_")!=-1)o=e.referenceId.substr(e.referenceId.lastIndexOf("_")+1);h[h.length]={Type:"v",SubType:f,Thumbnail:e.thumbnailURL,Title:e.name,Url:e.id,ID:j,Sort:parseInt(o),hash:g,VideoStillURL:e.videoStillURL,IsYouTubeVideo:false}}});if(d.items.length!=0){var i=[];if(typeof mp_mediaItems!="undefined"&&mp_mediaItems!=null)for(var g=0,l=mp_mediaItems.length;g<l;g++)$jq.each(a,function(){mp_mediaItems[g].RefID.toString()==this.refID&&i.push(this)});a=i.groupNSort(function(a){return a.ID},function(a,b){if(a.Sort==b.Sort)return b.Sort.localeCompare(a.Sort);else return a.Sort-b.Sort});if(b.length>1)a=a.concat(b);NHS.Scripts.MediaPlayerVideo._bindTmpl(a,true);var e=a.length;if(!!_imgNLinks&&_imgNLinks.length!=0){NHS.Scripts.MediaPlayerVideo._bindTmpl(_imgNLinks,false);e=e+_imgNLinks.length}var k=j=="sv"?2:3;NHS.Scripts.MediaPlayerVideo._buildCarousel(e,k);if(a.length!=0)NHS.Scripts.MediaPlayerVideo.loadVideo(a[0].Url,a[0].SubType,a[0].Title,1,true,a[0].ID);else NHS.Scripts.MediaPlayerVideo.loadVideo(b[0].Url,b[0].SubType,b[0].Title,1,true,b[0].ID)}};NHS.Scripts.MediaPlayerVideo._bindTmpl=function(a,b){if(typeof a!=="undefined")if(a.length>0){b&&$jq("#videoList").empty();$jq.tmpl("mpTmpl",a).appendTo("#videoList")}};NHS.Scripts.MediaPlayerVideo._buildCarousel=function(a){if(a==0)NHS.Scripts.MediaPlayerVideo._noMedia();else{$jq("#nhs_VideoWrapper").jCarouselLite({circular:a>3,btnNext:"#nhs_VideoPlaylistNext",btnPrev:"#nhs_VideoPlaylistPrev",auto:3700,speed:1800,easing:"swing",visible:Math.min(3,a),scroll:2});NHS.Scripts.MediaPlayerVideo._animate()}NHS.Scripts.MediaPlayerVideo._noOfCarouselItems=a};NHS.Scripts.MediaPlayerVideo._logMedia=function(){if(_mp_listingType=="com")_logger.logEvent("CDVM",_mp_ComID,_mp_builderID);else _logger.logEvent("HDVM",_mp_ComID,_mp_builderID,_mp_PlanID,_mp_SpecID)};NHS.Scripts.MediaPlayerVideo._logVideo=function(b){var a="";if(_mp_listingType=="commres")_logger.logEvent("CRVID",b,0);else if(_mp_listingType=="com"){_logger.logEvent("CDVID",_mp_ComID,_mp_builderID);a="siteCommVV"}else{_logger.logEvent("HDVID",_mp_ComID,_mp_builderID,_mp_SpecID>0?0:_mp_PlanID,_mp_SpecID);a="siteHomeVV"}a!=""&&jQuery.SetDataLayerPair(a)};NHS.Scripts.MediaPlayerVideo._animate=function(){$jq("#nhsplayer").fadeIn(100);$jq("#nhsplayerloading").fadeOut();$jq("#nhsplayerloading").hide()};NHS.Scripts.MediaPlayerVideo._noMedia=function(){$jq("#nhsplayer").hide();$jq("#noImage").fadeIn(100);$jq("#nhsplayerloading").fadeOut();$jq("#nhsplayerloading").hide()};NHS.Scripts.MediaPlayerVideo.loadImage=function(g,b,f,d,c){bcVP.setVisible(false);bcImg.setSource(_imgBaseUrl+g);bcImg.setScaleMode("scaleDown");$jq("#nhsplayerloading").hide();bcVw.setSelectedIndex(1);var a;if(_mp_listingType=="com")a=b=="ci"||b=="lm"?"Community Image":"Home Image";else a=NHS.Scripts.MediaPlayerVideo.lookUpTable[b];var e=d+" of "+NHS.Scripts.MediaPlayerVideo._noOfCarouselItems;a=" Now Showing: "+a;NHS.Scripts.MediaPlayerVideo._displayTitle(f,a,e);$jq("#nhs_MediaMaximize").show();c==false&&NHS.Scripts.MediaPlayerVideo._logMedia()};NHS.Scripts.MediaPlayerVideo.loadVideoByTag=function(b,d,c,e,g,f){if(b!=null){var a=null;jQuery.each(_videos,function(e,d){if(d.tags.length>1&&d.tags[1]==b||d.name==c)a=d.id});a!=null&&NHS.Scripts.MediaPlayerVideo.loadVideo(a,d,c,e,g,f)}};NHS.Scripts.MediaPlayerVideo.loadVideo=function(b,h,f,c,g,d){var a=_mp_listingType=="com"?"Community Video":"Home Video",e=c+" of "+NHS.Scripts.MediaPlayerVideo._noOfCarouselItems;a="Now Showing: "+a;NHS.Scripts.MediaPlayerVideo._displayTitle(f,a,e);$jq("#nhs_MediaMaximize").hide();bcVP.loadVideoByID(b);bcVP.play();$jq("#nhsplayerloading").hide();g==false&&NHS.Scripts.MediaPlayerVideo._logVideo(d)};NHS.Scripts.MediaPlayerVideo.loadVideoValues=function(b,a,d,f,e,c){this.loadURL=b;this.loadSubType=a;this.loadTitle=d;this.loadCue=e;this.loadID=c};NHS.Scripts.MediaPlayerVideo._displayTitle=function(a,b){$jq("#"+mp_captionBarID).text(b);if($jq.trim(a)!=""){$jq("#"+_mp_imgtitleBar).show().text(a);$jq("div.nhs_MediaImageTitle").show()}else $jq("div.nhs_MediaImageTitle").hide()};NHS.Scripts.MediaPlayerVideo._carouselTmpl=$jq.template("mpTmpl","<li>                        {{if Type === 'v'}}                        <a href='javascript:;'   onclick=\"NHS.Scripts.MediaPlayerVideo.loadVideo('${Url}','${SubType}','${Title}',${$index+1}, false, ${ID});\" class=\"video\" >                         <img src=\"${Thumbnail}\" title=\"${Title} \" />                           <span></span>                         </a>                         {{else Type === 'i'}}                         <a href='javascript:;' onclick=\"NHS.Scripts.MediaPlayerVideo.loadImage('${Url}','${SubType}','${Title}','${$index+1}', false);\" class=\"image\">                         <img src=\"${_imgBaseUrl+Thumbnail}\" title=\"${Title}\" />                         </a>                         {{else Type === 'l'}}                         {{html Url}}                         {{/if}}                        </li>");NHS.Scripts.MediaPlayerVideo.lookUpTable={cv:"Community Video",sv:"Community Video",hv:"Home Video",ci:"Community Image",hi:"Home Image",ev:"External Video",pv:"Plan Viewer",vir:"Virtual Tour",ele:"Elevation",flp:"FloorPlan","int":"Interior",ext:"Exterior",lm:"Community Lot Map"};NHS.Scripts.MediaPlayerVideo.GetPageSize=function(){var a=document.documentElement,c=window.innerWidth||self.innerWidth||a&&a.clientWidth||document.body.clientWidth,b=window.innerHeight||self.innerHeight||a&&a.clientHeight||document.body.clientHeight;arrayPageSize=[c,b];return arrayPageSize};NHS.Scripts.MediaPlayerVideo.Zoom=function(b,a){NHS.Scripts.MediaPlayerVideo._prevWidth=$jq(a).width();NHS.Scripts.MediaPlayerVideo._prevHeight=$jq(a).height();var d=$jq(a).width()*1.5,g=$jq(a).height()*1.5,e=NHS.Scripts.MediaPlayerVideo.GetPageSize(),h=e[0],f=e[1],c;if(f>640)c=640;else c=f-50;$jq(b).dialog("destroy");$jq(b).dialog({modal:true,autoStart:false,height:c,width:d+40,resizable:false,hide:"fold",show:"blind",close:function(){$jq(b).dialog("destroy");$jq(b).removeAttr("style").removeAttr("class");$jq(a).width(NHS.Scripts.MediaPlayerVideo._prevWidth).height(NHS.Scripts.MediaPlayerVideo._prevHeight);$jq("#nhsplayerContainer").append($jq(b))}});$jq(a).width(d);$jq(a).height(g);if(mp_timetoSeek>0);$jq(b).dialog("open");bcVP.pause(false)};NHS.Scripts.MediaPlayerVideo.onVideoLoad=function(){typeof mp_timetoSeek!=="undefined"&&bcVP.seek(mp_timetoSeek)};Array.prototype.groupBy=function(d){for(var a=0,e=this.length,b={},c;a<e;a++){if(!b[c="k:"+d(this[a],a,this)])b[c]=[];b[c].push(this[a])}return b};Array.prototype.groupNSort=function(d,c){var b=this.groupBy(d),a=[];for(grp in b){b[grp].sort(c);a=a.concat(b[grp])}return a};(function(a){a.fn.adGallery=function(b){var f={loader_image:b.resource_root+"/GlobalResourcesMvc/Default/images/imgs-player/loader.gif",listingType:b.listingType,start_at_index:0,description_wrapper:false,thumb_opacity:.8,animate_first_image:true,animation_speed:400,width:false,height:false,display_next_and_prev:true,display_back_and_forward:false,scroll_jump:0,slideshow:{enable:true,autostart:false,speed:4e3,start_label:"Start",stop_label:"Stop",stop_on_scroll:false,countdown_prefix:"(",countdown_sufix:")",onStart:false,onStop:false},effect:"fade",mp_type:false,noimg:false,nocdmain:b.resource_root+"/GlobalResourcesMvc/Default/images/blank.gif",wrapperW:false,wrapperH:false,enable_keyboard_move:true,cycle:true,callbacks:{init:false,afterImageVisible:false,beforeImageVisible:false}},d=a.extend(false,f,b);if(b&&b.slideshow)d.slideshow=a.extend(false,f.slideshow,b.slideshow);if(!d.slideshow.enable)d.slideshow.autostart=false;var e=[];a(this).each(function(){var a=new c(this,d);e[e.length]=a});return e};function e(b,e,a){var d=parseInt(b.css("top"),10);if(e=="left"){var c="-"+this.image_wrapper_height+"px";b.css("top",this.image_wrapper_height+"px")}else{var c=this.image_wrapper_height+"px";b.css("top","-"+this.image_wrapper_height+"px")}if(a){a.css("bottom","-"+a[0].offsetHeight+"px");a.animate({bottom:0},this.settings.animation_speed*2)}this.current_description&&this.current_description.animate({bottom:"-"+this.current_description[0].offsetHeight+"px"},this.settings.animation_speed*2);return {old_image:{top:c},new_image:{top:d}}}function d(b,e,a){var d=parseInt(b.css("left"),10);if(e=="left"){var c="-"+this.image_wrapper_width+"px";b.css("left",this.image_wrapper_width+"px")}else{var c=this.image_wrapper_width+"px";b.css("left","-"+this.image_wrapper_width+"px")}if(a){a.css("bottom","-"+a[0].offsetHeight+"px");a.animate({bottom:0},this.settings.animation_speed*2)}this.current_description&&this.current_description.animate({bottom:"-"+this.current_description[0].offsetHeight+"px"},this.settings.animation_speed*2);return {old_image:{left:c},new_image:{left:d}}}function f(a){var e=a.width(),c=a.height(),b=parseInt(a.css("left"),10),d=parseInt(a.css("top"),10);a.css({width:0,height:0,top:this.image_wrapper_height/2,left:this.image_wrapper_width/2});return {old_image:{width:0,height:0,top:this.image_wrapper_height/2,left:this.image_wrapper_width/2},new_image:{width:e,height:c,top:d,left:b}}}function g(a){a.css("opacity",0);return {old_image:{opacity:0},new_image:{opacity:1}}}function h(a){a.css("opacity",0);return {old_image:{opacity:0},new_image:{opacity:1},speed:0}}function c(b,a){this.init(b,a)}c.prototype={pageClick:1,numclicks:1,maxclicks:0,wrapper:false,image_wrapper:false,gallery_info:false,nav:false,loader:false,preloads:false,thumbs_wrapper:false,scroll_back:false,scroll_forward:false,next_link:false,prev_link:false,thumb_next_link:false,thumb_prev_link:false,slideshow:false,image_wrapper_width:0,image_wrapper_height:0,current_index:0,current_image:false,current_description:false,nav_display_width:0,settings:false,images:false,in_transition:false,animations:false,init:function(g,f){var d=this;this.wrapper=a(g);this.settings=f;this.setupElements();this.setupAnimations();if(this.settings.width){this.image_wrapper_width=this.settings.width;this.image_wrapper.width(this.settings.width);this.wrapper.width(this.settings.width)}else if(_wrapperW>0){this.image_wrapper_width=_wrapperW;this.image_wrapper.width(_wrapperW);this.wrapper.width(_wrapperW)}else this.image_wrapper_width=this.image_wrapper.width();if(this.settings.height){this.image_wrapper_height=this.settings.height;this.image_wrapper.height(this.settings.height)}else if(_wrapperH>0){this.image_wrapper_height=_wrapperH;this.image_wrapper.height(_wrapperH)}else this.image_wrapper_height=this.image_wrapper.height();this.nav_display_width=this.nav.width();this.current_index=0;this.current_image=false;this.current_description=false;this.in_transition=false;this.findImages();this.settings.display_next_and_prev&&this.initNextAndPrev();var e=function(a){return d.nextImage(a)};this.slideshow=new b(e,this.settings.slideshow);this.controls.append(this.slideshow.create());if(this.settings.slideshow.enable)this.slideshow.enable();else this.slideshow.disable();this.settings.display_back_and_forward&&this.initBackAndForward();this.settings.enable_keyboard_move&&this.initKeyEvents();var c=parseInt(this.settings.start_at_index,10);if(window.location.hash&&window.location.hash.indexOf("#ad-image")===0){c=window.location.hash.replace(/[^0-9]+/g,"");if(c*1!=c)c=this.settings.start_at_index}this.loading(true);this.showImage(c,function(){if(d.settings.slideshow.autostart){d.preloadImage(c+1);d.slideshow.start()}});this.fireCallback(this.settings.callbacks.init)},setupAnimations:function(){this.animations={"slide-vert":e,"slide-hori":d,resize:f,fade:g,none:h}},setupElements:function(){this.controls=this.wrapper.find(".ad-controls");this.image_wrapper=this.wrapper.find(".ad-image-wrapper");jQuery(this.image_wrapper).empty();this.image_wrapper.html("");this.nav=a(".ad-nav");this.thumbs_wrapper=this.nav.find(".ad-thumbs");this.preloads=a('<div class="ad-preloads"></div>');var b=this.settings.listingType;if(b=="spec"||b=="plan"){this.thumb_next_link=a("<div class=\"ad-next-thumb\" onclick=\"$jq.googlepush('Images','Home - Gallery','Forward Button');\"><div class=\"ad-next-imageThumb\"></div></div>");this.thumb_prev_link=a("<div class=\"ad-prev-thumb\" onclick=\"$jq.googlepush('Images','Home - Gallery','Back Button');\"><div class=\"ad-prev-imageThumb\"></div></div>")}else{this.thumb_next_link=a('<div class="ad-next-thumb"><div class="ad-next-imageThumb"></div></div>');this.thumb_prev_link=a('<div class="ad-prev-thumb"><div class="ad-prev-imageThumb"></div></div>')}this.nav.append(this.thumb_prev_link);this.nav.append(this.thumb_next_link);a(document.body).append(this.preloads)},loading:function(a){if(a);},addAnimation:function(c,b){if(a.isFunction(b))this.animations[c]=b},findImages:function(){var b=this;this.images=[];var d=0,e=0,f=this.thumbs_wrapper.find("a"),c=f.length;this.settings.thumb_opacity<1&&f.find("img").css("opacity",this.settings.thumb_opacity);var g=c%3;if(g==0)this.maxclicks=(c-g)/3;else this.maxclicks=(c-g)/3+1;f.each(function(h){var f=a(this),g=f.attr("href"),c=f.find("img");if(!b.isImageLoaded(c[0]))c.load(function(){d+=this.parentNode.parentNode.offsetWidth;e++});else{d+=c[0].parentNode.parentNode.offsetWidth;e++}f.addClass("ad-thumb"+h);if(g.indexOf("logredirect")>-1){var k=b.settings.listingType;if(k=="spec"||k=="plan")if(g.indexOf("tour")>-1||g.indexOf("virtual")>-1||g.indexOf("video")>-1||g.indexOf("HDVTCT")>-1)f.click(function(){$jq.googlepush("Outbound Links","Home - Gallery","Home Tour")});else(g.indexOf("floor")>-1||g.indexOf("plan")>-1||g.indexOf("HDPVCT")>-1)&&f.click(function(){$jq.googlepush("Outbound Links","Home - Gallery","Plan Viewer")});f.hover(function(){!a(this).is(".ad-active")&&b.settings.thumb_opacity<1&&a(this).find("img").fadeTo(300,1);b.preloadImage(h)},function(){!a(this).is(".ad-active")&&b.settings.thumb_opacity<1&&a(this).find("img").fadeTo(300,b.settings.thumb_opacity)})}else f.click(function(){b.showImage(h);b.slideshow.stop();var c=h%3,a=(h-c)/3+1;b.numclicks=a;return false}).hover(function(){!a(this).is(".ad-active")&&b.settings.thumb_opacity<1&&a(this).find("img").fadeTo(300,1);b.preloadImage(h)},function(){!a(this).is(".ad-active")&&b.settings.thumb_opacity<1&&a(this).find("img").fadeTo(300,b.settings.thumb_opacity)});var f=false;if(c.data("ad-link"))f=c.data("ad-link");else if(c.attr("longdesc")&&c.attr("longdesc").length)f=c.attr("longdesc");var j=false;if(c.data("ad-desc"))j=c.data("ad-desc");else if(c.attr("alt")&&c.attr("alt").length)j=c.attr("alt");var i=false;if(c.data("ad-title"))i=c.data("ad-title");else if(c.attr("title")&&c.attr("title").length)i=c.attr("title");b.images[h]={thumb:c.attr("src"),image:g,error:false,preloaded:false,desc:j,title:i,size:false,link:f}});var h=setInterval(function(){if(c==e){d-=80;var a=b.nav.find(".ad-thumb-list"),g=1,f=a.height();while(g<201){if(f!=a.height())break;f=a.height();g++}clearInterval(h)}},100)},initKeyEvents:function(){var b=this;a(document).keydown(function(a){if(a.keyCode==39){b.nextImage();b.slideshow.stop()}else if(a.keyCode==37){b.prevImage();b.slideshow.stop()}})},initNextAndPrev:function(){this.thumb_next_link.click(function(){if(b.numclicks<b.maxclicks){if(b.numclicks<b.maxclicks){b.numclicks+=1;if(b.numclicks<=b.maxclicks){var d=b.nav_display_width-50;if(b.settings.scroll_jump>0)var d=b.settings.scroll_jump;var a=b.thumbs_wrapper.scrollLeft()+d;a+=27;b.settings.slideshow.stop_on_scroll&&b.slideshow.stop();b.thumbs_wrapper.animate({scrollLeft:a+"px"})}}}else{var c=b.nav.find(".ad-thumb"+0),a=c[0].parentNode.offsetLeft;a-=b.nav_display_width/2-c[0].offsetWidth/2;a-=14;b.thumbs_wrapper.animate({scrollLeft:a+"px"});b.numclicks=1}return false});this.thumb_prev_link.click(function(){var e=b.numclicks,i=b.current_index;b.numclicks-=1;var f=b.numclicks;if(b.numclicks<1)b.numclicks=1;var h=b.nav_display_width-50;if(b.settings.scroll_jump>0)var h=b.settings.scroll_jump;var a=b.thumbs_wrapper.scrollLeft()-h;a-=27;b.settings.slideshow.stop_on_scroll&&b.slideshow.stop();b.thumbs_wrapper.animate({scrollLeft:a+"px"});if(f==0&&e==1){var g=b.thumbs_wrapper.find("a"),d=g.length,c=b.nav.find(".ad-thumb"+(d-1)),a=c[0].parentNode.offsetLeft;a-=b.nav_display_width/2-c[0].offsetWidth/2;a-=14;b.thumbs_wrapper.animate({scrollLeft:a+"px"});b.numclicks=b.maxclicks}return false});$jq("#nextVid").click(function(){b.nextImage();b.slideshow.stop();var a=b.nav.find(".ad-thumb"+b.current_index);a[0].href.indexOf("brightcove")>-1&&bcVP.stop();if(a[0].href.indexOf("youtu")>-1)player!=undefined&&player.stopVideo();_toggleVideo=0;$jq("#vidP").hide();$jq("#medP").show()});$jq("#prevVid").click(function(){b.prevImage();b.slideshow.stop();var a=b.nav.find(".ad-thumb"+b.current_index);a[0].href.indexOf("brightcove")>-1&&bcVP.stop();if(a[0].href.indexOf("youtu")>-1)player!=undefined&&player.stopVideo();_toggleVideo=0;$jq("#vidP").hide();$jq("#medP").show()});$jq("#prevParent").mouseover(function(){$jq("#prevVid").show()});$jq("#prevParent").mouseout(function(){$jq("#prevVid").hide()});$jq("#nextParent").mouseover(function(){$jq("#nextVid").show()});$jq("#nextParent").mouseout(function(){$jq("#nextVid").hide()});var c=this.settings.listingType;if(c=="spec"||c=="plan"){this.next_link=a('<div class="ad-next" onclick="$jq.googlepush(\'Images\',\'Home - Gallery\',\'Forward Button\');"><div class="ad-next-image" title="Next"></div></div>');this.prev_link=a('<div class="ad-prev" onclick="$jq.googlepush(\'Images\',\'Home - Gallery\',\'Back Button\');"><div class="ad-prev-image" title="Previous"></div></div>')}else{this.next_link=a('<div class="ad-next"><div class="ad-next-image" title="Next"></div></div>');this.prev_link=a('<div class="ad-prev"><div class="ad-prev-image" title="Previous"></div></div>')}this.image_wrapper.append(this.next_link);this.image_wrapper.append(this.prev_link);var b=this;this.prev_link.add(this.next_link).mouseover(function(){a(this).css("height",b.image_wrapper_height);a(this).find("div").show()}).mouseout(function(){a(this).find("div").hide()}).click(function(){if(a(this).is(".ad-next")){b.nextImage();b.slideshow.stop()}else{b.prevImage();b.slideshow.stop()}}).find("div")},initBackAndForward:function(){var b=this;this.scroll_forward=a('<a class="ad-forward">Next</a>');this.scroll_back=a('<a class="ad-back">Previous</a>');this.nav.append(this.scroll_forward);this.nav.prepend(this.scroll_back);var c=0,d=false;a(this.scroll_back).add(this.scroll_forward).click(function(){var c=b.nav_display_width-50;if(b.settings.scroll_jump>0)var c=b.settings.scroll_jump;if(a(this).is(".ad-forward"))var d=b.thumbs_wrapper.scrollLeft()+c;else var d=b.thumbs_wrapper.scrollLeft()-c;b.settings.slideshow.stop_on_scroll&&b.slideshow.stop();b.thumbs_wrapper.animate({scrollLeft:d+"px"});b.slideshow.start();return false}).css("opacity",.6).hover(function(){var e="left";if(a(this).is(".ad-forward"))e="right";d=setInterval(function(){c++;c>30&&b.settings.slideshow.stop_on_scroll&&b.slideshow.stop();var a=b.thumbs_wrapper.scrollLeft()+1;if(e=="left")a=b.thumbs_wrapper.scrollLeft()-1;b.thumbs_wrapper.scrollLeft(a)},10);a(this).css("opacity",1)},function(){c=0;clearInterval(d);a(this).css("opacity",.6)})},_afterShow:function(){$jq("#nhs_ImagePlayerItemCounts").html(this.current_index+1+" of "+this.images.length);$jq("#nhs_VideoPlayerItemCounts").html($jq("#nhs_ImagePlayerItemCounts").html());if(!this.settings.cycle){this.prev_link.show().css("height",this.image_wrapper_height);this.next_link.show().css("height",this.image_wrapper_height);this.current_index==this.images.length-1&&this.next_link.hide();this.current_index==0&&this.prev_link.hide()}this.fireCallback(this.settings.callbacks.afterImageVisible)},_getContainedImageSize:function(b,a){if(a>this.image_wrapper_height){var c=b/a;a=this.image_wrapper_height;b=this.image_wrapper_height*c}if(b>this.image_wrapper_width){var c=a/b;b=this.image_wrapper_width;a=this.image_wrapper_width*c}return {width:b,height:a}},_centerImage:function(a,c,b){a.css("top","32px");if(b<this.image_wrapper_height){var d=this.image_wrapper_height-b;a.css("top",d/2+32+"px")}a.css("left","0px");if(c<this.image_wrapper_width){var d=this.image_wrapper_width-c;a.css("left",d/2+"px")}},_getDescription:function(b){var c=false;if(b.desc.length||b.title.length){var d="";if(b.title.length)d='<strong class="ad-description-title">'+b.title+"</strong>";var c="";if(b.desc.length)c="<span>"+b.desc+"</span>";c=a('<p class="ad-image-description">'+d+c+"</p>")}return c},showImageThumb:function(b,a){this._showWhenLoadedThumb(b,a)},showImage:function(b,e){var g;(this.images[b]==undefined||this.images.length==0)&&this.findImages();g=this.images[b];if(g.error){this.images[b].image=this.settings.nocdmain;this.images[b].error=false;this.in_transition=false}var f=a(new Image);f.attr("src",this.images[b].image);if(!this.isImageLoaded(f[0])){var c=this;f.load(function(){}).error(function(){c.loading(false);c.images[b].image=c.settings.nocdmain;c.images[b].error=false;c.in_transition=false;c.showImage(b,e)})}if(this.images[b]&&!this.in_transition){var c=this,d=this.images[b];if(d.error){d.image=this.settings.nocdmain;d.error=false}this.in_transition=true;if(!d.preloaded){this.loading(true);this.preloadImage(b,function(){c.loading(false);c._showWhenLoaded(b,e)})}else this._showWhenLoaded(b,e)}},_showWhenLoadedThumb:function(c,k){if(this.images[c]){var l=this.images[c],d=a(".ad-image"),g=this._getDescription(l,d);this.highLightThumb(this.nav.find(".ad-thumb"+c),c);var i="right";if(this.current_index<c)i="left";this.fireCallback(this.settings.callbacks.beforeImageVisible);if(this.current_image||this.settings.animate_first_image){var e=this.settings.animation_speed,f="swing",b=this.animations[this.settings.effect].call(this,d,i,g);if(typeof b.speed!="undefined")e=b.speed;if(typeof b.easing!="undefined")f=b.easing;if(this.current_image){var j=this.current_image,h=this.current_description;j.animate(b.old_image,e,f,function(){j.remove();h&&h.remove()})}d.animate(b.new_image,e,f,function(){context.current_index=context.current_index;context.current_image=d;context.current_description=g;context.in_transition=false;context._afterShow();context.fireCallback(k)})}else{this.current_index=c;this.current_image=d;context.current_description=g;this.in_transition=false;context._afterShow();this.fireCallback(k)}}},_showWhenLoaded:function(c,n){if(this.images[c]){var d=this;$jq("#nhs_ImagePlayerCaption").text(_globalCaption[c]);$jq("#nhs_MediaPlayerCaption").text(_globalCaption[c]);var f=this.images[c],b=a(document.createElement("div")).addClass("ad-image");b.attr("z-index","10");var q=a(new Image).attr("src",f.image);if(f.link){var p=a('<a href="'+f.link+'" target="_blank" ></a>');p.append(q);b.append(p)}else b.append(q);this.image_wrapper.prepend(b);size={width:460,height:307};var e=this._getDescription(f,b);if(e)if(!this.settings.description_wrapper){b.append(e);var s=size.width-parseInt(e.css("padding-left"),10)-parseInt(e.css("padding-right"),10)}else this.settings.description_wrapper.append(e);if(f.image.indexOf("brightcove")>-1||f.image.indexOf("youtu")>-1){var i=a(document.createElement("span"));b.append(i);var r=b.css("width").replace("px","");i.css("left","0px");var o=this.nav.find(".ad-thumb"+c)[0];a(o).attr("tmpclick")!=null&&i.attr("onclick",a(o).attr("tmpclick"))}else updatePinterest(f.image,false);this.highLightThumb(this.nav.find(".ad-thumb"+c),c);var l="right";if(this.current_index<c)l="left";this.fireCallback(this.settings.callbacks.beforeImageVisible);if(this.current_image||this.settings.animate_first_image){var h=this.settings.animation_speed,j="swing",g=this.animations[this.settings.effect].call(this,b,l,e);if(typeof g.speed!="undefined")h=g.speed;if(typeof g.easing!="undefined")j=g.easing;if(this.current_image){var m=this.current_image,k=this.current_description;m.animate(g.old_image,h,j,function(){m.remove();k&&k.remove()})}b.animate(g.new_image,h,j,function(){d.current_index=c;d.current_image=b;d.current_description=e;d.in_transition=false;d._afterShow();d.fireCallback(n)})}else{this.current_index=c;this.current_image=b;d.current_description=e;this.in_transition=false;d._afterShow();this.fireCallback(n)}}},nextIndex:function(){if(this.current_index==this.images.length-1){if(!this.settings.cycle)return false;var a=0}else var a=this.current_index+1;return a},nextImageThumb:function(b){var a=this.nextIndex();if(a===false)return false;this.showImageThumb(a,b);return true},nextImage:function(c){var a=this.nextIndex();if(a===false)return false;this.preloadImage(a+1);this.showImage(a,c);var d=a%3,b=(a-d)/3+1;this.numclicks=b;return true},prevIndex:function(){if(this.current_index==0){if(!this.settings.cycle)return false;var a=this.images.length-1}else var a=this.current_index-1;return a},prevImage:function(c){var a=this.prevIndex();if(a===false)return false;this.preloadImage(a-1);this.showImage(a,c);var d=a%3,b=(a-d)/3+1;this.numclicks=b;return true},preloadAll:function(){var b=this,a=0;function c(){if(a<b.images.length){a++;b.preloadImage(a,c)}}b.preloadImage(a,c)},preloadImage:function(e,d){if(this.images[e]){var b=this.images[e];if(!this.images[e].preloaded){var c=a(new Image);c.attr("src",b.image);if(!this.isImageLoaded(c[0])){this.preloads.append(c);var f=this;c.load(function(){b.preloaded=true;b.size={width:this.width,height:this.height};f.fireCallback(d)}).error(function(){b.error=true;b.preloaded=false;b.size=false})}else{b.preloaded=true;b.size={width:c[0].width,height:c[0].height};this.fireCallback(d)}}else this.fireCallback(d)}},isImageLoaded:function(a){if(typeof a.complete!="undefined"&&!a.complete)return false;if(typeof a.naturalWidth!="undefined"&&a.naturalWidth==0)return false;return true},highLightThumb:function(a,c){this.thumbs_wrapper.find(".ad-active").removeClass("ad-active");a.addClass("ad-active");player!=undefined&&player.stopVideo();$jq("#vidP").hide();$jq("#medP").show();_toggleVideo=0;if(this.settings.thumb_opacity<1){this.thumbs_wrapper.find("a:not(.ad-active) img").fadeTo(300,this.settings.thumb_opacity);a.find("img").fadeTo(300,1)}var b=a[0].parentNode.offsetLeft;b-=this.nav_display_width/2-a[0].offsetWidth/2;b-=14;if(this.current_index>c)this.thumbs_wrapper.animate({scrollLeft:b+"px"});else c!=1&&this.thumbs_wrapper.animate({scrollLeft:b+"px"})},fireCallback:function(b){a.isFunction(b)&&b.call(this)}};function b(a,b){this.init(a,b)}b.prototype={start_link:false,stop_link:false,countdown:false,controls:false,settings:false,nextimage_callback:false,enabled:false,running:false,countdown_interval:false,init:function(a,b){var c=this;this.nextimage_callback=a;this.settings=b},create:function(){this.start_link=a('<span class="ad-slideshow-start">'+this.settings.start_label+"</span>");this.stop_link=a('<span class="ad-slideshow-stop">'+this.settings.stop_label+"</span>");this.countdown=a('<span class="ad-slideshow-countdown"></span>');this.countdown.hide();var b=this;this.start_link.click(function(){b.start()});this.stop_link.click(function(){b.stop()});a(document).keydown(function(a){if(a.keyCode==83)if(b.running)b.stop();else b.start()});return this.controls},disable:function(){this.enabled=false;this.stop();this.controls.hide()},enable:function(){this.enabled=true},toggle:function(){if(this.enabled)this.disable();else this.enable()},start:function(){if(this.running||!this.enabled)return false;var a=this;this.running=true;this._next();this.fireCallback(this.settings.onStart);return true},stop:function(){if(!this.running)return false;this.running=false;this.countdown.hide();clearInterval(this.countdown_interval);this.fireCallback(this.settings.onStop);return true},_next:function(){var a=this,c=this.settings.countdown_prefix,d=this.settings.countdown_sufix;clearInterval(a.countdown_interval);this.countdown.show().html(c+this.settings.speed/1e3+d);var b=0;this.countdown_interval=setInterval(function(){b+=1e3;if(b>=a.settings.speed){var f=function(){a.running&&a._next();b=0};!a.nextimage_callback(f)&&a.stop();b=0}var e=parseInt(a.countdown.text().replace(/[^0-9]/g,""),10);e--;e>0&&a.countdown.html(c+e+d)},1e3)},fireCallback:function(b){a.isFunction(b)&&b.call(this)}}})(jQuery);var bcExp,bcVP,bcImg,bcVw,_imageBaseUrl,_imgNLinks,_youtubeLinks,_mp_listingType,_isBasicCommunity,_bcExperienceID,mp_captionBarIDNew,_videos,_currentObjCache,_imgList,_myW,_toggleVideo,_youtubeCreated,_globalParams,_globalCaption,_ended,gnocdmain,gnoimgMed,gnoimgLarge,glistingType;GallerylookUpTable={cv:"Community Video",sv:"Community Video",hv:"Home Video",ci:"Community Image",hi:"Home Image",ev:"External Video",pv:"Plan Viewer",vir:"Virtual Tour",vt:"Virtual Tour",ele:"Elevation",flp:"FloorPlan","int":"Interior",ext:"Exterior",lm:"Community Lot Map"};function UpdateResPlayer(){$jq(".ad-gallery").css("width","300px");$jq(".ad-gallery").css("height","240px");$jq(".nhs_ImagePlayerBox").css("width","300px");$jq(".nhs_ImagePlayerBox").css("height","240px");$jq(".nhs_ImagePlayerBox object").css("width","300px");$jq(".nhs_ImagePlayerTitleBar").css("width","300px");$jq(".ad-gallery .ad-image-wrapper").css("height","194px");$jq(".ad-gallery .ad-nav").css("width","265px");$jq(".ad-gallery .ad-nav .ad-thumbs").css("width","234px");$jq(".ad-nav .ad-thumbs").css("width","256px")}DisplayNoMedia=function(a){var b=$jq('<img src="'+a+'globalresourcesmvc/default/images/nophoto_460x307.jpg" alt="No photo or video available" />');$jq(".ad-gallery .ad-image-wrapper").append(b)};function InitGallery(a){_ended=false;_youtubeCreated=false;a.hasOwnProperty("titleBarText")&&$jq("#nhs_ImagePlayerTitle").text(a.titleBarText);_globalParams=a;if(a.mediaObjs.length==0&&a.externalLinks!=undefined&&a.externalLinks.length==0&&a.type!="results")DisplayNoMedia(a.imgStaticUrl);else{var b=a.hasOwnProperty("specID")?"spec":a.hasOwnProperty("planID")?"plan":a.hasOwnProperty("communityID")?"com":"commres";glistingType=b;var c=a.imgStaticUrl+"globalresourcesmvc/default/images/nophoto_460x307.jpg",e=a.imgStaticUrl+"globalresourcesmvc/default/images/nophoto_med.png",d=a.imgStaticUrl+"globalresourcesmvc/default/images/imgs-player/blank.gif";if(b=="commres"){_wrapperW=300;_wrapperH=194}else{_wrapperW=0;_wrapperH=0}glistingType=b;gnocdmain=d;gnoimgLarge=c;gnoimgMed=e;ProcessParams(a)}}function AfterProcess(){$jq(function(){var b={resource_root:_globalParams.imgBaseUrl,listingType:glistingType},a=$jq(".ad-gallery").adGallery(b);a[0].settings.effect="fade";a[0].settings.mp_type=glistingType;a[0].settings.nocdmain=gnocdmain;if(glistingType=="com")a[0].settings.noimg=gnoimgLarge;else{a[0].settings.noimg=gnoimgMed;a[0].settings.wrapperW=300;a[0].settings.wrapperH=124}})}function HideImgTitle(){$jq("div.nhs_MediaImageTitle").hide()}function SetCaption(f,b,c){var a;if(_mp_listingType=="com")a=b=="ci"||b=="lm"?"Community Image":"Home Image";else a=GallerylookUpTable[b];if(_globalParams.hasOwnProperty("captionBarText"))a=_globalParams.captionBarText+a;else a=" Now Showing: "+a;$jq("#"+mp_captionBarID).text(a);$jq.trim(c)==""&&$jq("div.nhs_MediaImageTitle").hide()}function GoBack(){$jq("#vidP").hide();$jq("#medP").show()}function GetCaption(b){var a;if(_mp_listingType=="com")if(b.Type=="v")a=b.SubType=="cv"||b.SubType=="sv"||b.SubType==null?"Community Video":"Home Video";else if(b.Type=="i")a=b.SubType=="ci"||b.SubType=="lm"?"Community Image":"Home Image";else a=GallerylookUpTable[b.SubType];else{a=GallerylookUpTable[b.SubType];if(a==null)a="Home Video"}if(_globalParams.hasOwnProperty("captionBarText"))a=_globalParams.captionBarText+a;else a=" Now showing: "+a;return a}function GalleryloadImage(k,a,j,i,g,e,f,c,l){var b;if(_mp_listingType=="com")if(e)b=a=="cv"||a=="sv"?"Community Video":"Home Video";else b=a=="ci"||a=="lm"?"Community Image":"Home Image";else b=GallerylookUpTable[a];b=" Now Showing: "+b;$jq("#"+mp_captionBarIDNew).text(b);_mp_listingType=="commres"&&$jq.googlepush("Videos","Search Results","Community");var d="",h=k.indexOf("youtu")!=-1;$jq("#medP").show();$jq("#vidP").hide();if(e){if(_toggleVideo!=1){$jq("#medP").hide();$jq("#vidP").show();if(h){$jq("#nhsplayerloading").hide();$jq("#brightcoveP").hide();$jq("#youtubeP").show()}else{$jq("#nhsplayerloading").show();player!=undefined&&player.stopVideo();$jq("#youtubeP").hide();$jq("#brightcoveP").show()}}this.myvidid=c;this.mysubtype=a;this.mytitle=j;this.myindex=i;this.mycue=g;this.myid=f;if(h){if(!_youtubeCreated){createPlayer("youtubeP",c,460,307);_youtubeCreated=true}else player.loadVideoById(c);NHS.Scripts.MediaPlayerVideo._logVideo(f)}else this.allLoaded&&NHS.Scripts.MediaPlayerVideo.loadVideo(c,a,j,i,g,f);_toggleVideo=1;d=l}else{if(_toggleVideo==1){player!=undefined&&player.stopVideo();$jq("#vidP").hide();$jq("#medP").show()}_toggleVideo=0;d=_imgBaseUrl+k;if(!_isBasicCommunity)if(_mp_listingType=="spec"||_mp_listingType=="plan")$jq.googlepush("Images","Home - Gallery","Select Images");else $jq.googlepush("Images","Community - Gallery","Select Images")}updatePinterest(d,e)}function updatePinterest(b,d){var a=$jq(".nhs_MediaPlayerContainer .pin-it-button");if(a.length>0){var c="http://pinterest.com/pin/create/button/?url="+encodeURIComponent(_globalParams.url)+"&media="+encodeURIComponent(b)+"&description="+encodeURIComponent(d?"Video!: "+_globalParams.description:_globalParams.description);a.attr("href",c);_globalParams.firstImgUrl=b}}function ProcessParams(a){if(a.mediaObjs.length==0)mp_mediaItems=null;else mp_mediaItems=a.mediaObjs;_imgBaseUrl=a.imgBaseUrl;_isBasicCommunity=a.isBasicCommunity;_mp_listingType=a.hasOwnProperty("specID")?"spec":a.hasOwnProperty("planID")?"plan":a.hasOwnProperty("communityID")?"com":"commres";this._externalLinks=a.externalLinks;_bcExperienceID=a.bcExperienceID;this._titlebarID=a.titleBarID;var b=_globalParams.hasOwnProperty("captionBarText");_mp_listingType=="com"?$jq("#"+this._titlebarID).text(b?_globalParams.titleBarText:"Community Gallery"):_mp_listingType=="commres"?$jq("#"+this._titlebarID).text(b?"Tour video gallery":"Community video gallery"):$jq("#"+this._titlebarID).text(b?_globalParams.titleBarText:"Home Gallery");mp_captionBarIDNew=a.captionBarID;_mp_imgtitleBar=a.imgtitleBar;var c;if(a.type=="community"||a.type=="home")_loadDetailsMediaPlayer("_popComVideos");else a.type=="results"&&_loadShowCasePlayer("_popShowcaseVideos")}_loadDetailsMediaPlayer=function(b){this._initialize(b);var a=this._getTags(),c=a!="";if(c)BCMAPI.find("find_videos_by_tags",{or_tags:a,fields:"id,referenceId,thumbnailURL,tags,videoStillURL"});else _popImgnLnksFromMediaItems(false)};_loadShowCasePlayer=function(c){this._initialize(c);var a=this._getTags(),d=a!="",b=_globalParams.marketName+"_"+_globalParams.marketID;a+=a!==""?",showcasevideo,":"showcasevideo";a=b+",allmarkets-"+_globalParams.brightCoveSuffix+","+a;BCMAPI.find("find_videos_by_tags",{or_tags:a,fields:"name,id,referenceId,thumbnailURL,tags,videoStillURL"})};_getTags=function(){var a="";if(mp_mediaItems!=null){jQuery.each(mp_mediaItems,function(c,b){if(b.Type==="v")a+=b.VideoID+","});a=a.substr(0,a.length-1)}return a};_popComVideos=function(a){_popVideos(a,"cv")};_popShowcaseVideos=function(a){_popVideos(a,"sv")};function initializePinterest(a){updatePinterest(a.items[0].videoStillURL,true)}_popVideos=function(c,j){_currentObjCache._popImgnLnksFromMediaItems(c.items.length!=0);c.items.length>0&&initializePinterest(c);var a=[],d=[],b=[],o=GallerylookUpTable,f=j,e="";jQuery.each(c.items,function(r,g){var j=0,p=0,i=0;if(g.referenceId==null)g.referenceId="";if(g.tags.length>=2){var h=g.tags[1],k=g.tags[0];if(h.indexOf("-")!=-1){var q=k;k=h;h=q}var l=k.split("-");if(l.length>2){j=l[1];i=l[2]}var n=true;mp_mediaItems!=null&&g.tags[0]!="showcasevideo"&&jQuery.each(mp_mediaItems,function(b,a){if(a.RefID==i){n=false;e=a.Title;p=a.Sort*1;return false}})}_videos=c.items;var m=false;a.length>0&&h!=""&&g.tags[0]!="showcasevideo"&&jQuery.each(a,function(b,a){if(h==a.hash){m=true;return false}});if(!m&&!n&&g.tags[0]!="showcasevideo")a[a.length]={Type:"v",SubType:f,Thumbnail:g.thumbnailURL,Title:e==null||e==""?g.name:e,Url:g.id,ID:j,Sort:p,hash:h,refID:i,VideoStillURL:g.videoStillURL,IsYouTubeVideo:false};if(g.tags[0]=="showcasevideo")d[d.length]={Type:"v",SubType:f,Thumbnail:g.thumbnailURL,Title:g.name,Url:g.id,ID:0,Sort:1,hash:h,VideoStillURL:g.videoStillURL,IsYouTubeVideo:false};if($jq.inArray(_globalParams.marketName+"_"+_globalParams.marketID,g.tags)!=-1||$jq.inArray("allmarkets-"+_globalParams.brightCoveSuffix,g.tags)!=-1){var o=1e3;if(g.referenceId!=null&&g.referenceId.indexOf("_")!=-1)o=g.referenceId.substr(g.referenceId.lastIndexOf("_")+1);b[b.length]={Type:"v",SubType:f,Thumbnail:g.thumbnailURL,Title:g.name,Url:g.id,ID:j,Sort:parseInt(o),hash:h,VideoStillURL:g.videoStillURL,Ref:g.referenceId,IsYouTubeVideo:false}}});if(c.items.length!=0){var i=[];if(typeof mp_mediaItems!="undefined"&&mp_mediaItems!=null)for(var g=0,m=mp_mediaItems.length;g<m;g++)$jq.each(a,function(){mp_mediaItems[g].RefID.toString()==this.refID&&i.push(this)});a=i.groupNSort(function(a){return a.ID},function(a,b){return a.Sort-b.Sort});if(d.length>0)a=a.concat(d);if(b.length>0){b=b.sort(function(c,d){var a=c.Sort,b=d.Sort;if(a<b)return -1;if(a>b)return 1;a=c.Ref.indexOf("allmarkets")!=-1?"z":c.Ref;b=d.Ref.indexOf("allmarkets")!=-1?"z":d.Ref;return a.localeCompare(b)});a=b.concat(a)}var h=a.length;if(!!_imgNLinks&&_imgNLinks.length!=0)h=h+_imgNLinks.length;var n=j=="sv"?2:3,k=_imgNLinks.length>0,l=a.length>0;_globalCaption=[];jQuery.each(a,function(b,a){_globalCaption.push(GetCaption(a))});jQuery.each(_imgNLinks,function(b,a){_globalCaption.push(GetCaption(a))});if(l){if(_mp_listingType=="com")caption=a[0].SubType=="cv"?"Community Video":"Home Video";else caption=GallerylookUpTable[a[0].SubType];caption="Now Showing: "+caption;$jq("#"+mp_captionBarIDNew).text(caption)}else if(k){if(_mp_listingType=="com")caption=_imgNLinks[0].SubType=="ci"||_imgNLinks[0].SubType=="lm"?"Community Image":"Home Image";else caption=GallerylookUpTable[_imgNLinks[0].SubType];caption="Now Showing: "+caption;$jq("#"+mp_captionBarIDNew).text(caption)}mytemp=$jq.template("mpTmpl","<li>                        {{if IsYouTubeVideo }}                         <a href=\"${Thumbnail}\"   tmpclick=\"GalleryloadImage('${Thumbnail}','${SubType}','${Title}','${$index+1}', false, true, 0, '${OnlineVideoID}','${Thumbnail}');\" >                         <img src=\"${Thumbnail}\" title=\"${Title} \" class=\"image0\" />                           <span></span>                         </a>                        {{/if}}                         {{if Type === 'v' && !IsYouTubeVideo}}                         <a href=\"${VideoStillURL}\"   tmpclick=\"GalleryloadImage('${Thumbnail}','${SubType}','${Title}','${$index+1}', false, true, ${ID}, '${Url}','${VideoStillURL}');\" >                         <img src=\"${Thumbnail}\" title=\"${Title} \" class=\"image0\" />                           <span></span>                         </a>                         {{/if}}                          {{if Type === 'i'}}                         <a href=\"${_imgBaseUrl+Url}\" tmpclick=\"GalleryloadImage('${Url}','${SubType}','${Title}','${$index+1}', false, false);\"  >                         <img src=\"${_imgBaseUrl+Thumbnail}\" title=\"${Title}\" class=\"image0\"  />                         </a>                         {{else Type === 'l'}}                         {{html Url}}                         {{/if}}                        </li>");$jq("#galleryList").empty();$jq.tmpl("mpTmpl",a).appendTo("#galleryList");$jq.tmpl("mpTmpl",_imgNLinks).appendTo("#galleryList");AfterProcess()}};Array.prototype.groupBy=function(d){for(var a=0,e=this.length,b={},c;a<e;a++){if(!b[c="k:"+d(this[a],a,this)])b[c]=[];b[c].push(this[a])}return b};Array.prototype.groupNSort=function(d,c){var b=this.groupBy(d),a=[];for(grp in b){b[grp].sort(c);a=a.concat(b[grp])}return a};_initialize=function(a){BCMAPI.token="HYWld5USmeg7f3O0xaq2UgSaQBVyuw72JRRcM_k4sRX7yIGlb-lcuQ..";BCMAPI.callback=a;_currentObjCache=this};_popImgnLnksFromMediaItems=function(c){_imgNLinks=[];_youtubeLinks=[];var a=false,b=false;if(mp_mediaItems!=null){var d=mp_mediaItems;jQuery.each(d,function(d,c){if(c.Type==="i"){_imgNLinks.push(c);a=true}else if(c.Type=="v"&&c.IsYouTubeVideo){_youtubeLinks.push(c);b=true}})}if(_currentObjCache._externalLinks!=null&&_currentObjCache._externalLinks.length>0){var e=_currentObjCache._externalLinks;jQuery.each(e,function(c,b){_imgNLinks.push(b);a=true})}if(!c){a=_imgNLinks.length>0;if(a){if(_mp_listingType=="com")caption=_imgNLinks[0].SubType=="ci"||_imgNLinks[0].SubType=="lm"?"Community Image":"Home Image";else caption=GallerylookUpTable[_imgNLinks[0].SubType];caption="Now Showing: "+caption;$jq("#"+mp_captionBarIDNew).text(caption)}if(!c&&!a&&!b)DisplayNoMedia(_imgBaseUrl);else{mytemp=$jq.template("mpTmpl","<li>                        {{if IsYouTubeVideo }}                         <a href=\"${Thumbnail}\"   tmpclick=\"GalleryloadImage('${Url}','${SubType}','${Title}','${$index+1}', false, true, 0, '${OnlineVideoID}','${Thumbnail}');\" >                            <img src=\"${Thumbnail}\" title=\"${Title} \" class=\"image0\" />                           <span></span>                         </a>                        {{/if}}                        {{if Type === 'v' && !IsYouTubeVideo}}                        <a href=\"${VideoStillURL}\"   tmpclick=\"GalleryloadImage('${Thumbnail}','${SubType}','${Title}','${$index+1}', false, true, ${ID}, '${Url}','${VideoStillURL}');\" >                            <img src=\"${Thumbnail}\" title=\"${Title} \" class=\"image0\" />                           <span></span>                         </a>                        {{/if}}                        {{if Type === 'i'}}                         <a href=\"${_imgBaseUrl+Url}\" tmpclick=\"GalleryloadImage('${Url}','${SubType}','${Title}','${$index+1}', false, false);\"  >                            <img src=\"${_imgBaseUrl+Thumbnail}\" title=\"${Title}\" class=\"image0\"  />                         </a>                         {{else Type === 'l'}}                            {{html Url}}                         {{/if}}                        </li>");_globalCaption=[];jQuery.each(_youtubeLinks,function(b,a){_globalCaption.push(GetCaption(a))});jQuery.each(_imgNLinks,function(b,a){_globalCaption.push(GetCaption(a))});$jq("#galleryList").empty();$jq.tmpl("mpTmpl",_youtubeLinks).appendTo("#galleryList");$jq.tmpl("mpTmpl",_imgNLinks).appendTo("#galleryList");AfterProcess()}}};/*
 * jQuery autoResize (textarea auto-resizer)
 * @copyright James Padolsey http://james.padolsey.com
 * @version 1.04
 */

(function(a){a.fn.autoResize=function(j){var b=a.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1000},j);this.filter('textarea').each(function(){var c=a(this).css({resize:'none','overflow-y':'hidden'}),k=c.height(),f=(function(){var l=['height','width','lineHeight','textDecoration','letterSpacing'],h={};a.each(l,function(d,e){h[e]=c.css(e)});return c.clone().removeAttr('id').removeAttr('name').css({position:'absolute',top:0,left:-9999}).css(h).attr('tabIndex','-1').insertBefore(c)})(),i=null,g=function(){f.height(0).val(a(this).val()).scrollTop(10000);var d=Math.max(f.scrollTop(),k)+b.extraSpace,e=a(this).add(f);if(i===d){return}i=d;if(d>=b.limit){a(this).css('overflow-y','');return}b.onResize.call(this);b.animate&&c.css('display')==='block'?e.stop().animate({height:d},b.animateDuration,b.animateCallback):e.height(d)};c.unbind('.dynSiz').bind('keyup.dynSiz',g).bind('keydown.dynSiz',g).bind('change.dynSiz',g)});return this}})(jQuery);;function ShowSavedMessage(a){if(a.data!=undefined)window.location.href=a.redirectUrl;else $jq("#liSaveToPlanner").html('<span id="nhs_SaveThisItem">Saved</span>')};Encoder={EncodeType:"entity",isEmpty:function(a){if(a)return a===null||a.length==0||/^\s+$/.test(a);else return true},HTML2Numerical:function(c){var a=["&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&agrave;","&aacute;","&acirc;","&atilde;","&Auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&Ouml;","&times;","&oslash;","&ugrave;","&uacute;","&ucirc;","&Uuml;","&yacute;","&thorn;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&Oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&oelig;","&oelig;","&scaron;","&scaron;","&yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;"],b=["&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;"];return this.swapArrayVals(c,a,b)},NumericalToHTML:function(c){var a=["&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;"],b=["&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&agrave;","&aacute;","&acirc;","&atilde;","&Auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&Ouml;","&times;","&oslash;","&ugrave;","&uacute;","&ucirc;","&Uuml;","&yacute;","&thorn;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&Oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&oelig;","&oelig;","&scaron;","&scaron;","&yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;"];return this.swapArrayVals(c,a,b)},numEncode:function(c){if(this.isEmpty(c))return "";for(var d="",b=0;b<c.length;b++){var a=c.charAt(b);if(a<" "||a>"~")a="&#"+a.charCodeAt()+";";d+=a}return d},htmlDecode:function(e){var c,b,a=e;if(this.isEmpty(a))return "";a=this.HTML2Numerical(a);arr=a.match(/&#[0-9]{1,5};/g);if(arr!=null)for(var d=0;d<arr.length;d++){b=arr[d];c=b.substring(2,b.length-1);if(c>=-32768&&c<=65535)a=a.replace(b,String.fromCharCode(c));else a=a.replace(b,"")}return a},htmlEncode:function(a,b){if(this.isEmpty(a))return "";b=b|false;if(b)if(this.EncodeType=="numerical")a=a.replace(/&/g,"&#38;");else a=a.replace(/&/g,"&amp;");a=this.XSSEncode(a,false);if(this.EncodeType=="numerical"||!b)a=this.HTML2Numerical(a);a=this.numEncode(a);if(!b){a=a.replace(/&#/g,"##AMPHASH##");if(this.EncodeType=="numerical")a=a.replace(/&/g,"&#38;");else a=a.replace(/&/g,"&amp;");a=a.replace(/##AMPHASH##/g,"&#")}a=a.replace(/&#\d*([^\d;]|$)/g,"$1");if(!b)a=this.correctEncoding(a);if(this.EncodeType=="entity")a=this.NumericalToHTML(a);return a},XSSEncode:function(a,b){if(!this.isEmpty(a)){b=b||true;if(b){a=a.replace(/\'/g,"&#39;");a=a.replace(/\"/g,"&quot;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;")}else{a=a.replace(/\'/g,"&#39;");a=a.replace(/\"/g,"&#34;");a=a.replace(/</g,"&#60;");a=a.replace(/>/g,"&#62;")}return a}else return ""},hasEncoded:function(a){if(/&#[0-9]{1,5};/g.test(a))return true;else if(/&[A-Z]{2,6};/gi.test(a))return true;else return false},stripUnicode:function(a){return a.replace(/[^\x20-\x7E]/g,"")},correctEncoding:function(a){return a.replace(/(&amp;)(amp;)+/,"$1")},swapArrayVals:function(b,a,d){if(this.isEmpty(b))return "";var e;if(a&&d)if(a.length==d.length)for(var c=0,f=a.length;c<f;c++){e=new RegExp(a[c],"g");b=b.replace(e,d[c])}return b},inArray:function(c,b){for(var a=0,d=b.length;a<d;a++)if(b[a]===c)return a;return -1}};$jq(document).ready(function(){InitializeLeadForm()});function InitializeLeadForm(){$jq("#frmBrochure").ajaxForm({target:"#divLeadMain"});$jq("textarea#Comments").focusin(function(){$jq('input[type="text"]').removeClass("nhs_Focus");$jq(this).addClass("nhs_Focus")});$jq("textarea#Comments").blur(function(){$jq(this).removeClass("nhs_Focus")});$jq("#LiveOutside").click(function(){if($jq(this).is(":checked")){$jq("input#UserPostalCode").attr("disabled","true");$jq("input#UserPostalCode").addClass("nhs_Disabled");$jq("input#UserPostalCode").val("")}else{$jq("input#UserPostalCode").removeAttr("disabled");$jq("input#UserPostalCode").removeClass("nhs_Disabled")}});$jq('input[type="text"]').focus(function(){$jq('input[type="text"]').removeClass("nhs_Focus");$jq(this).addClass("nhs_Focus")});$jq('input[type="text"]').blur(function(){$jq(this).removeClass("nhs_Focus")});$jq('input[type="password"]').focus(function(){$jq('input[type="text"]').removeClass("nhs_Focus");$jq(this).addClass("nhs_Focus")});$jq('input[type="password"]').blur(function(){$jq(this).removeClass("nhs_Focus")});$jq("textarea#Comments").keypress(function(){var a=this.value.length;if(a>=250)this.value=this.value.substring(0,250)})}function SetAutoresize(){$jq("textarea#Comments").autoResize({onResize:function(){$jq(this).css({opacity:1})},animateCallback:function(){$jq(this).css({opacity:1})},animateDuration:300,extraSpace:0,limit:100})}function toggleZipField(){if($jq("#LiveOutside").is(":checked")){$jq("input#UserPostalCode").attr("disabled","true");$jq("input#UserPostalCode").addClass("nhs_Disabled");$jq("input#UserPostalCode").val("")}else{$jq("input#UserPostalCode").removeAttr("disabled");$jq("input#UserPostalCode").removeClass("nhs_Disabled")}}function toggleRegZipField(){if($jq("#LiveOutsideReg").is(":checked")){$jq("input#ZipCodeReg").attr("disabled","true");$jq("input#ZipCodeReg").addClass("nhs_Disabled");$jq("input#ZipCodeReg").val("")}else{$jq("input#ZipCodeReg").removeAttr("disabled");$jq("input#ZipCodeReg").removeClass("nhs_Disabled")}}function showLogin(c){var b=document.getElementById("divLogin");b.style.display="";var a=document.getElementById("divConfirmationDefault");a.style.display="none";$jq("#Email").val()==""&&$jq("#Email").val($jq("#hfEmail").val());$jq.googlepush("Account Events",(c?"Community":"Home")+" - Access Account","Open Form - Link")}function showCreateAccount(c){var b=document.getElementById("divCreateAccount");b.style.display="";var a=document.getElementById("divConfirmationDefault");a.style.display="none";var d=document.getElementById("nhs_DetailsFormInfoActions");$jq("#FirstName").val()==""&&$jq("#FirstName").val($jq("#hfFirstName").val());$jq("#LastName").val()==""&&$jq("#LastName").val($jq("#hfLastName").val());$jq("#EmailReg").val()==""&&$jq("#EmailReg").val($jq("#hfEmail").val());$jq("#ZipCodeReg").val()==""&&$jq("#ZipCodeReg").val(jQuery.trim($jq("#hfPostalCode").val()));$jq("#hfLiveOutside").val()=="true"&&$jq("#LiveOutsideReg").attr("checked","checked");toggleRequestCreateAccountZipField();$jq.googlepush("Account Events",(c?"Community":"Home")+" - Create Account","Open Form - Link")}function toggleRequestCreateAccountZipField(){if($jq("#LiveOutsideReg").is(":checked")){$jq("input#ZipCodeReg").attr("disabled","true");$jq("input#ZipCodeReg").addClass("nhs_Disabled");$jq("input#ZipCodeReg").val("")}else{$jq("input#ZipCodeReg").removeAttr("disabled");$jq("input#ZipCodeReg").removeClass("nhs_Disabled")}}function hideLogin(){var b=document.getElementById("divLogin");b.style.display="none";var a=document.getElementById("divConfirmationDefault");a.style.display=""}function hideCreateAccount(){var b=document.getElementById("divCreateAccount");b.style.display="none";var a=document.getElementById("divConfirmationDefault");a.style.display="";var c=document.getElementById("nhs_DetailsFormInfoActions");c.style.display=""};if(typeof NHS=="undefined"){NHS={};NHS.Scripts={}}NHS.Scripts.GoogleMapApi=function(b){var a={};jQuery.extend(true,a,this.defaultOptios);this.options=jQuery.extend(true,a,b);this.markersArray=[];this.infowindow=new google.maps.InfoWindow(this.options.InfoWindowOptions);this.infowindowTooltip=new google.maps.InfoWindow(this.options.InfoWindowOptions);this.map=null;this.bounds=new google.maps.LatLngBounds;this.isMapCreate=false};NHS.Scripts.GoogleMapApi.prototype={defaultOptios:{MapOptions:{Latitude:null,Longitude:null,Zoom:8,ContainerName:"map-canvas",zoomControl:true,ZoomControlStyle:"LARGE",zoomControlPosition:null,disableDefaultUI:false,Draggable:true,Scrollwheel:true,DisableDoubleClickZoom:false,panControl:false,overviewControl:false,streetViewControl:false},CreateMapWrap:true,DirectionsDisplayPanel:null,MarkerPointOptions:{optimized:true},Loader:"",MinZoom:3,MaxZoom:null,MarkerClustererOptions:{gridSize:50,maxZoom:15,cssName:null,imagePath:null,zoomOnClick:true,minimumClusterSize:null},UseClusterer:false,InfoWindowOptions:{disableAutoPan:false},MarkerPointAsynOptions:{Listener:"idle",UrlServer:null},ProcessResultOptions:{Latitude:"",Longitude:"",Name:""},Events:{OnMapCreate:null,OnMarkersCreate:null,OnMarkersRemove:function(){},OnGetMarkerPointAsyn:function(){},MarkerClickCallBack:null,IdleCallBack:null,MarkerMouseOverCallBack:null,MarkerMouseOutCallBack:null,ZoomChangesCallBack:null,DragChangesCallBack:null,ClickCallBack:null,InfowindowTooltipReadyCallBack:null,InfowindowReadyCallBack:null,tInfowindowOffsetCallBack:null},Autocomplete:{CreateControl:false,BindToBound:false,Autocompletecontrol:"pac-input"}},createMap:function(){var a=this,b=a.options.MapOptions,d=a.options.MarkerClustererOptions,c={zoom:b.Zoom,center:new google.maps.LatLng(b.Latitude,b.Longitude),zoomControl:b.zoomControl,zoomControlOptions:{style:google.maps.ZoomControlStyle[b.ZoomControlStyle],position:google.maps.ControlPosition[b.zoomControlPosition]},disableDefaultUI:b.disableDefaultUI,draggable:b.Draggable,scrollwheel:b.Scrollwheel,disableDoubleClickZoom:b.DisableDoubleClickZoom,panControl:b.panControl,streetViewControl:b.streetViewControl,overviewMapControl:b.overviewMapControl,maxZoom:a.options.MaxZoom,minZoom:a.options.MinZoom};a.options.CreateMapWrap&&a.createMapWrap();a.map=new google.maps.Map(document.getElementById(b.ContainerName),c);google.maps.Map.prototype.clearOverlays=function(){a.clearOverlays()};jQuery.isFunction(a.options.Events.ClickCallBack)&&google.maps.event.addListener(a.map,"click",function(){a.options.Events.ClickCallBack.call(a)});google.maps.event.addListener(a.map,"dragend",function(){jQuery.isFunction(a.options.Events.DragChangesCallBack)&&a.options.Events.DragChangesCallBack.call(a)});if(window["MarkerClusterer"])a.markerCluster=new MarkerClusterer(a.map,[],d);a.getMarkerPointAsyn();a.CreateOverlay();jQuery.isFunction(a.options.Events.InfowindowTooltipReadyCallBack)&&google.maps.event.addListener(a.infowindowTooltip,"domready",function(){a.options.Events.InfowindowTooltipReadyCallBack.call(a)});jQuery.isFunction(a.options.Events.InfowindowReadyCallBack)&&google.maps.event.addListener(a.infowindow,"domready",function(){a.options.Events.InfowindowReadyCallBack.call(a)});jQuery.isFunction(a.options.Events.ZoomChangesCallBack)&&google.maps.event.addListener(a.map,"zoom_changed",function(){a.options.Events.ZoomChangesCallBack.call(a,a.map.getZoom())});google.maps.event.addListener(a.map,"idle",function(){a.RemoveGoogleInfo();jQuery.isFunction(a.options.Events.IdleCallBack)&&a.options.Events.IdleCallBack.call(a);jQuery.isFunction(a.options.Events.OnMapCreate)&&!a.isMapCreate&&a.options.Events.OnMapCreate();a.isMapCreate=true});google.maps.event.addListenerOnce(a.map,"tilesloaded",a.RemoveGoogleInfo)},createMapWrap:function(){var a=this,b=a.options.MapOptions;jQuery("#"+b.ContainerName).wrap('<div id="nhs_mapwrap" style="position:relative;" />');jQuery("#nhs_mapwrap").append('<div id="nhs_OverlayMap" style="position: absolute;z-index:99999;top: 0px;left: 0px;height:100%;width:100%;background-color: #000;filter: alpha(opacity=35);-moz-opacity: 0.35;opacity: 0.35;"></div>');jQuery("#nhs_mapwrap").append('<div id="nhs_LoadingMap" class="nhs_Loading" style="position:absolute;"><p>Updating</p></div>');a.showLoading()},hideLoading:function(){jQuery("#nhs_LoadingMap, #nhs_OverlayMap").hide();jQuery(".gm-style > div > a").attr("href")&&setTimeout(function(){for(var b=jQuery(".gm-style-cc").length,a=1;a<b;a+=1)jQuery(".gm-style-cc").eq("-1").remove();jQuery(".gm-style > div > a").removeAttr("href").removeAttr("title")},800)},showLoading:function(){jQuery("#nhs_LoadingMap, #nhs_OverlayMap").show()},clearOverlays:function(){for(var a=this,b=0;b<a.markersArray.length;b++)a.markersArray[b].setMap(null);a.markersArray=[];a.bounds=new google.maps.LatLngBounds;a.markerCluster&&a.markerCluster.clearMarkers();a.options.Events.OnMarkersRemove()},getMarkerPointAsyn:function(){var a=this,b=a.options.MarkerPointAsynOptions;if(b.Listener&&b.UrlServer){a.options.Events.OnGetMarkerPointAsyn(b);google.maps.event.addListener(a.map,b.Listener,function(){a.showLoading();var c=a.getBoundsFromMap();a.map.clearOverlays();jQuery.getJSON(b.UrlServer,c,function(b){a.processResult(b)})})}else a.hideLoading()},getBoundsFromMap:function(){var e=this,a=e.map.getBounds(),b=a.getNorthEast(),c=a.getSouthWest(),d={minLat:c.lat(),minLng:c.lng(),maxLat:b.lat(),maxLng:b.lng()};return d},processResult:function(a){var c=this;c.showLoading();var d=c.options.ProcessResultOptions;if(a!==null)for(var b=0;b<a.length;b++){var e=c.getHtmlInfowindow(a,a[b]),f=c.getIconMarkerPoint(a,a[b]),g=c.getNameMarkerPoint(a,a[b]);c.createMarkerPoint(a[b][d.Latitude],a[b][d.Longitude],g,e,f,a[b])}c.hideLoading()},getHtmlInfowindow:function(){return null},getIconMarkerPoint:function(){return null},getNameMarkerPoint:function(d,b){var c=this,a=c.options.ProcessResultOptions;return b[a.Name]},createMarkerPoint:function(g,h,f,c,d,e){var a=this,b=a._createMarkerPoint(g,h,f,c,d,e);if(a.options.UseClusterer==false)b.setMap(a.map);else a.markerCluster&&a.markerCluster.addMarker(b);a.markersArray.push(b)},_createMarkerPoint:function(j,k,i,d,h,c){var a=this,e=new google.maps.LatLng(j,k),f=a.options.MarkerPointOptions,g={position:e,icon:h,title:i,optimized:f.optimized,zIndex:99};a.bounds.extend(e);var b=new google.maps.Marker(g);jQuery.isFunction(a.options.Events.OnMarkersCreate)&&a.options.Events.OnMarkersCreate(c,a.infowindow,b);typeof d=="string"&&google.maps.event.addListener(b,"click",function(){a.infowindow.setContent(d);a.infowindow.open(a.map,b);jQuery.isFunction(a.options.Events.MarkerClickCallBack)&&a.options.Events.MarkerClickCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});typeof d!="string"&&jQuery.isFunction(a.options.Events.MarkerClickCallBack)&&google.maps.event.addListener(b,"click",function(){a.options.Events.MarkerClickCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});jQuery.isFunction(a.options.Events.MarkerMouseOverCallBack)&&google.maps.event.addListener(b,"mouseover",function(){a.options.Events.MarkerMouseOverCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});jQuery.isFunction(a.options.Events.MarkerMouseOutCallBack)&&google.maps.event.addListener(b,"mouseout",function(){a.options.Events.MarkerMouseOutCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});return b},AutoFit:function(){var a=this;a.map.fitBounds(a.bounds)},CreateOverlay:function(){this.ourOverlay=new google.maps.OverlayView;this.ourOverlay.draw=function(){};this.ourOverlay.setMap(this.map)},GetInfowindowOffset:function(b,f,g,h){var d=0,e=0,a=this.ourOverlay.getProjection().fromLatLngToContainerPixel(h.getPosition()),i=this.ourOverlay.getProjection().fromLatLngToContainerPixel(g.getBounds().getSouthWest()),c=this.ourOverlay.getProjection().fromLatLngToContainerPixel(g.getBounds().getNorthEast());if(a.x<b/2)d=b/2-a.x;else if(a.x>c.x-b/2)d=c.x-b/2-a.x;if(a.y<f)e=a.y+f-(a.y-c.y);else e=a.y+20-(a.y-c.y);return new google.maps.Size(d,e)},GetPixelFromLatLng:function(b){var a=this.map.getProjection(),c=a.fromLatLngToPoint(b);return c},RemoveGoogleInfo:function(){if(jQuery(".gm-style > div > a").attr("href")){for(var b=jQuery(".gm-style-cc").length,a=1;a<b;a+=1)jQuery(".gm-style-cc").eq("-1").remove();jQuery(".gm-style > div > a").removeAttr("href").removeAttr("title")}}};NHS.Scripts.GoogleMapApi.prototype.initializeAutoComplete=function(){var a=this,b;if(a.options.Autocomplete.CreateControl)b=a.createControles();else b=document.getElementById(a.options.Autocomplete.Autocompletecontrol);jQuery(b).on("paste",function(){return setTimeout(function(){var a,c;a=jQuery(b);c=a.val();a.focus();a.val(c);return a.focus()},1)});var c=new google.maps.places.Autocomplete(b);a.options.Autocomplete.CreateControl&&a.initializeAutoCompleteControles(c);a.options.Autocomplete.BindToBound&&c.bindTo("bounds",a.map);var d=new google.maps.Marker({map:a.map});google.maps.event.addListener(c,"place_changed",function(){a.placeChangedProcess(d,c)})};NHS.Scripts.GoogleMapApi.prototype.placeChangedProcess=function(c,e){var b=this;b.infowindow.close();c.setVisible(false);var a=e.getPlace();if(!a.geometry)return;if(a.geometry.viewport)b.map.fitBounds(a.geometry.viewport);else{b.map.setCenter(a.geometry.location);b.map.setZoom(17)}var f=b.iconAutoComplite(a);c.setIcon(f);c.setPosition(a.geometry.location);c.setVisible(true);var d="";if(a.address_components)d=[a.address_components[0]&&a.address_components[0].short_name||"",a.address_components[1]&&a.address_components[1].short_name||"",a.address_components[2]&&a.address_components[2].short_name||""].join(" ");b.infowindow.setContent("<div><strong>"+a.name+"</strong><br>"+d);b.infowindow.open(b.map,c)};NHS.Scripts.GoogleMapApi.prototype.iconAutoComplite=function(a){var b={url:a.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)};return b};NHS.Scripts.GoogleMapApi.prototype.createControles=function(){var c=this,a=document.getElementById(c.options.MapOptions.ContainerName),b=jQuery('<div><input id="pac-input" class="controls" type="text" placeholder="Enter a location" / ><div id="type-selector" class="controls"><input type="radio" name="type" id="changetype-all" checked="checked"><label for="changetype-all">All</label><input type="radio" name="type" id="changetype-establishment"><label for="changetype-establishment">Establishments</label><input type="radio" name="type" id="changetype-geocode"><label for="changetype-geocode">Geocodes</label></div></div>')[0];a.parentNode.insertBefore(b,a.nextSibling);return document.getElementById("pac-input")};NHS.Scripts.GoogleMapApi.prototype.initializeAutoCompleteControles=function(a){var b=this;jQuery("#changetype-all").change(function(){a.setTypes([])});jQuery("#changetype-establishment").change(function(){a.setTypes(["establishment"])});jQuery("#changetype-geocode").change(function(){a.setTypes(["geocode"])});var c=document.getElementById("pac-input"),d=document.getElementById("type-selector");b.map.controls[google.maps.ControlPosition.TOP_LEFT].push(c);b.map.controls[google.maps.ControlPosition.TOP_LEFT].push(d)};NHS.Scripts.GooglePropertyMap=function(a){this.parameters=a;this.isMapCreate=false;this.log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,fromPage:a.fromPage,partnerId:a.partnerId,marketId:a.marketId})};NHS.Scripts.GooglePropertyMap.prototype={init:function(){jQuery("#dd-collapsible").hide();jQuery("#nhs_propertyMapCollapsibleClose").hide();var a=this,c=a.parameters,d=this.parameters.OptionsForMap,b=new NHS.Scripts.GoogleMapApi(d);b.initializeAutoComplete();b.getIconMarkerPoint=function(b,a){if(a.MarketPoints.length>1)return c.iconNearByCommMulti;return c.iconNearByComm};b.options.Events.MarkerClickCallBack=function(a,e,h,g){if(a){for(var f=[],d=0;d<a.MarketPoints.length;d++)f.push(a.MarketPoints[d]["CommunityId"]+"|"+0);jQuery.ajax({url:c.getCommunityMapCards,type:"GET",data:{commIds:f.join(),basicIds:""},success:function(a){if(a){e.setContent(a);e.open(b.map,g);tb_initLive("a.thickbox")}}})}};b.placeChangedProcess=function(d,b){var c=b.getPlace();a.location=c.geometry.location};jQuery("#nhs_PropertyMap").width(c.mapWidth).height(c.mapHeight);jQuery("#nhs_propertyMapCollapsibleOpen, #nhs_mapTab").click(function(c){jQuery.NhsCancelEvent(c);jQuery("#dd-collapsible").css("display")=="none"&&jQuery("#dd-collapsible").toggle("fast");jQuery("#nhs_propertyMapCollapsibleOpen").hide();jQuery("#nhs_propertyMapCollapsibleClose").show();a.isMapCreate&&a.log.logMultiEvent("BLMAPV",a.parameters.communityId,a.parameters.builderId,0,0);if(!a.isMapCreate){a.isMapCreate=true;b.createMap();a.parameters.NearbyComms&&b.processResult(a.parameters.NearbyComms);google.maps.event.addListener(b.map,"idle",a.RemoveGoogleInfo);b.createMarkerPoint(d.MapOptions.Latitude,d.MapOptions.Longitude,null,null,a.parameters.icon,null);a.logClickEvent_propertyMapExpand()}});jQuery("#nhs_propertyMapCollapsibleClose").click(function(a){jQuery.NhsCancelEvent(a);jQuery("#dd-collapsible").toggle("fast");jQuery("#nhs_propertyMapCollapsibleClose").hide();jQuery("#nhs_propertyMapCollapsibleOpen").show()});a.InitDrivingDirection()},logClickEvent_propertyMapExpand:function(){var a=this,b=NHS.Scripts.Helper.readCookie("drivingDirectionsClicked");if(!parseInt(b)){if(a.parameters.isBasicCommunity){a.log.logMultiEvent("bcMapSectionReveal",a.parameters.communityId,a.parameters.builderId,0,0);jQuery.googlepush("Basic Listing","Driving Directions",a.parameters.communityId,2,false)}else if(!a.parameters.isBasicListing)if(a.parameters.specId>0||a.parameters.planId>0)a.log.logMultiEvent("HDSDD",a.parameters.communityId,a.parameters.builderId,a.parameters.planId,a.parameters.specId);else a.log.logMultiEvent("CDSDD",a.parameters.communityId,a.parameters.builderId,0,0);NHS.Scripts.Helper.createCookie("drivingDirectionsClicked",1,0)}},InitDrivingDirection:function(){var a=this,b=new Date,c=b.getMonth(),d=b.getDate(),e=b.getFullYear();jQuery("#nhs_drivingDirections").show();jQuery("#tabMQMap a").click(function(){if(!jQuery("#nhs_PropertyMap").is(":visible")){jQuery("#nhs_PropertyMap").toggle();jQuery(this).toggleClass("On");jQuery(jQuery("#tabBuilderMap").find("a")[0]).toggleClass("On");jQuery("#nhs_BuilderPropertyMap").toggle();jQuery("#nhs_drivingDirections").hide();jQuery("#nhs_GetDirections").show();jQuery("#nhs_drivingDirections").show()}return false});jQuery("#tabBuilderMap a").click(function(){if(!jQuery("#nhs_BuilderPropertyMap").is(":visible")){jQuery("#nhs_BuilderPropertyMap").toggle();jQuery(this).toggleClass("On");jQuery(jQuery("#tabMQMap").find("a")[0]).toggleClass("On");jQuery("#nhs_PropertyMap").toggle();jQuery("#nhs_drivingDirections").show();jQuery("#nhs_GetDirections").hide();jQuery("#nhs_drivingDirections").show()}var b=NHS.Scripts.Helper.readCookie("drivingDirectionsBuilderMapClicked");if(!b){if(!a.parameters.isBasicListing||!a.parameters.isBasicCommunity)if(a.parameters.specId>0||a.parameters.planId>0)a.log.logMultiEvent("HDSDD",a.parameters.communityId,a.parameters.builderId,a.parameters.planId,a.parameters.specId);else a.log.logMultiEvent("CDSDD",a.parameters.communityId,a.parameters.builderId,0,0);NHS.Scripts.Helper.createCookie("drivingDirectionsBuilderMapClicked",1,0)}return false});jQuery("#nhsTxtDate").kendoDatePicker({min:new Date,change:function(){var d=kendo.toString(this.value(),"d"),b=jQuery(".btn_NhsMapSend"),a=b.attr("href");if(typeof a!="undefined"){var c=a.substring(a.indexOf("=")+1,a.indexOf("&"));b.attr("href",encodeURI(a.replace(c,d)))}},month:{empty:'<div class="kdp-outofdayarray">#= data.value #</div>'}});jQuery("#nhsTxtDate").attr("disabled","disabled");jQuery("#btnUpdate").click(function(){if(a.parameters.isBasicCommunity){a.log.logMultiEvent("bcRoute",a.parameters.communityId,a.parameters.builderId,a.parameters.planId,a.parameters.specId);jQuery.googlepush("Basic Listing","Driving Route",a.parameters.communityId,4,false)}else if(!a.parameters.isBasicListing)if(a.parameters.specId>0||a.parameters.planId>0){a.log.logMultiEvent("HDSHWRT",a.parameters.communityId,a.parameters.builderId,a.parameters.planId,a.parameters.specId);a.log.logMultiEvent("HDSDD",a.parameters.communityId,a.parameters.builderId,a.parameters.planId,a.parameters.specId)}else{a.log.logMultiEvent("CDSHWRT",a.parameters.communityId,a.parameters.builderId,0,0);a.log.logMultiEvent("CDSDD",a.parameters.communityId,a.parameters.builderId,0,0)}if(a.location){var c=(screen.width-840)/2,d=(screen.height-600)/2,b=jQuery("#nhsTxtStreeAddress").val();jQuery("#nhsWrongAddress").hide();var f=a.parameters.drivingDirectionAction+"?communityId="+a.parameters.communityId+"&lat="+a.location.lat()+"&lng="+a.location.lng()+"&check=false&isBasicListing="+a.parameters.isBasicListing+"&startingPoint="+b;jQuery.SetDataLayerPair("siteDrivingRoute");window.open(f,"_blank","width=840,height=600,top="+d+",left="+c+",menubar=yes,status=no,location=no,toolbar=no,scrollbars=yes")}else{var b=jQuery("#nhsTxtStreeAddress").val(),e=new google.maps.Geocoder;e.geocode({address:b},function(e,f){if(f==google.maps.GeocoderStatus.OK){var g=a.parameters.drivingDirectionAction+"?communityId="+a.parameters.communityId+"&lat="+e[0].geometry.location.lat()+"&lng="+e[0].geometry.location.lng()+"&check=false&isBasicListing="+a.parameters.isBasicListing+"&startingPoint="+b;jQuery.SetDataLayerPair("siteDrivingRoute");window.open(g,"_blank","width=840,height=600,top="+d+",left="+c+",menubar=yes,status=no,location=no,toolbar=no,scrollbars=yes")}else jQuery("#nhsWrongAddress").show()})}return false})},RemoveGoogleInfo:function(){if(jQuery(".gm-style > div > a").attr("href")){for(var b=jQuery(".gm-style-cc").length,a=1;a<b;a+=1)jQuery(".gm-style-cc").eq("-1").remove();jQuery(".gm-style > div > a").removeAttr("href").removeAttr("title")}}};NHS.Scripts.PropertyMap.NearbyComms=function(a){this._communityId=a.communityId;this._builderId=a.builderId;this._planId=a.specId>0?0:a.planId;this._specId=a.specId;this._log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,fromPage:a.fromPage,partnerId:a.partnerId,marketId:a.marketId})};NHS.Scripts.PropertyMap.NearbyComms.prototype={get_log:function(){return this._log},attachClickEventsToCommLinks:function(){$jq(".nhs_NearbyImgBox a").click(function(){attachLogEventToHomesNearby(this)}.bind(this));$jq(".nhs_selector a").click(function(){attachLogEventToHomesNearby(this)}.bind(this))}};var geoExec,mapExec,isMapLoaded,mapRef;NHS.Scripts.PropertyMap.Map=function(a){this._nhsMqMap="";this.mapZoom=a.mapZoom?a.mapZoom:7;var c="",d="",b="",e="route.access.mapquest.com",g="80",f="mq",h="geocode.access.mapquest.com",j="80",i="mq",k="map.access.mapquest.com",m="80",l="mq";this._siteRoot=a.siteRoot;this._brandPartnerId=a.brandPartnerId;this._propertyDetailAction=a.propertyDetailAction;this._resourceRoot=a.resourceRoot;this._mqIconShadowPath=this._resourceRoot+"globalresources/default/images/map/marker_shadow.png";if(this._brandPartnerId==333){this._mqIconPath=this._resourceRoot+"globalResources/move/images/map/marker.gif";this._mqMainIconPath=this._resourceRoot+"globalResourcesMvc/default/images/icons/star_red.png";this._mqIconMultPath=this._resourceRoot+"globalresources/move/images/map/marker_multiple.gif"}else{this._mqIconPath=this._resourceRoot+"globalResources/default/images/map/marker.gif";this._mqMainIconPath=this._resourceRoot+"globalResourcesMvc/default/images/icons/star_red.png";this._mqIconMultPath=this._resourceRoot+"globalresources/default/images/map/marker_multiple.gif"}this._mqIconShadowPath=this._resourceRoot+"globalresources/default/images/map/marker_shadow.png";this._freeBrochureLink=a.freeBrochureLink;b=a.proxyServerPath;routeExec=new MQExec(e,f,g,c,b,d);mapExec=new MQExec(k,l,m,c,b,d);geoExec=new MQExec(h,i,j,c,b,d);this._commLat=a.commLat;this._commLng=a.commLng;this._startLat=a.startLat||0;this._startLng=a.startLng||0;this._mapWidth=a.mapWidth;this._mapHeight=a.mapHeight;this._nearlyCommunities=a.nearlyCommunities;this._mapContainerId=a.mapContainerId;this._parent=a.parent;isMapLoaded=false;this._communityId=a.communityId;this._isBasicCommunity=a.isBasicCommunity;this._builderId=a.builderId;this._planId=a.specId>0?0:a.planId;this._specId=a.specId;this._log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,fromPage:a.fromPage,partnerId:a.partnerId,marketId:a.marketId})};NHS.Scripts.PropertyMap.Map.prototype={get_log:function(){return this._log},preInit:function(){mapRef=this;$jq("#dd-collapsible").hide();setup_propertyMapCollapsible();$jq("#nhs_propertyMapCollapsibleClose").hide();NHS.Scripts.Helper.eraseCookie("drivingDirectionsClicked")},show:function(){var a=this,f=new MQA.LatLng(a._commLat,a._commLng),g=new MQA.Size(a._mapWidth,a._mapHeight);$jq("#"+a._mapContainerId).width(a._mapWidth+"px");$jq("#"+a._mapContainerId).height(a._mapHeight+"px");a._nhsMqMap=new MQA.TileMap(document.getElementById(a._mapContainerId),a.mapZoom,f,"map");var d=new MQA.ZoomControl;a._nhsMqMap.addControl(d,new MQA.MapCornerPlacement(MQA.MapCorner.TOP_LEFT,new MQA.Size(10,21)));var e=new MQA.Icon(a._mqMainIconPath,30,30),c=new MQA.Icon(a._mqIconShadowPath,0,0);a._nhsMapIconMult=new MQA.Icon(a._mqIconMultPath,28,28);a._mqIconMultOffset=new MQA.Point(-14,-28);var b=new MQA.Poi(new MQA.LatLng(a._commLat,a._commLng),e);mqPointOffset=new MQA.Point(-10,-26);b.setValue("iconOffset",mqPointOffset);b.setValue("shadow",c);b.setValue("key","comm");a._nhsMqMap.addPoi(b);if(a._nearlyCommunities&&a._nearlyCommunities.length>0)a._renderNearlyComms(a._nearlyCommunities,b);else a._nhsMqMap.addPoi(b);a._startLat!=0&a._startLng!=0&&a.addRouteToMap(a._startLat,a._startLng,a._commLat,a._commLng);MQA.EventManager.addListener(a._nhsMqMap.getInfoWindow(),"opened",a._infoWindowOpen)},addRouteToMap:function(h,i,k,l){var c=new MQGeoAddress,e=new MQGeoAddress;c.setMQLatLng(new MQA.LatLng(h,i));e.setMQLatLng(new MQA.LatLng(k,l));var j=new MQSession,g=new MQRouteResults,a=new MQLocationCollection,d=new MQA.RectLL(new MQA.LatLng,new MQA.LatLng);a.add(c);a.add(e);var f=new MQRouteOptions,b=routeExec.createSessionEx(j);routeExec.doRoute(a,f,g,b,d);this._nhsMqMap.addRouteHighlight(d,"http://map.access.mapquest.com",b,true)},viewCommunityOnMapOnHover:function(a,c,b){if(this._nhsMqMap){if(!a)var a=window.event;a.cancelBubble=true;a.stopPropagation&&a.stopPropagation();poiCollection=this._nhsMqMap.getShapes();keyToFind=""+c+b;for(i=0;i<poiCollection.getSize();i++){commPoi=poiCollection.getAt(i);if(commPoi.getKey().match(keyToFind)==keyToFind){commPoi.showRolloverWindow();break}}}},hideCommunityOnMapOnHover:function(a,c,b){if(this._nhsMqMap){if(!a)var a=window.event;a.cancelBubble=true;a.stopPropagation&&a.stopPropagation();poiCollection=this._nhsMqMap.getShapes();keyToFind=""+c+b;for(i=0;i<poiCollection.getSize();i++){commPoi=poiCollection.getAt(i);if(commPoi.getKey().match(keyToFind)==keyToFind){commPoi.mqrw&&commPoi.mqrw.hide();break}}}},_infoWindowOpen:function(){typeof commDetail!="undefined"&&commDetail.get_log().logEvent("CDHMNRBY",commDetail.get_commId(),commDetail.get_builderId());typeof homeCarousel!="undefined"&&homeCarousel.get_log().logEvent("HOMNRBY",homeCarousel.get_commId(),homeCarousel.get_builderId(),homeCarousel.get_plan(),homeCarousel.get_spec());tb_init(".nhs_CommResHoverBox a.thickbox, .nhs_MultiHoverBox a.thickbox")},_renderNearlyComms:function(b,c){var d=new MQA.ShapeCollection,a=this._buildCommPois(b,c);this._nhsMqMap.replaceShapes(a)},_buildCommPois:function(f,B){var q=new MQA.ShapeCollection;q.add(B);var p=[],h=[].concat(f),n=f.length;for(i=n-1;i>=0;i--){var m=f[i],d=m.CommunityId,c=m.BuilderId,t=m.Latitude,u=m.Longitude,k=[],D=1,z=h.length;for(j=z-1;j>=0;j--){var l=h[j],O=l.CommunityId,N=l.BuilderId,H=l.Latitude,I=l.Longitude;if(H==t&&I==u){D++;k.push(h[j]);h.splice(j,1)}}h.splice(i,1);k&&k.length>0&&p.push(k)}p.reverse();f=p;n=f.length;for(i=0;i<n;i++){var b=f[i],g=b.length;if(!g||g&&g==1){b=b[0];var d=b.CommunityId,c=b.BuilderId,s=b.CommunityName,K=b.City,M=b.StateAbbr,L=b.PostalCode,e=b.SpotlightThumbnail.replace("small_","homnb_"),E="",r=b.Price,x=b.BrandName,F=0,G=0,J=b.BCType,t=b.Latitude,u=b.Longitude,w=b.MarketId,v=this._createCommPoi(d,c,s,K,M,L,e,E,r,x,F,G,J,t,u,w)}else if(g&&g>1){var o=g,y="mkey",a=[];a.push('<div class="nhs_MultiHoverBox">');for(j=0;j<o;j++){var d=b[j].CommunityId,c=b[j].BuilderId,s=b[j].CommunityName,K=b[j].City,M=b[j].StateAbbr,L=b[j].PostalCode,e=b[j].SpotlightThumbnail.replace("small_","homnb_"),E="",r=b[j].Price,x=b[j].BrandName,F=0,G=0,J=b[j].BCType,t=b[j].Latitude,u=b[j].Longitude,w=b[j].MarketId;y+="_"+d.toString()+c.toString();a.push('<div class="nhs_MultiHoverRow">');if(e=="N"||e=="n"||e=="")e=this._resourceRoot+"globalresourcesmvc/default/images/nophoto_sm.png";else e=this._resourceRoot.substring(0,this._resourceRoot.length-1)+e;a.push('<div class="nhs_ResultsThumb"><a href="');a.push(this._siteRoot);a.push(this._propertyDetailAction);a.push("/community-");a.push(d);a.push("/builder-");a.push(c);a.push('" onclick="drivingDirections.get_log().logAndRedirect(event,\'');a.push(this._siteRoot);a.push(this._propertyDetailAction);a.push("/community-");a.push(d);a.push("/builder-");a.push(c);a.push("/logevent-HOVNAME");a.push("', 'HOVNAME',"+d+","+c+'); return false;">');a.push('<img src="');a.push(e);a.push('" alt="');a.push(s);a.push('" />');a.push("</a></div>");a.push('<h3><a href="');a.push(this._siteRoot);a.push(this._propertyDetailAction);a.push("/community-");a.push(d);a.push("/builder-");a.push(c);a.push('" onclick="drivingDirections.get_log().logAndRedirect(event,\'');a.push(this._siteRoot);a.push(this._propertyDetailAction);a.push("/community-");a.push(d);a.push("/builder-");a.push(c);a.push("/logevent-HOVNAME");a.push("', 'HOVNAME',"+d+","+c+'); return false;">');a.push(s);a.push("</a></h3>");a.push('<p class="nhs_ResultsBuilder">by ');a.push(x);a.push("</p>");if(r!="$ - $"){a.push('<p class="nhs_ResultsPrice">From ');a.push(r);a.push("</p>")}var C=this._freeBrochureLink.replace("-text-","Free brochure").replace("-commid-",d).replace("-builderid-",c).replace("-marketid-",w).replace("-logEvent-","HOVFBROCH");a.push("<p>"+C+"</p>");a.push('<br style="clear: both;" />');a.push("</div>")}if(o>2)a.push("</div></div>");else a.push("</div>");var A=a.join("");v=this._createMultiCommPoi(o,y,A,t,u)}q.add(v)}return q},_createMultiCommPoi:function(c,d,b,e,f){var a=new MQA.LatLng(e,f);mqPoint=new MQA.Poi(a,this._nhsMapIconMult);mqPoint.setValue("iconOffset",this._mqIconMultOffset);mqPoint.setValue("shadow",this._nhsMapIconShadow);mqPoint.setValue("infoTitleHTML","<strong>"+c+" communities</strong>");mqPoint.setValue("infoContentHTML",b);mqPoint.setValue("key",d);return mqPoint},_createCommPoi:function(c,b,f,u,w,v,d,r,h,n,s,t,g,o,p,m){var e="",q=this._nhsMqMap.getZoomLevel();if(g=="comingsoon")e=this._resourceRoot+"globalresources/default/images/icons/icon_coming_soon.gif";if(g=="grandopening")e=this._resourceRoot+"globalresources/default/images/icons/icon_grand_opening.gif";if(g=="closeout")e=this._resourceRoot+"globalresources/default/images/icons/icon_closeout.gif";if(d=="N"||d=="n"||d=="")d=this._resourceRoot+"globalresourcesmvc/default/images/nophoto_sm.png";else d=this._resourceRoot.substring(0,this._resourceRoot.length-1)+d;var a=[];a.push('<div class="nhs_CommResHoverBox"><div class="nhs_ResultsThumb"><a href="');a.push(this._siteRoot);a.push(this._propertyDetailAction);a.push("/community-");a.push(c);a.push("/builder-");a.push(b);a.push('" onclick="drivingDirections.get_log().logAndRedirect(event,\'');a.push(this._siteRoot);a.push(this._propertyDetailAction);a.push("/community-");a.push(c);a.push("/builder-");a.push(b);a.push("/logevent-HOVNAME");a.push("', 'HOVNAME',"+c+","+b+'); return false;"><img src="');a.push(d);a.push('" alt="');a.push(f);a.push('" /></a></div>');a.push('<h3><a href="');a.push(this._siteRoot);a.push(this._propertyDetailAction);a.push("/community-");a.push(c);a.push("/builder-");a.push(b);a.push('" onclick="drivingDirections.get_log().logAndRedirect(event,\'');a.push(this._siteRoot);a.push(this._propertyDetailAction);a.push("/community-");a.push(c);a.push("/builder-");a.push(b);a.push("/logevent-HOVNAME");a.push("', 'HOVNAME',"+c+","+b+'); return false;">');a.push(f);a.push("</a></h3>");a.push('<p class="nhs_ResultsBuilder">by ');a.push(n);a.push("</p>");if(h!="$ - $"){a.push('<p class="nhs_ResultsPrice">from ');a.push(h);a.push("</p>")}a.push('<p class="nhs_ResultsLink"><a href="');a.push(this._siteRoot);a.push(this._propertyDetailAction);a.push("/community-");a.push(c);a.push("/builder-");a.push(b);a.push('" onclick="drivingDirectioCSns.get_log().logAndRedirect(event,\'');a.push(this._siteRoot);a.push(this._propertyDetailAction);a.push("/community-");a.push(c);a.push("/builder-");a.push(b);a.push("/logevent-HOVPFPLN'");a.push(", 'HOVPFPLN',"+c+","+b+'); return false;">See new homes, <br />photos and floor plans</a>');a.push("</p>");var l=this._freeBrochureLink.replace("-text-","Free brochure").replace("-commid-",c).replace("-builderid-",b).replace("-marketid-",m).replace("-logEvent-","HOVFBROCH");a.push("<p>"+l+"</p>");a.push("</div>");var i=a.join(""),j=new MQA.LatLng(o,p);nhsMapIconShadow=new MQA.Icon(this._mqIconShadowPath,0,0);nhsMapIcon=new MQA.Icon(this._mqIconPath,20,26);mqPoint=new MQA.Poi(j,nhsMapIcon);var k=new MQA.Point(-10,-26);mqPoint.setValue("iconOffset",k);mqPoint.setValue("shadow",nhsMapIconShadow);mqPoint.setValue("infoTitleHTML","<strong>"+f+"</strong>");mqPoint.setValue("infoContentHTML",i);mqPoint.setValue("key",c.toString()+b.toString());return mqPoint}};NHS.Scripts.PropertyMap.NearbyComms=function(a){this._communityId=a.communityId;this._builderId=a.builderId;this._planId=a.specId>0?0:a.planId;this._specId=a.specId;this._log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,fromPage:a.fromPage,partnerId:a.partnerId,marketId:a.marketId})};NHS.Scripts.PropertyMap.NearbyComms.prototype={get_log:function(){return this._log},attachClickEventsToCommLinks:function(){$jq(".nhs_NearbyImgBox a").click(function(){attachLogEventToHomesNearby(this)}.bind(this));$jq(".nhs_selector a").click(function(){attachLogEventToHomesNearby(this)}.bind(this))}};function attachLogEventToHomesNearby(a){var c=a._planId>0||a._specId>0,b=c?"HDNBI":"cdhmnrby";a.get_log().logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId)}function setup_propertyMapCollapsible(){$jq("#nhs_propertyMapCollapsibleOpen, #nhs_mapTab").click(function(){$jq("#dd-collapsible").css("display")=="none"&&$jq("#dd-collapsible").toggle("fast");$jq("#nhs_propertyMapCollapsibleOpen").hide();$jq("#nhs_propertyMapCollapsibleClose").show();if(!isMapLoaded){isMapLoaded=true;mapRef.show();logClickEvent_propertyMapExpand()}return false});$jq("#nhs_propertyMapCollapsibleClose").click(function(){$jq("#dd-collapsible").toggle("fast");$jq("#nhs_propertyMapCollapsibleClose").hide();$jq("#nhs_propertyMapCollapsibleOpen").show();return false})}function logClickEvent_propertyMapExpand(){var a=NHS.Scripts.Helper.readCookie("drivingDirectionsClicked");if(!parseInt(a)){if(mapRef._isBasicCommunity||mapRef._isBasicListing){mapRef.get_log().logMultiEvent("bcMapSectionReveal",mapRef._communityId,mapRef._builderId,0,0);$jq.googlepush("Basic Listing","Driving Directions",mapRef._communityId,2,false)}else if(mapRef._specId>0||mapRef._planId>0)mapRef.get_log().logMultiEvent("HDSDD",mapRef._communityId,mapRef._builderId,mapRef._planId,mapRef._specId);else mapRef.get_log().logMultiEvent("CDSDD",mapRef._communityId,mapRef._builderId,0,0);NHS.Scripts.Helper.createCookie("drivingDirectionsClicked",1,0)}};NHS.Scripts.PropertyMap.DrivingDirections=function(a){this._drivingDirectionAction=a.drivingDirectionAction;this._resourceRoot=a.resourceRoot;this._communityId=a.communityId;this._builderId=a.builderId;this._planId=a.specId>0?0:a.planId;this._specId=a.specId;this._isBasicListing=a.isBasicListing==null?false:a.isBasicListing;this._isBasicCommunity=a.isBasicCommunity==null?false:a.isBasicCommunity;this._drivingDirectionsButton="btnUpdate";this._drivingDirectionsTextBox="nhsTxtDate";this._drivingDirectionsDiv="nhsDrivingDirections";this._drivingDirectionsError="nhsWrongAddress";this._showDrivingDirectionsControlId="nhs_BuilderDir";this._drivingDirectionsControlId="nhs_drivingDirections";this._dateTimeBoxId="nhsTxtDate";var b={brandPartnerId:a.brandPartnerId,propertyDetailAction:a.propertyDetailAction,commLat:a.commLat,commLng:a.commLng,startLat:a.startLat,startLng:a.startLng,resourceRoot:a.resourceRoot,freeBrochureLink:a.freeBrochureLink,nearlyCommunities:a.nearlyCommunities,proxyServerPath:"/ServiceProxy/MapQuestJSProxy.aspx",mapWidth:a.mapWidth,mapHeight:a.mapHeight,mapContainerId:"nhs_PropertyMap",siteRoot:a.siteRoot,parent:this,communityId:a.communityId,builderId:a.builderId,planId:a.specId>0?0:a.planId,specId:a.specId,isBasicCommunity:a.isBasicCommunity,basicCommPage:a.basicCommPage,mapUrl:a.mapUrl};this._map=new NHS.Scripts.PropertyMap.Map(b);this._log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,fromPage:a.fromPage,partnerId:a.partnerId,marketId:a.marketId})};NHS.Scripts.PropertyMap.DrivingDirections.prototype={get_log:function(){return this._log},get_map:function(){return this._map},initialize:function(){this._setUpControls()},_setUpControls:function(){var a=this;this._map.preInit();var b=new Date,c=b.getMonth(),d=b.getDate(),e=b.getFullYear();$jq("#nhs_drivingDirections").show();$jq("#tabMQMap a").click(function(){if(!$jq("#nhs_PropertyMap").is(":visible")){$jq("#nhs_PropertyMap").toggle();$jq(this).toggleClass("On");$jq($jq("#tabBuilderMap").find("a")[0]).toggleClass("On");$jq("#nhs_BuilderPropertyMap").toggle();$jq("#nhs_drivingDirections").hide();$jq("#nhs_GetDirections").show();$jq("#nhs_drivingDirections").show()}return false});$jq("#tabBuilderMap a").click(function(){if(!$jq("#nhs_BuilderPropertyMap").is(":visible")){$jq("#nhs_BuilderPropertyMap").toggle();$jq(this).toggleClass("On");$jq($jq("#tabMQMap").find("a")[0]).toggleClass("On");$jq("#nhs_PropertyMap").toggle();$jq("#nhs_drivingDirections").show();$jq("#nhs_GetDirections").hide();$jq("#nhs_drivingDirections").show()}var b=NHS.Scripts.Helper.readCookie("drivingDirectionsBuilderMapClicked");if(!b){if(!a.isBasicListing||!a.isBasicCommunity)if(a._specId>0||a._planId>0)a.get_log().logMultiEvent("HDSDD",a._communityId,a._builderId,a._planId,a._specId);else a.get_log().logMultiEvent("CDSDD",a._communityId,a._builderId,0,0);NHS.Scripts.Helper.createCookie("drivingDirectionsBuilderMapClicked",1,0)}return false});$jq("#"+this._drivingDirectionsTextBox).blur(function(){var b=$jq($jq("#nhsRequestAppointment").find(".btn_NhsMapSend")[0]),a=b.attr("href"),c=a.substring(a.indexOf("=")+1,a.indexOf("&"));b.attr("href",encodeURI(a.replace(c,$jq(this).val()==""?"***":$jq(this).val())));b=$jq($jq("#nhsRequestAppointment").find(".btn_NhsMapSendVWO")[0]);a=b.attr("href");c=a.substring(a.indexOf("=")+1,a.indexOf("&"));b.attr("href",encodeURI(a.replace(c,$jq(this).val()==""?"***":$jq(this).val())))});jQuery("#nhsFakeDate").datepicker({minDate:new Date(e,c,d),beforeShow:function(){field=jQuery("#"+this._drivingDirectionsTextBox);var a=field.offset().left,b=field.offset().top+30;setTimeout(function(){jQuery("#ui-datepicker-div").css({position:"absolute",top:b+"px",left:a+"px"})},1)}.bind(this),showOn:"button",buttonImageOnly:true,buttonImage:this._resourceRoot+"globalresourcesmvc/default/images/icons/calendar.png",onSelect:function(i){var f=jQuery(jQuery(".nhs_RequestAppointment").find(".btn_NhsMapSend")[0]),e=$jq($jq("#nhsRequestAppointment").find(".btn_NhsMapSendVWO")[0]),a=jQuery("#"+this._drivingDirectionsTextBox).val();if(a!=""&&a.indexOf("Date: ")!=-1)a=a.substring(0,a.indexOf("Date: "));var b=jQuery.trim(a)+(a==""?"":", ")+"Date: "+i.replace("/","-").replace("/","-");b=b.replace(",,",",");jQuery("#"+this._drivingDirectionsTextBox).val(b);b=b.replace("Date: ","Requested appointment date: ");var c=f.attr("href"),d=e.attr("href");if(typeof c!="undefined"){var h=c.substring(c.indexOf("=")+1,c.indexOf("&"));f.attr("href",encodeURI(c.replace(h,b)))}if(typeof linkHrefwvo!="undefined"){var g=d.substring(d.indexOf("=")+1,d.indexOf("&"));e.attr("href",encodeURI(d.replace(g,b)))}return false}.bind(this)});$jq("#"+this._drivingDirectionsButton).click(function(){if(this._isBasicCommunity){this.get_log().logMultiEvent("bcRoute",this._communityId,this._builderId,this._planId,this._specId);$jq.googlepush("Basic Listing","Driving Route",this._communityId,4,false)}else if(!this._isBasicListing)if(this._specId>0||this._planId>0)this.get_log().logMultiEvent("HDSHWRT",this._communityId,this._builderId,this._planId,this._specId);else this.get_log().logMultiEvent("CDSHWRT",this._communityId,this._builderId,0,0);$jq.ajax({url:this._drivingDirectionAction,type:"POST",data:{communityId:this._communityId,street:$jq("#nhsTxtStreeAddress").val(),cityOrZip:$jq("#nhsTxtCityOrZip").val(),check:"true",isBasicListing:this._isBasicListing},success:function(a){if(a.indexOf("Unable")!=-1)$jq("#"+this._drivingDirectionsError).show();else{var b=(screen.width-840)/2,c=(screen.height-600)/2;$jq("#"+this._drivingDirectionsError).hide();var d=this._drivingDirectionAction+"?communityId="+this._communityId+"&street="+$jq("#nhsTxtStreeAddress").val()+"&cityOrZip="+$jq("#nhsTxtCityOrZip").val()+"&check=false&isBasicListing="+this._isBasicListing;window.open(d,"_blank","width=840,height=600,top="+c+",left="+b+",menubar=yes,status=no,location=no,toolbar=no,scrollbars=yes")}}.bind(this),error:function(c,b,a){NHS.Scripts.Helper.logError(a,this._drivingDirectionAction,"Error on Property Map")}});return false}.bind(this))}};NHS.Scripts.Loggin=function(a){this._parameters=a};NHS.Scripts.Loggin.prototype={initialize:function(){var a=this;$jq("#btnFreeBrochure").live("click",function(){var b=$jq(this).is(".popup")?"Image Viewer - Main Form":(a._parameters.specId==0&&a._parameters.planId==0?"Community":"Home")+" - Gallery CTA Main Form",c=$jq(this).is(".popup")?"Submit Form - Free Brochure":"Submit Form - Free Brochure";$jq.googlepush("Lead Events",b,c)});$jq("#SendAlerts").live("change",function(){$jq.googlepushCheckBox(this,"Lead Events",(a._parameters.specId==0&&a._parameters.planId==0?"Community":"Home")+" - Gallery CTA Main Form","Choose Option - Free Info")});$jq("#btn_NhsScheduleAppointment").click(function(){$jq.googlepush("Lead Events",(a._parameters.specId==0&&a._parameters.planId==0?"Community":"Home")+" - CTA Next Steps Appointment","Open Form - Free Brochure")});$jq("#btnUpdate").click(function(){$jq.googlepush((a._parameters.specId==0&&a._parameters.planId==0?"Community":"Home")+" Detail Events",(a._parameters.specId==0&&a._parameters.planId==0?"Community":"Home")+" - Map","Show Route")});$jq("#btn_NhsMapSend").click(function(){$jq.googlepush("Lead Events",(a._parameters.specId==0&&a._parameters.planId==0?"Community":"Home")+" - CTA Request Appointment","Open Form - Free Brochure")});$jq("#nhs_PhoneLink").click(function(){$jq.googlepush((a._parameters.specId==0&&a._parameters.planId==0?"Community":"Home")+" Detail Events",(a._parameters.specId==0&&a._parameters.planId==0?"Community":"Home")+" - Gallery","See Phone Numbers");a.ShowPhoneNumber("nhs_LnkPhoneNum","nhs_FormPhone");return false});$jq("#nhs_FormIPhone a, .Iphone_number a").click(function(){a.LogClick("LogIPhoneNumber")});$jq("#nhs_PhoneNumHeaderLink").click(function(){a.ShowPhoneNumber("nhs_LnkPhoneNumHeader","nhs_FormPhoneHeader");return false});$jq(".MortgageRates").click(function(){$jq.googlepush("Community Detail Events","Community - Gallery","Get Mortgage Rates");a.LogClick("LogMortgageRates")});$jq("#MortgageMatch").click(function(){a.LogClick("LogMortgageMatch")});$jq(".nhs_FormMapLink  li a").click(function(){$jq("#nhs_propertyMapCollapsibleOpen").click()});$jq("#nhs_StepsPrintLink").click(function(){var b=a._parameters.specId==0&&a._parameters.planId==0?"Community":"Home";$jq.googlepush(b+" Detail Events",b+" - Next Steps","Print This Page");window.print();a.LogClick("LogNextStepsPrint")});$jq(".LogNextStepsBrochure").click(function(){a.LogClick("LogNextStepsBrochure")});$jq("#nhs_LnkNextStepsPhoneNum2").click(function(){var b=$jq("#nhs_LnkNextStepsPhoneNum");if(b===null)return;b.hide();$jq.googlepush("Community Detail Events","Community - Next Steps","See Phone Numbers");$jq("#nhs_NextStepsFormPhone").show();jQuery.SetDataLayerPair("sitePhoneNumV");a.LogClick("LogNextStepsSeePhone")});$jq("td.estaradefaultstyle a").live("click",function(){var a=$(this).find("img");if(a.length==1)a.attr("src")==" http: //as00.estara.com/OneCC/200106300209/float_button.gif"&&$jq.googlepush("Chat Links","Tab","Chat Now")})},LogNextStepsSave:function(){var a=this;a.LogClick("LogNextStepsSave")},ShowPhoneNumber:function(b,c){var a=$jq("#"+b);if(a===null)return;a.hide();$jq("#"+c).show();jQuery.SetDataLayerPair("sitePhoneNumV");this.LogClick("LogPhoneNumber")},LogClick:function(c){var a=this,b={communityId:a._parameters.commId,builderId:a._parameters.builderId,planId:a._parameters.planId,specId:a._parameters.specId};$jq.ajax({type:"POST",url:a._parameters.logActionMethodUrl+c,data:b,dataType:"json"})}};function onTemplateLoaded(a){_bcExperienceID=a;homeDetail.get_mp().loadMediaPlayer("home")}NHS.Scripts.HomeDetail.HomeDetails=function(a){this._parameters=a;this.displayFullWidthGallery=a.displayFullWidthGallery;this.method=a.method;this._communityId=a.communityId;this._builderId=a.builderId;this._planId=a.specId>0?0:a.planId;this._specId=a.specId;this._log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,fromPage:a.fromPage,partnerID:a.partnerId,marketId:a.marketId});this._type=a.fromPage;this._showSocialIcons=a.showSocialIcons;_commIdHD=a.communityId;_builderIdHD=a.builderId;a.galleryParams.logger=this._log;this._mp=new NHS.Scripts.MediaPlayerVideo(a.galleryParams);a.viewerParams.logger=this._log;this.imageViewer=new NHS.Scripts.ImageViewer(a.viewerParams);var c=document.createElement("script");c.src="https://www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(c,b);this.googlePropertyMap=new NHS.Scripts.GooglePropertyMap(a.mapParametes);this._nearbyHomes=new NHS.Scripts.PropertyMap.NearbyComms(a.carouselParams);this._homeCarousel=new NHS.Scripts.HomeDetail.Carousel(a.carouselParams);InitGallery(a.galleryParams)};NHS.Scripts.HomeDetail.HomeDetails.prototype={get_log:function(){return this._log},get_mp:function(){return this._mp},get_commId:function(){return this._communityId},get_builderId:function(){return this._builderId},get_plan:function(){return this._planId},get_spec:function(){return this._specId},initialize:function(){this._setUpControls(),this.googlePropertyMap.init();this._homeCarousel.initialize();this._nearbyHomes.attachClickEventsToCommLinks();this._updateAdsPosition()},_setUpControls:function(){if(this._showSocialIcons.toLowerCase()=="false"){$jq("#addthis_bookmark").hide();$jq(".addthis_separator").hide();$jq(".addthis_button_facebook").hide();$jq(".addthis_button_twitter").hide();$jq(".nhs_DetailSmBrandImg").hide();$jq(".builder_link").hide();$jq("#addthis_more_sharing").hide();$jq("#addthis_bookmark_bottom").hide();$jq(".nhs_MediaShareOverlay, .nhs_PinterestOverlayBig").hide();$jq("#brochure_pro_step2").hide()}$jq("#nhs_NextStepsBackSearch").attr("href",$jq(".nhs_BreadcrumbBackSearch").attr("href"));if(this._type.indexOf("v3")!=-1||this._type.indexOf("v4")!=-1){$jq("#nhs_AdColumn").css("margin-top","118px");$jq("#mv_AdColumn").css("margin-top","118px")}$jq("#btnFreeBrochure").hover(function(){$jq(this).addClass("btn_FreeBrochureHover")},function(){$jq(this).removeClass("btn_FreeBrochureHover")});$jq("#button_pin_it a").click(function(){setTimeout(function(){homeDetail.get_log().logEvent("HDSMS",homeDetail.get_commId(),homeDetail.get_builderId(),homeDetail.get_plan(),homeDetail.get_spec())},1)});if(this.displayFullWidthGallery&&$jq(".nhs_MediaPlayerMaximize").length>0&&(this._parameters.galleryParams.mediaObjs.length>0||this._parameters.galleryParams.externalLinks.length>0)){this.imageViewer.initialize();$jq(document).bind("keydown",function(a){a=a||window.event;a.keyCode==27&&this._closePopupMediaViewer()}.bind(this));$jq(".nhs_PlayerPopupClose").click(function(){this._closePopupMediaViewer()}.bind(this));$jq("#nhs_mediaPlayerPopup").css("z-index","10000").height($jq(document).height());$jq(".nhs_MediaPlayerMaximize span").click(function(){this._openGalleryPopup()}.bind(this))}else{$jq(".nhs_MediaShareOverlay").css("right","5px");$jq(".nhs_MediaPlayerMaximize").hide();$jq("#nhs_mediaPlayerPopup").hide()}$jq("#nhs_detailDescriptionToggle").click(function(){if($jq("#nhs_detailDescriptionToggle").text().trim()=="...more"){$jq("#nhs_detailDescriptionToggle").text("less");$jq("#nhsDetailDescriptionArea").html("");$jq("#nhsDetailDescriptionArea").html(Encoder.htmlDecode(description));return false}else{$jq("#nhs_detailDescriptionToggle").text("...more");$jq("#nhsDetailDescriptionArea").html("");$jq("#nhsDetailDescriptionArea").html(Encoder.htmlDecode(chunkedDescription));return false}})},_openGalleryPopup:function(){$jq.googlepush("Image Viewer","Community - Gallery","Image Viewer - Expand");$jq("body").css("overflow","hidden");disableScrollKeys();this.imageViewer.scaleSlider();$jq(".nhs_PlayerPopupClose").removeClass("leadform");this.isMediaPlayerOpened=true;$jq("#nhs_mediaPlayerPopup").css("padding-top",$jq(document).scrollTop()+"px").show();$jq("#btnFreeBrochure").addClass("popup");$jq("#divLeadMain").appendTo("#nhs_playerLeadForm")},_closePopupMediaViewer:function(){$jq("body").css("overflow","auto");$jq("#nhs_mediaPlayerPopup").hide();$jq(".validation-summary-errors").hide();$jq("#divLeadMain").appendTo(".nhs_DetailsFormWrapper>div:first");$jq("#btnFreeBrochure").removeClass("popup");this.imageViewer.stopVideo();this.isMediaPlayerOpened=false;enableScrollKeys();!$jq(".nhs_PlayerPopupClose").is(".leadform")&&$jq.googlepush("Image Viewer","Image Viewer","Image Viewer - Close")},_updateAdsPosition:function(){if(jQuery("#nhs_DetailsMain").length>0&jQuery("#nhs_AdColumn").length>0){var a=jQuery("#nhs_DetailsMain").height();this._adsHeight=jQuery("#nhs_AdColumn").height();var d=a+jQuery("#nhs_AdColumn").offset().top,f=a-this._adsHeight-10,c=this._adsHeight+jQuery("#nhs_AdColumn").offset().top,b=jQuery(window).height(),e;jQuery(window).scroll(function(){var g=jQuery(document).scrollTop();a=jQuery("#nhs_DetailsMain").height();d=a+jQuery("#nhs_AdColumn").offset().top;f=a-this._adsHeight-10;c=this._adsHeight+jQuery("#nhs_AdColumn").offset().top;b=jQuery(window).height();e=g+b;if(d>c)if(g>=c-b)if(e>d){jQuery("#nhs_AdColumn > div").removeClass("fixedBottom");jQuery("#nhs_AdColumn > div").addClass("absolute");jQuery("#nhs_AdColumn > div").css("top",f+"px");jQuery("#nhs_AdColumn > div").css("bottom","auto")}else{jQuery("#nhs_AdColumn > div").removeClass("absolute");jQuery("#nhs_AdColumn > div").addClass("fixedBottom");jQuery("#nhs_AdColumn > div").css("top","auto");jQuery("#nhs_AdColumn > div").css("bottom",0)}else{jQuery("#nhs_AdColumn > div").removeClass("fixedBottom");jQuery("#nhs_AdColumn > div").removeClass("absolute");jQuery("#nhs_AdColumn > div").css("top","auto");jQuery("#nhs_AdColumn > div").css("bottom","auto")}}.bind(this))}},SaveHome:function(){var a=this;$jq.post(a.method,null,function(b){a.ShowSuccessMessage(b);if(b.data==undefined){$jq("#nhs_NextStepsSaveThisItem").removeAttr("onclick");$jq("#nhs_NextStepsSaveThisItem").removeAttr("href");$jq("#pSaveThisItem").html('<span class="nhs_ItemSaved" id="nhs_NextStepsSaveThisItem">Saved to your profile</span>');$jq("#liSaveToPlanner").html('<span id="nhs_SaveThisItem">Saved</span>')}}.bind(this),"json")},NextStepsSaveHome:function(){this.SaveHome();loggin.LogNextStepsSave()},ShowSuccessMessage:function(a){if(a.data!=undefined)window.location.href=a.redirectUrl;else{$jq("#nhs_SaveThisItem").hide();$jq("#SuccessMessage").show()}}};NHS.Scripts.HomeDetail.Carousel=function(a){this._communityId=a.communityId;this._builderId=a.builderId;this._planId=a.specId>0?0:a.planId;this._specId=a.specId;this._totalImagesOnFloorPlanSection=2;this._partnerId=a.partnerId;this._log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,fromPage:a.fromPage,partnerId:a.partnerId,marketId:a.marketId})};NHS.Scripts.HomeDetail.Carousel.prototype={get_log:function(){return this._log},get_commId:function(){return this._communityId},get_builderId:function(){return this._builderId},get_plan:function(){return this._planId},get_spec:function(){return this._specId},initialize:function(){this._setUpControls(),this._initSimilarHomes()},_setUpControls:function(){$jq(".nhs_SimilarHomePlanCarousel").jCarouselLite({btnNext:".nhs_SimilarHomePlanCarouselNext",btnPrev:".nhs_SimilarHomePlanCarouselPrev",visible:4,circular:true});var a=$jq(".nhs_FloorPlanCarousel").find("a");if(a.length==1)return;$jq(".nhs_FloorPlanCarousel").jCarouselLite({btnNext:".nhs_FloorPlanImageNext",btnPrev:".nhs_FloorPlanImagePrev",visible:this._totalImagesOnFloorPlanSection,circular:true,start:0});var a=$jq(".nhs_FloorPlanCarousel").find("a");a.each(function(b){if(b<this._totalImagesOnFloorPlanSection||b>=a.size()-this._totalImagesOnFloorPlanSection){this._partnerId!=88&&$jq(this).removeClass("thickbox");$jq(this).removeAttr("rel")}})},_initSimilarHomes:function(){$jq("#lnkSimilarAvailableHomes").click(function(){this.get_log().logMultiEvent("COMDETSIM",this._communityId,this._builderId,this._planId,this._specId)}.bind(this));$jq("#nhs_expandCollapseMarketingSection").click(function(){if($jq("#nhs_expandCollapseMarketingSection").hasClass("plus")){$jq("#nhs_expandCollapseMarketingSection").removeClass("plus");$jq("#nhs_expandCollapseMarketingSection").addClass("minus");$jq("#nhs_expandCollapseLink").text("(click to collapse)");$jq("#nhs_crossMarketinglist").show()}else{$jq("#nhs_expandCollapseMarketingSection").removeClass("minus");$jq("#nhs_expandCollapseMarketingSection").addClass("plus");$jq("#nhs_expandCollapseLink").text("(click to expand)");$jq("#nhs_crossMarketinglist").hide()}return false});$jq("#nhs_expandCollapseLink").click(function(){if($jq("#nhs_expandCollapseMarketingSection").hasClass("plus")){$jq("#nhs_expandCollapseMarketingSection").removeClass("plus");$jq("#nhs_expandCollapseMarketingSection").addClass("minus");$jq("#nhs_expandCollapseLink").text("(click to collapse)");$jq("#nhs_crossMarketinglist").show()}else{$jq("#nhs_expandCollapseMarketingSection").removeClass("minus");$jq("#nhs_expandCollapseMarketingSection").addClass("plus");$jq("#nhs_expandCollapseLink").text("(click to expand)");$jq("#nhs_crossMarketinglist").hide()}return false})}};NHS.Scripts.SendToPhone=function(){};NHS.Scripts.SendToPhone.prototype={initialize:function(a){if(a===undefined)a="Phone";$jq("#"+a).mask("(999) 999-9999");$jq("#"+a).focus();$jq("#Cancel").click(tb_remove)}};(function(a){a.fn.slides=function(b){b=a.extend({},a.fn.slides.option,b);return this.each(function(){a("."+b.container,a(this)).children().wrapAll('<div class="slides_control"/>');var d=a(this),c=a(".slides_control",d),p=c.children().size(),h=c.children().outerWidth(),x=c.children().outerHeight(),g=b.start-1,k=b.effect.indexOf(",")<0?b.effect:b.effect.replace(" ","").split(",")[0],u=b.effect.indexOf(",")<0?k:b.effect.replace(" ","").split(",")[1],e=0,j=0,m=0,f=0,s,l,o,q,z,t,v,r;if(p<2){a("."+b.container,a(this)).fadeIn(b.fadeSpeed,b.fadeEasing,function(){s=true;b.slidesLoaded()});a("."+b.next+", ."+b.prev).fadeOut(0);return false}function i(g,k,i){if(!l&&s){l=true;switch(g){case "next":j=f;e=f+1;e=p===e?0:e;q=h*2;g=-h*2;f=e;break;case "prev":j=f;e=f-1;e=e===-1?p-1:e;q=0;g=0;f=e;break;case "pagination":e=parseInt(i,10);j=a("."+b.paginationClass+" li."+b.currentClass+" a",d).attr("href").match("[^#/]+$");if(e>j){q=h*2;g=-h*2}else{q=0;g=0}f=e}b.animationStart(f);if(k==="fade")if(b.crossfade)c.children(":eq("+e+")",d).css({zIndex:10}).fadeIn(b.fadeSpeed,b.fadeEasing,function(){if(b.autoHeight)c.animate({height:c.children(":eq("+e+")",d).outerHeight()},b.autoHeightSpeed,function(){c.children(":eq("+j+")",d).css({display:"none",zIndex:0});c.children(":eq("+e+")",d).css({zIndex:0});b.animationComplete(e+1);l=false});else{c.children(":eq("+j+")",d).css({display:"none",zIndex:0});c.children(":eq("+e+")",d).css({zIndex:0});b.animationComplete(e+1);l=false}});else c.children(":eq("+j+")",d).fadeOut(b.fadeSpeed,b.fadeEasing,function(){if(b.autoHeight)c.animate({height:c.children(":eq("+e+")",d).outerHeight()},b.autoHeightSpeed,function(){c.children(":eq("+e+")",d).fadeIn(b.fadeSpeed,b.fadeEasing)});else c.children(":eq("+e+")",d).fadeIn(b.fadeSpeed,b.fadeEasing,function(){a.browser.msie&&a(this).get(0).style.removeAttribute("filter")});b.animationComplete(e+1);l=false});else{c.children(":eq("+e+")").css({left:q,display:"block"});if(b.autoHeight)c.animate({left:g,height:c.children(":eq("+e+")").outerHeight()},b.slideSpeed,b.slideEasing,function(){c.css({left:-h});c.children(":eq("+e+")").css({left:h,zIndex:5});c.children(":eq("+j+")").css({left:h,display:"none",zIndex:0});b.animationComplete(e+1);l=false});else c.animate({left:g},b.slideSpeed,b.slideEasing,function(){c.css({left:-h});c.children(":eq("+e+")").css({left:h,zIndex:5});c.children(":eq("+j+")").css({left:h,display:"none",zIndex:0});b.animationComplete(e+1);l=false})}if(b.pagination){a("."+b.paginationClass+" li."+b.currentClass,d).removeClass(b.currentClass);a("."+b.paginationClass+" li:eq("+e+")",d).addClass(b.currentClass);a("#slides_count > span").html(f+1)}}}function w(){clearInterval(d.data("interval"))}function n(){if(b.pause){clearTimeout(d.data("pause"));clearInterval(d.data("interval"));v=setTimeout(function(){clearTimeout(d.data("pause"));r=setInterval(function(){i("next",k)},b.play);d.data("interval",r)},b.pause);d.data("pause",v)}else w()}if(p<2)return;if(g<0)g=0;if(g>p)g=p-1;if(b.start)f=g;b.randomize&&c.randomize();a("."+b.container,d).css({overflow:"hidden",position:"relative"});c.children().css({position:"absolute",top:0,left:c.children().outerWidth(),zIndex:0,display:"none"});c.css({position:"relative",width:h*3,height:x,left:-h});a("."+b.container,d).css({display:"block"});if(b.autoHeight){c.children().css({height:"auto"});c.animate({height:c.children(":eq("+g+")").outerHeight()},b.autoHeightSpeed)}if(b.preload&&c.find("img:eq("+g+")").length){a("."+b.container,d).css({background:"url("+b.preloadImage+") no-repeat 50% 50%"});var y=c.find("img:eq("+g+")").attr("src")+"?"+(new Date).getTime();if(a("img",d).parent().attr("class")!="slides_control")t=c.children(":eq(0)")[0].tagName.toLowerCase();else t=c.find("img:eq("+g+")");c.find("img:eq("+g+")").attr("src",y).load(function(){c.find(t+":eq("+g+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){a(this).css({zIndex:5});a("."+b.container,d).css({background:""});s=true;b.slidesLoaded()})})}else c.children(":eq("+g+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){s=true;b.slidesLoaded()});if(b.bigTarget){c.children().css({cursor:"pointer"});c.children().click(function(){i("next",k);return false})}if(b.hoverPause&&b.play){c.bind("mouseover",function(){w()});c.bind("mouseleave",function(){n()})}if(b.generateNextPrev){a("."+b.container,d).after('<a href="#" class="'+b.prev+'">Prev</a>');a("."+b.prev,d).after('<a href="#" class="'+b.next+'">Next</a>')}if(b.bigNextPrev){a("."+b.container,d).after('<a href="#" class="big'+b.prev+'">Prev</a>');a(".big"+b.prev,d).after('<a href="#" class="big'+b.next+'">Next</a>')}a("."+b.next,d).click(function(a){a.preventDefault();b.play&&n();i("next",k)});a("."+b.prev,d).click(function(a){a.preventDefault();b.play&&n();i("prev",k)});a(".big"+b.next,d).click(function(a){a.preventDefault();b.play&&n();i("next",k)});a(".big"+b.prev,d).click(function(a){a.preventDefault();b.play&&n();i("prev",k)});if(b.generateCount){c.children().each(function(){m++});d.prepend('<p id="slides_count"><span></span> of '+m+"</p>")}a("#slides_count > span").html(f+1);if(b.generatePagination){if(b.prependPagination)d.prepend("<ul class="+b.paginationClass+"></ul>");else d.append("<ul class="+b.paginationClass+"></ul>");c.children().each(function(){a("."+b.paginationClass,d).append('<li><a href="#'+m+'">'+(m+1)+"</a></li>");m++})}else a("."+b.paginationClass+" li a",d).each(function(){a(this).attr("href","#"+m);m++});a("."+b.paginationClass+" li:eq("+g+")",d).addClass(b.currentClass);a("."+b.paginationClass+" li a",d).click(function(){b.play&&n();o=a(this).attr("href").match("[^#/]+$");f!=o&&i("pagination",u,o);return false});a("a.link",d).click(function(){b.play&&n();o=a(this).attr("href").match("[^#/]+$")-1;f!=o&&i("pagination",u,o);return false});if(b.play){r=setInterval(function(){i("next",k)},b.play);d.data("interval",r)}})};a.fn.slides.option={preload:false,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:false,next:"next",prev:"prev",pagination:true,generatePagination:true,prependPagination:false,paginationClass:"pagination",currentClass:"current",generateCount:false,fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:false,randomize:false,play:0,pause:0,hoverPause:false,autoHeight:false,autoHeightSpeed:350,bigTarget:false,bigNextPrev:false,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}};a.fn.randomize=function(b){function c(){return Math.round(Math.random())-.5}return a(this).each(function(){var g=a(this),e=g.children(),f=e.length;if(f>1){e.hide();var d=[];for(i=0;i<f;i++)d[d.length]=i;d=d.sort(c);a.each(d,function(f,d){var a=e.eq(d),c=a.clone(true);c.show().appendTo(g);b!==undefined&&b(a,c);a.remove()})}})}})(jQuery);(function ($) {                                          // Compliant with jquery.noConflict()
    $.fn.jCarouselLite = function (o) {
        o = $.extend({
            btnPrev: null,
            btnNext: null,
            btnGo: null,
            mouseWheel: false,
            auto: null,

            speed: 200,
            easing: null,

            vertical: false,
            circular: true,
            visible: 3,
            start: 0,
            scroll: 1,
            resultSetLength: 3,

            beforeStart: null,
            afterEnd: null
        }, o || {});

        return this.each(function () {                           // Returns the element collection. Chainable.

            var running = false, animCss = o.vertical ? "top" : "left", sizeCss = o.vertical ? "height" : "width";
            var div = $(this), ul = $("ul", div), tLi = $("li", ul), tl = tLi.size(), v = o.visible;

            // Patch to fix the problem with the vertical scroll by Alex (it is a fix to the patch that was made to the control originally bc it doesnt support the desired functionality) case 44311
            var tempv = o.vertical ? 3 : v; // if vertical o.visible = 1 (patch to use it on comm results) so set it to 3 that is the size of the visible items

            if (o.circular && tl > tempv) { // execute the circular logic only if there are items to scroll
                // if it is vertical and the number of items is not exact to the scroll page size, add empty items to fill the page size so it works as normally
                if (o.vertical) {
                    var gap = 3 - (tl % 3), emptyLi = tLi.slice(tl - 1).clone().empty(), i = 0; // compute how many items need to fit the scroll page size, and initialize the empty item based on an existing il item

                    // add the empty il elements to fit the scroll page size
                    for (i = 0; i < gap && gap != 3; i++) {
                        ul.append(emptyLi.css('visibility', 'hidden').clone());
                    }

                    tLi = $("li", ul); tl = tLi.size(); // recompute the list size
                }

                // execute the same logic (duplicate the last N visible items in the begining and the first N visible items in the end to emulate the infinite effect
                ul.prepend(tLi.slice(tl - tempv).clone()).append(tLi.slice(0, tempv).clone());
                o.start += tempv;
            }

            div.hover(function () {
                div.hovered = true;
            }, function () {
                div.hovered = false;
            });

            var li = $("li", ul), itemLength = o.vertical ? li.size() / o.resultSetLength : li.size(), curr = o.start;
            div.css("visibility", "visible");

            li.css({ overflow: "hidden", float: "left" });
            ul.css({ margin: "0", padding: "0", position: "relative", "list-style-type": "none", "z-index": "1" });
            div.css({ overflow: "hidden", position: "relative", "z-index": "2", left: "0px" });

            var liSize = o.vertical ? height(li) : width(li);   // Full li size(incl margin)-Used for animation
            var ulSize = liSize * itemLength + 40;                   // size of full ul(total length, not just for the visible items)
            var divSize = liSize * v;                           // size of entire div(total length for just the visible items)

            li.css({ width: li.width(), height: li.height() });
            ul.css(sizeCss, ulSize + "px").css(animCss, -(curr * liSize));

            div.css(sizeCss, divSize + "px");                     // Width of the DIV. length of visible images

            if (o.btnPrev)
                $(o.btnPrev).click(function () {
                    div.navigated = true;
                    return go(curr - o.scroll);
                });

            if (o.btnNext)
                $(o.btnNext).click(function () {
                    div.navigated = true;
                    return go(curr + o.scroll);
                });

            if (o.btnGo)
                $.each(o.btnGo, function (i, val) {
                    $(val).click(function () {
                        div.navigated = true;
                        return go(o.circular ? o.visible + i : i);
                    });
                });

            if (o.mouseWheel && div.mousewheel)
                div.mousewheel(function (e, d) {
                    return d > 0 ? go(curr - o.scroll) : go(curr + o.scroll);
                });

            if (o.auto && tl > tempv) // execute the auto start logic only if there are items to scroll
                setInterval(function () {
                    if (!div.hovered)
                        go(curr + o.scroll);
                }, o.auto + o.speed);

            function vis() {
                return li.slice(curr).slice(0, v);
            };

            function go(to) {
                if (!running) {

                    if (o.beforeStart)
                        o.beforeStart.call(this, vis());

                    if (o.circular) {            // If circular we are in first or last, then goto the other end

                        if (to <= o.start - v - 1) {           // If first, then goto last
                            ul.css(animCss, -((itemLength - (v * 2)) * liSize) + "px");
                            // If "scroll" > 1, then the "to" might not be equal to the condition; it can be lesser depending on the number of elements.
                            curr = to == o.start - v - 1 ? itemLength - (v * 2) - 1 : itemLength - (v * 2) - o.scroll;
                        } else if (to >= itemLength - v + 1) { // If last, then goto first
                            ul.css(animCss, -((v) * liSize) + "px");
                            // If "scroll" > 1, then the "to" might not be equal to the condition; it can be greater depending on the number of elements.
                            curr = to == itemLength - v + 1 ? v + 1 : v + o.scroll;
                        } else curr = to;
                    } else {                    // If non-circular and to points to first or last, we just return.
                        if (to < 0 || to > itemLength - v) return;
                        else curr = to;
                    }                           // If neither overrides it, the curr will still be "to" and we can proceed.

                    running = true;

                    ul.animate(
                    animCss == "left" ? { left: -(curr * liSize)} : { top: -(curr * liSize) }, o.speed, o.easing,
                    function () {
                        if (o.afterEnd)
                            o.afterEnd.call(this, vis());
                        running = false;
                    }
                );
                    // Disable buttons when the carousel reaches the last/first, and enable when not
                    if (!o.circular) {
                        $(o.btnPrev).removeClass("carousel-prev-disabled");
                        $(o.btnNext).removeClass("carousel-next-disabled");
                        if (curr - o.scroll < 0) $(o.btnPrev).addClass("carousel-prev-disabled");
                        if (curr + o.scroll > itemLength - v) $(o.btnNext).addClass("carousel-next-disabled");
                    }

                }
                return false;
            };
        });
    };

    function css(el, prop) {
        return parseInt($.css(el[0], prop)) || 0;
    };
    function width(el) {
        return el[0].offsetWidth + css(el, 'marginLeft') + css(el, 'marginRight');
    };
    function height(el) {
        return el[0].offsetHeight + css(el, 'marginTop') + css(el, 'marginBottom');
    };

})(jQuery);;var player;$jq(document).ready(function(){var b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)});function onYouTubeIframeAPIReady(){}function createPlayer(a,b,d,c){player=new YT.Player(a,{height:c,width:d,videoId:b,events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerReady(a){a.target.playVideo()}function onPlayerStateChange(){};(function(g,f,b,e,c,d,o){$Jssor$=g.$Jssor$=g.$Jssor$||{};new function(){};var m=function(){var b=this,a={};b.$On=b.addEventListener=function(b,c){if(typeof c!="function")return;if(!a[b])a[b]=[];a[b].push(c)};b.$Off=b.removeEventListener=function(e,d){var b=a[e];if(typeof d!="function")return;else if(!b)return;for(var c=0;c<b.length;c++)if(d==b[c]){b.splice(c,1);return}};b.i=function(e){var c=a[e],d=[];if(!c)return;for(var b=1;b<arguments.length;b++)d.push(arguments[b]);for(var b=0;b<c.length;b++)try{c[b].apply(g,d)}catch(f){}}},k;(function(){k=function(a,b){this.x=typeof a=="number"?a:0;this.y=typeof b=="number"?b:0}})();var l=g.$JssorEasing$={$EaseLinear:function(a){return a},$EaseGoBack:function(){return 1-b.abs(2-1)},$EaseSwing:function(a){return -b.cos(a*b.PI)/2+.5},$EaseInQuad:function(a){return a*a},$EaseOutQuad:function(a){return -a*(a-2)},$EaseInOutQuad:function(a){return (a*=2)<1?1/2*a*a:-1/2*(--a*(a-2)-1)},$EaseInCubic:function(a){return a*a*a},$EaseOutCubic:function(a){return (a-=1)*a*a+1},$EaseInOutCubic:function(a){return (a*=2)<1?1/2*a*a*a:1/2*((a-=2)*a*a+2)},$EaseInQuart:function(a){return a*a*a*a},$EaseOutQuart:function(a){return -((a-=1)*a*a*a-1)},$EaseInOutQuart:function(a){return (a*=2)<1?1/2*a*a*a*a:-1/2*((a-=2)*a*a*a-2)},$EaseInQuint:function(a){return a*a*a*a*a},$EaseOutQuint:function(a){return (a-=1)*a*a*a*a+1},$EaseInOutQuint:function(a){return (a*=2)<1?1/2*a*a*a*a*a:1/2*((a-=2)*a*a*a*a+2)},$EaseInSine:function(a){return 1-b.cos(a*b.PI/2)},$EaseOutSine:function(a){return b.sin(a*b.PI/2)},$EaseInOutSine:function(a){return -1/2*(b.cos(b.PI*a)-1)},$EaseInExpo:function(a){return a==0?0:b.pow(2,10*(a-1))},$EaseOutExpo:function(a){return a==1?1:-b.pow(2,-10*a)+1},$EaseInOutExpo:function(a){return a==0||a==1?a:(a*=2)<1?1/2*b.pow(2,10*(a-1)):1/2*(-b.pow(2,-10*--a)+2)},$EaseInCirc:function(a){return -(b.sqrt(1-a*a)-1)},$EaseOutCirc:function(a){return b.sqrt(1-(a-=1)*a)},$EaseInOutCirc:function(a){return (a*=2)<1?-1/2*(b.sqrt(1-a*a)-1):1/2*(b.sqrt(1-(a-=2)*a)+1)},$EaseInElastic:function(a){if(!a||a==1)return a;var c=.3,d=.075;return -(b.pow(2,10*(a-=1))*b.sin((a-d)*2*b.PI/c))},$EaseOutElastic:function(a){if(!a||a==1)return a;var c=.3,d=.075;return b.pow(2,-10*a)*b.sin((a-d)*2*b.PI/c)+1},$EaseInOutElastic:function(a){if(!a||a==1)return a;var c=.45,d=.1125;return (a*=2)<1?-.5*b.pow(2,10*(a-=1))*b.sin((a-d)*2*b.PI/c):b.pow(2,-10*(a-=1))*b.sin((a-d)*2*b.PI/c)*.5+1},$EaseInBack:function(a){var b=1.70158;return a*a*((b+1)*a-b)},$EaseOutBack:function(a){var b=1.70158;return (a-=1)*a*((b+1)*a+b)+1},$EaseInOutBack:function(a){var b=1.70158;return (a*=2)<1?1/2*a*a*(((b*=1.525)+1)*a-b):1/2*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},$EaseInBounce:function(a){return 1-l.$EaseOutBounce(1-a)},$EaseOutBounce:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},$EaseInOutBounce:function(a){return a<1/2?l.$EaseInBounce(a*2)*.5:l.$EaseOutBounce(a*2-1)*.5+.5},$EaseInWave:function(a){return 1-b.cos(a*b.PI*2)},$EaseOutWave:function(a){return b.sin(a*b.PI*2)},$EaseOutJump:function(a){return 1-((a*=2)<1?(a=1-a)*a*a:(a-=1)*a*a)},$EaseInJump:function(a){return (a*=2)<1?a*a*a:(a=2-a)*a*a}},h={Bf:function(a){return (~a&3)+(a&12)},wf:function(a){return (~a&12)+(a&3)},Rc:function(a){return (a&3)==1},Sc:function(a){return (a&3)==2},Tc:function(a){return (a&12)==4},dd:function(a){return (a&12)==8},ed:function(a){return (a&3)>0},bd:function(a){return (a&12)>0}},r={Xe:37,af:39},p,n={nf:0,mf:1,df:2,cf:3,bf:4,gf:5},y=1,u=2,w=3,v=4,x=5,i,a=new function(){var h=this,m=n.nf,i=0,s=0,T=0,A=0,P=navigator.appName,j=navigator.userAgent;function D(){if(!m)if(P=="Microsoft Internet Explorer"&&!!g.attachEvent&&!!g.ActiveXObject){var d=j.indexOf("MSIE");m=n.mf;s=parseFloat(j.substring(d+5,j.indexOf(";",d)));T=0;i=f.documentMode||s}else if(P=="Netscape"&&!!g.addEventListener){var c=j.indexOf("Firefox"),a=j.indexOf("Safari"),h=j.indexOf("Chrome"),b=j.indexOf("AppleWebKit");if(c>=0){m=n.df;i=parseFloat(j.substring(c+8))}else if(a>=0){var k=j.substring(0,a).lastIndexOf("/");m=h>=0?n.bf:n.cf;i=parseFloat(j.substring(k+1,a))}if(b>=0)A=parseFloat(j.substring(b+12))}else{var e=/(opera)(?:.*version|)[ \/]([\w.]+)/i.exec(j);if(e){m=n.gf;i=parseFloat(e[2])}}}function r(){D();return m==y}function fb(){return r()&&(i<6||f.compatMode=="BackCompat")}function X(){D();return m==u}function Q(){D();return m==w}function ab(){D();return m==v}function cb(){D();return m==x}function hb(){return Q()&&A>534&&A<535}function J(){return r()&&i<9}var B;function t(a){if(!B){q(["transform","WebkitTransform","msTransform","MozTransform","OTransform"],function(b){if(!h.kc(a.style[b])){B=b;return c}});B=B||"transform"}return B}function N(a){return Object.prototype.toString.call(a)}var I;function q(a,c){if(N(a)=="[object Array]"){for(var b=0;b<a.length;b++)if(c(a[b],b,a))break}else for(var d in a)if(c(a[d],d,a))break}function db(){if(!I){I={};q(["Boolean","Number","String","Function","Array","Date","RegExp","Object"],function(a){I["[object "+a+"]"]=a.toLowerCase()})}return I}function E(a){return a==e?String(a):db()[N(a)]||"object"}function O(b,a){setTimeout(b,a||0)}function H(b,d,c){var a=!b||b=="inherit"?"":b;q(d,function(c){var b=c.exec(a);if(b){var d=a.substr(0,b.index),e=a.substr(b.lastIndex+1,a.length-(b.lastIndex+1));a=d+e}});a=c+(a.indexOf(" ")!=0?" ":"")+a;return a}function M(b,a){if(i<9)b.style.filter=a}function Y(b,a,c){if(T<9){var e=b.style.filter,g=new RegExp(/[\s]*progid:DXImageTransform\.Microsoft\.Matrix\([^\)]*\)/g),f=a?"progid:DXImageTransform.Microsoft.Matrix(M11="+a[0][0]+", M12="+a[0][1]+", M21="+a[1][0]+", M22="+a[1][1]+", SizingMethod='auto expand')":"",d=H(e,[g],f);M(b,d);h.rd(b,c.y);h.id(b,c.x)}}h.Hb=r;h.ef=X;h.ff=Q;h.gb=ab;h.pb=cb;h.J=J;h.ob=function(){return i};h.hf=function(){return s||i};h.ic=function(){return A};h.$Delay=O;h.W=function(a){if(h.Qc(a))a=f.getElementById(a);return a};h.Nb=function(a){return a?a:g.event};h.of=function(a){a=h.Nb(a);return a.target||a.srcElement||f};h.Lc=function(a){a=h.Nb(a);var b=new k;if(a.type=="DOMMouseScroll"&&X()&&i<3){b.x=a.screenX;b.y=a.screenY}else if(typeof a.pageX=="number"){b.x=a.pageX;b.y=a.pageY}else if(typeof a.clientX=="number"){b.x=a.clientX+f.body.scrollLeft+f.documentElement.scrollLeft;b.y=a.clientY+f.body.scrollTop+f.documentElement.scrollTop}return b};function F(c,d,a){if(a!=o&&a!="NaNpx")c.style[d]=a;else{var b=c.currentStyle||c.style;a=b[d];if(a==""&&g.getComputedStyle){b=c.ownerDocument.defaultView.getComputedStyle(c,e);b&&(a=b.getPropertyValue(d)||b[d])}return a}}function gb(b,c,a,d){if(a!=o){d&&(a+="px");F(b,c,a)}else return parseFloat(F(b,c))}function l(d,a){var b=a&2,c=a?gb:F;return function(e,a){return c(e,d,a,b)}}function Z(b){if(r()&&s<9){var a=/opacity=([^)]*)/.exec(b.style.filter||"");return a?parseFloat(a[1])/100:1}else return parseFloat(b.style.opacity||"1")}function bb(c,a,f){if(r()&&s<9){var h=c.style.filter||"",i=new RegExp(/[\s]*alpha\([^\)]*\)/g),e=b.round(100*a),d="";if(e<100||f)d="alpha(opacity="+e+") ";var g=H(h,[i],d);M(c,g)}else c.style.opacity=a==1?"":b.round(a*100)/100}function S(g,c){var f=c.$Rotate||0,d=c.$Scale==o?1:c.$Scale;if(J()){var k=h.lf(f/180*b.PI,d,d);Y(g,!f&&d==1?e:k,h.Re(k,c.wb,c.rb))}else{var i=t(g);if(i){var j="rotate("+f%360+"deg) scale("+d+")";if(a.gb()&&A>535)j+=" perspective(2000px)";g.style[i]=j}}}h.Se=function(b,a){if(hb())O(h.x(e,S,b,a));else S(b,a)};h.Te=function(b,c){var a=t(b);if(a)b.style[a+"Origin"]=c};h.Oe=function(a,c){if(r()&&s<9||s<10&&fb())a.style.zoom=c==1?"":c;else{var b=t(a);if(b){var f="scale("+c+")",e=a.style[b],g=new RegExp(/[\s]*scale\(.*?\)/g),d=H(e,[g],f);a.style[b]=d}}};h.Pe=function(a){if(!a.style[t(a)]||a.style[t(a)]=="none")a.style[t(a)]="perspective(2000px)"};h.Qe=function(a){a.style[t(a)]="none"};h.j=function(a,c,d,b){a=h.W(a);if(a.addEventListener){c=="mousewheel"&&a.addEventListener("DOMMouseScroll",d,b);a.addEventListener(c,d,b)}else if(a.attachEvent){a.attachEvent("on"+c,d);b&&a.setCapture&&a.setCapture()}};h.Ue=function(a,c,d,b){a=h.W(a);if(a.removeEventListener){c=="mousewheel"&&a.removeEventListener("DOMMouseScroll",d,b);a.removeEventListener(c,d,b)}else if(a.detachEvent){a.detachEvent("on"+c,d);b&&a.releaseCapture&&a.releaseCapture()}};h.Ye=function(b,a){h.j(J()?f:g,"mouseup",b,a)};h.nb=function(a){a=h.Nb(a);a.preventDefault&&a.preventDefault();a.cancel=c;a.returnValue=d};h.x=function(e,d){for(var b=[],a=2;a<arguments.length;a++)b.push(arguments[a]);var c=function(){for(var c=b.concat([]),a=0;a<arguments.length;a++)c.push(arguments[a]);return d.apply(e,c)};return c};h.Ve=function(a,c){var b=f.createTextNode(c);h.Ic(a);a.appendChild(b)};h.Ic=function(a){a.innerHTML=""};h.cb=function(c){for(var b=[],a=c.firstChild;a;a=a.nextSibling)a.nodeType==1&&b.push(a);return b};function R(a,c,b,f){if(!b)b="u";for(a=a?a.firstChild:e;a;a=a.nextSibling)if(a.nodeType==1){if(h.z(a,b)==c)return a;if(f){var d=R(a,c,b,f);if(d)return d}}}h.v=R;function U(a,c,d){for(a=a?a.firstChild:e;a;a=a.nextSibling)if(a.nodeType==1){if(a.tagName==c)return a;if(d){var b=U(a,c,d);if(b)return b}}}h.We=U;function V(a,d,g){var b=[];for(a=a?a.firstChild:e;a;a=a.nextSibling)if(a.nodeType==1){(!d||a.tagName==d)&&b.push(a);if(g){var f=V(a,d,c);if(f.length)b=b.concat(f)}}return b}h.zf=V;h.pf=function(b,a){return b.getElementsByTagName(a)};h.e=function(c){for(var b=1;b<arguments.length;b++){var a=arguments[b];if(a)for(var d in a)c[d]=a[d]}return c};h.kc=function(a){return E(a)=="undefined"};h.ad=function(a){return E(a)=="function"};h.Db=Array.isArray||function(a){return E(a)=="array"};h.Qc=function(a){return E(a)=="string"};h.tc=function(a){return !isNaN(parseFloat(a))&&isFinite(a)};h.b=q;h.Q=function(a){return h.Yc("DIV",a)};h.tf=function(a){return h.Yc("SPAN",a)};h.Yc=function(b,a){a=a||f;return a.createElement(b)};h.bb=function(){};h.Uc=function(a,b){return a.getAttribute(b)};h.z=function(a,b){return h.Uc(a,b)||h.Uc(a,"data-"+b)};h.uf=function(b,c,a){b.setAttribute(c,a)};h.wc=function(a){return a.className};h.vc=function(b,a){b.className=a||""};h.O=function(a){return a.parentNode};h.G=function(a){h.M(a,"none")};h.o=function(a,b){h.M(a,b==d?"none":"")};h.xf=function(b,a){b.removeAttribute(a)};h.yf=function(){return r()&&i<10};h.Af=function(d,c){if(c)d.style.clip="rect("+b.round(c.$Top)+"px "+b.round(c.$Right)+"px "+b.round(c.$Bottom)+"px "+b.round(c.$Left)+"px)";else{var g=d.style.cssText,f=[new RegExp(/[\s]*clip: rect\(.*?\)[;]?/i),new RegExp(/[\s]*cliptop: .*?[;]?/i),new RegExp(/[\s]*clipright: .*?[;]?/i),new RegExp(/[\s]*clipbottom: .*?[;]?/i),new RegExp(/[\s]*clipleft: .*?[;]?/i)],e=H(g,f,"");a.Ob(d,e)}};h.E=function(){return +new Date};h.y=function(b,a){b.appendChild(a)};h.Qb=function(c,b,a){c.insertBefore(b,a)};h.xb=function(b,a){b.removeChild(a)};h.vf=function(b,a){q(a,function(a){h.xb(b,a)})};h.sf=function(a){h.vf(a,h.cb(a))};h.qf=function(b,a){return parseInt(b,a||10)};h.ld=function(a){return parseFloat(a)};h.kd=function(b,a){var c=f.body;while(a&&b!=a&&c!=a)try{a=a.parentNode}catch(e){return d}return b==a};h.D=function(b,a){return b.cloneNode(a)};function K(b,a,c){a.onload=e;a.abort=e;b&&b(a,c)}h.tb=function(d,b){if(h.pb()&&i<11.6||!d)K(b,e);else{var a=new Image;a.onload=h.x(e,K,b,a);a.onabort=h.x(e,K,b,a,c);a.src=d}};h.rf=function(e,b,f){var d=e.length+1;function c(a){d--;if(b&&a&&a.src==b.src)b=a;!d&&f&&f(b)}a.b(e,function(b){a.tb(b.src,c)});c()};h.Ec=function(d,k,j,i){if(i)d=a.D(d,c);for(var h=a.pf(d,k),f=h.length-1;f>-1;f--){var b=h[f],e=a.D(j,c);a.vc(e,a.wc(b));a.Ob(e,b.style.cssText);var g=a.O(b);a.Qb(g,e,b);a.xb(g,b)}return d};var C;function eb(b){var g=this,i,e,j;function f(){var c=i;if(e)c+="dn";else if(j)c+="av";a.vc(b,c)}function k(){C.push(g);e=c;f()}g.Cf=function(){e=d;f()};g.Jc=function(a){j=a;f()};b=h.W(b);if(!C){h.Ye(function(){var a=C;C=[];q(a,function(a){a.Cf()})});C=[]}i=h.wc(b);a.j(b,"mousedown",k)}h.Ub=function(a){return new eb(a)};h.oc=F;h.Y=l("overflow");h.r=l("top",2);h.q=l("left",2);h.g=l("width",2);h.h=l("height",2);h.id=l("marginLeft",2);h.rd=l("marginTop",2);h.w=l("position");h.M=l("display");h.H=l("zIndex",1);h.vb=function(b,a,c){if(a!=o)bb(b,a,c);else return Z(b)};h.Ob=function(a,b){if(b!=o)a.style.cssText=b;else return a.style.cssText};var L={$Opacity:h.vb,$Top:h.r,$Left:h.q,V:h.g,T:h.h,mb:h.w,Mg:h.M,$ZIndex:h.H},z;function G(){if(!z)z=h.e({Lg:h.rd,Kg:h.id,$Clip:h.Af,Sb:h.Se},L);return z}function W(){G();z.Sb=z.Sb;return z}h.wd=G;h.yd=W;h.vd=function(c,b){G();var a={};q(b,function(d,b){if(L[b])a[b]=L[b](c)});return a};h.F=function(c,b){var a=G();q(b,function(d,b){a[b]&&a[b](c,d)})};h.xd=function(b,a){W();h.F(b,a)};p=new function(){var a=this;function b(d,g){for(var j=d[0].length,i=d.length,h=g[0].length,f=[],c=0;c<i;c++)for(var k=f[c]=[],b=0;b<h;b++){for(var e=0,a=0;a<j;a++)e+=d[c][a]*g[a][b];k[b]=e}return f}a.Kb=function(d,c){var a=b(d,[[c.x],[c.y]]);return new k(a[0][0],a[1][0])}};h.lf=function(d,a,c){var e=b.cos(d),f=b.sin(d);return [[e*a,-f*c],[f*a,e*c]]};h.Re=function(d,c,a){var e=p.Kb(d,new k(-c/2,-a/2)),f=p.Kb(d,new k(c/2,-a/2)),g=p.Kb(d,new k(c/2,a/2)),h=p.Kb(d,new k(-c/2,a/2));return new k(b.min(e.x,f.x,g.x,h.x)+c/2,b.min(e.y,f.y,g.y,h.y)+a/2)}};i=function(k,r,g,L,x,u){k=k||0;var f=this,p,m,n,v,y=0,A,J,I,B,i=0,s=0,C,q=k,j,h,o,t=[],z;function G(b){j+=b;h+=b;q+=b;i+=b;s+=b;a.b(t,function(a){a,a.$Shift(b)})}function K(a,b){var c=a-j+k*b;G(c);return h}function w(B,G){var l=B;if(o&&(l>=h||l<=j))l=((l-j)%o+o)%o+j;if(!C||v||G||i!=l){var n=b.min(l,h);n=b.max(n,j);if(!C||v||G||n!=s){if(u){var d=u;if(x){var w=(n-q)/(r||1);if(g.zd&&a.gb()&&r)w=b.round(w*r/16)/r*16;if(g.$Reverse)w=1-w;d={};for(var m in u){var R=J[m]||1,M=I[m]||[0,1],k=(w-M[0])/M[1];k=b.min(b.max(k,0),1);k=k*R;var H=b.floor(k);if(k!=H)k-=H;var Q=A[m]||A.A,K=Q(k),p,N=x[m],F=u[m];if(a.tc(F))p=N+(F-N)*K;else{p=a.e({C:{}},x[m]);a.b(F.C,function(c,b){var a=c*K;p.C[b]=a;p[b]+=a})}d[m]=p}}if(x.$Zoom)d.Sb={$Rotate:d.$Rotate||0,$Scale:d.$Zoom,wb:g.wb,rb:g.rb};if(u.$Clip&&g.$Move){var y=d.$Clip.C,E=(y.$Top||0)+(y.$Bottom||0),D=(y.$Left||0)+(y.$Right||0);d.$Left=(d.$Left||0)+D;d.$Top=(d.$Top||0)+E;d.$Clip.$Left-=D;d.$Clip.$Right-=D;d.$Clip.$Top-=E;d.$Clip.$Bottom-=E}if(d.$Clip&&a.yf()&&!d.$Clip.$Top&&!d.$Clip.$Left&&d.$Clip.$Right==g.wb&&d.$Clip.$Bottom==g.rb)d.$Clip=e;a.b(d,function(b,a){z[a]&&z[a](L,b)})}f.Yb(s-q,n-q)}s=n;a.b(t,function(b,c){var a=B<i?t[t.length-c-1]:b;a.K(B,G)});var P=i,O=B;i=l;C=c;f.zb(P,O)}}function E(a,c){c&&a.Bb(h,1);h=b.max(h,a.N());t.push(a)}function F(){if(p){var d=a.E(),e=b.min(d-y,a.pb()?80:20),c=i+e*n;y=d;if(c*n>=m*n)c=m;w(c);if(!v&&c*n>=m*n)H(B);else a.$Delay(F,g.$Interval)}}function D(d,e,g){if(!p){p=c;v=g;B=e;d=b.max(d,j);d=b.min(d,h);m=d;n=m<i?-1:1;f.zc();y=a.E();F()}}function H(a){if(p){v=p=B=d;f.Bc();a&&a()}}f.$Play=function(a,b,c){D(a?i+a:h,b,c)};f.Nc=function(b,a,c){D(b,a,c)};f.db=function(){H()};f.se=function(a){D(a)};f.eb=function(){return i};f.Hc=function(){return m};f.yb=function(){return s};f.K=w;f.xc=function(){w(j,c)};f.$Move=function(a){w(i+a)};f.$IsPlaying=function(){return p};f.qe=function(a){o=a};f.Bb=K;f.$Shift=G;f.ab=function(a){E(a,0)};f.jc=function(a){E(a,1)};f.N=function(){return h};f.zb=a.bb;f.zc=a.bb;f.Bc=a.bb;f.Yb=a.bb;f.lc=a.E();g=a.e({$Interval:16},g);o=g.Pc;z=a.e({},a.wd(),g.Ac);j=q=k;h=k+r;var J=g.$Round||{},I=g.$During||{};A=a.e({A:a.ad(g.$Easing)&&g.$Easing||l.$EaseSwing},g.$Easing)};var s,j=g.$JssorSlideshowFormations$={};new function(){var p=0,o=1,v=2,u=3,J=1,F=2,G=4,I=8,N=256,O=512,M=1024,L=2048,D=L+J,C=L+F,B=O+J,z=O+F,A=N+G,x=N+I,y=M+G,E=M+I;function R(a){return (a&F)==F}function S(a){return (a&G)==G}function w(b,a,c){c.push(a);b[a]=b[a]||[];b[a].push(c)}j.$FormationStraight=function(f){for(var d=f.$Cols,e=f.$Rows,k=f.$Assembly,l=f.Ib,j=[],a=0,b=0,h=d-1,i=e-1,g=l-1,c,b=0;b<e;b++)for(a=0;a<d;a++){switch(k){case D:c=g-(a*e+(i-b));break;case y:c=g-(b*d+(h-a));break;case B:c=g-(a*e+b);case A:c=g-(b*d+a);break;case C:c=a*e+b;break;case x:c=b*d+(h-a);break;case z:c=a*e+(i-b);break;default:c=b*d+a}w(j,c,[b,a])}return j};j.$FormationSwirl=function(e){var k=e.$Cols,l=e.$Rows,r=e.$Assembly,q=e.Ib,n=[],m=[],i=0,a=0,b=0,f=k-1,g=l-1,h,d,j=0;switch(r){case D:a=f;b=0;d=[v,o,u,p];break;case y:a=0;b=g;d=[p,u,o,v];break;case B:a=f;b=g;d=[u,o,v,p];break;case A:a=f;b=g;d=[o,u,p,v];break;case C:a=0;b=0;d=[v,p,u,o];break;case x:a=f;b=0;d=[o,v,p,u];break;case z:a=0;b=g;d=[u,p,v,o];break;default:a=0;b=0;d=[p,v,o,u]}i=0;while(i<q){h=b+","+a;if(a>=0&&a<k&&b>=0&&b<l&&!m[h]){m[h]=c;w(n,i++,[b,a])}else switch(d[j++%d.length]){case p:a--;break;case v:b--;break;case o:a++;break;case u:b++}switch(d[j%d.length]){case p:a++;break;case v:b++;break;case o:a--;break;case u:b--}}return n};j.$FormationZigZag=function(d){var j=d.$Cols,k=d.$Rows,n=d.$Assembly,m=d.Ib,h=[],i=0,a=0,b=0,e=j-1,f=k-1,l,c,g=0;switch(n){case D:a=e;b=0;c=[v,o,u,o];break;case y:a=0;b=f;c=[p,u,o,u];break;case B:a=e;b=f;c=[u,o,v,o];break;case A:a=e;b=f;c=[o,u,p,u];break;case C:a=0;b=0;c=[v,p,u,p];break;case x:a=e;b=0;c=[o,v,p,v];break;case z:a=0;b=f;c=[u,p,v,p];break;default:a=0;b=0;c=[p,v,o,v]}i=0;while(i<m){l=b+","+a;if(a>=0&&a<j&&b>=0&&b<k&&typeof h[l]=="undefined"){w(h,i++,[b,a]);switch(c[g%c.length]){case p:a++;break;case v:b++;break;case o:a--;break;case u:b--}}else{switch(c[g++%c.length]){case p:a--;break;case v:b--;break;case o:a++;break;case u:b++}switch(c[g++%c.length]){case p:a++;break;case v:b++;break;case o:a--;break;case u:b--}}}return h};j.$FormationStraightStairs=function(h){var l=h.$Cols,m=h.$Rows,e=h.$Assembly,k=h.Ib,i=[],j=0,c=0,d=0,f=l-1,g=m-1,n=k-1;switch(e){case D:case z:case B:case C:var a=0,b=0;break;case x:case y:case A:case E:var a=f,b=0;break;default:e=E;var a=f,b=0}c=a;d=b;while(j<k){if(S(e)||R(e))w(i,n-j++,[d,c]);else w(i,j++,[d,c]);switch(e){case D:case z:c--;d++;break;case B:case C:c++;d--;break;case x:case y:c--;d--;break;case E:case A:default:c++;d++}if(c<0||d<0||c>f||d>g){switch(e){case D:case z:a++;break;case x:case y:case B:case C:b++;break;case E:case A:default:a--}if(a<0||b<0||a>f||b>g){switch(e){case D:case z:a=f;b++;break;case B:case C:b=g;a++;break;case x:case y:b=g;a--;break;case E:case A:default:a=0;b++}if(b>g)b=g;else if(b<0)b=0;else if(a>f)a=f;else if(a<0)a=0}d=b;c=a}}return i};j.$FormationSquare=function(h){var a=h.$Cols||1,c=h.$Rows||1,i=[],d,e,f,g,j;f=a<c?(c-a)/2:0;g=a>c?(a-c)/2:0;j=b.round(b.max(a/2,c/2))+1;for(d=0;d<a;d++)for(e=0;e<c;e++)w(i,j-b.min(d+1+f,e+1+g,a-d+f,c-e+g),[e,d]);return i};j.$FormationRectangle=function(f){var d=f.$Cols||1,e=f.$Rows||1,g=[],a,c,h;h=b.round(b.min(d/2,e/2))+1;for(a=0;a<d;a++)for(c=0;c<e;c++)w(g,h-b.min(a+1,c+1,d-a,e-c),[c,a]);return g};j.$FormationRandom=function(d){for(var e=[],a,c=0;c<d.$Rows;c++)for(a=0;a<d.$Cols;a++)w(e,b.ceil(1e5*b.random())%13,[c,a]);return e};j.$FormationCircle=function(d){for(var e=d.$Cols||1,f=d.$Rows||1,g=[],a,h=e/2-.5,i=f/2-.5,c=0;c<e;c++)for(a=0;a<f;a++)w(g,b.round(b.sqrt(b.pow(c-h,2)+b.pow(a-i,2))),[a,c]);return g};j.$FormationCross=function(d){for(var e=d.$Cols||1,f=d.$Rows||1,g=[],a,h=e/2-.5,i=f/2-.5,c=0;c<e;c++)for(a=0;a<f;a++)w(g,b.round(b.min(b.abs(c-h),b.abs(a-i))),[a,c]);return g};j.$FormationRectangleCross=function(f){for(var g=f.$Cols||1,h=f.$Rows||1,i=[],a,d=g/2-.5,e=h/2-.5,j=b.max(d,e)+1,c=0;c<g;c++)for(a=0;a<h;a++)w(i,b.round(j-b.max(d-b.abs(c-d),e-b.abs(a-e)))-1,[a,c]);return i};function P(a){var b=a.$Formation(a);return a.$Reverse?b.reverse():b}function H(g,f){var e={$Interval:f,$Duration:1,$Delay:0,$Cols:1,$Rows:1,$Opacity:0,$Zoom:0,$Clip:0,$Move:d,$SlideOut:d,$FlyDirection:0,$Reverse:d,$Formation:j.$FormationRandom,$Assembly:E,$ChessMode:{$Column:0,$Row:0},$Easing:l.$EaseSwing,$Round:{},Gb:[],$During:{}};a.e(e,g);e.Ib=e.$Cols*e.$Rows;if(a.ad(e.$Easing))e.$Easing={A:e.$Easing};e.od=b.ceil(e.$Duration/e.$Interval);e.pd=Q(e);e.ke=function(b,a){b/=e.$Cols;a/=e.$Rows;var f=b+"x"+a;if(!e.Gb[f]){e.Gb[f]={V:b,T:a};for(var c=0;c<e.$Cols;c++)for(var d=0;d<e.$Rows;d++)e.Gb[f][d+","+c]={$Top:d*a,$Right:c*b+b,$Bottom:d*a+a,$Left:c*b}}return e.Gb[f]};if(e.$Brother){e.$Brother=H(e.$Brother,f);e.$SlideOut=c}return e}function Q(d){var c=d.$Easing;if(!c.A)c.A=l.$EaseSwing;var e=d.od,f=c.ib;if(!f){var g=a.e({},d.$Easing,d.$Round);f=c.ib={};a.b(g,function(n,l){var g=c[l]||c.A,j=d.$Round[l]||1;if(!a.Db(g.ib))g.ib=[];var h=g.ib[e]=g.ib[e]||[];if(!h[j]){h[j]=[0];for(var k=1;k<=e;k++){var i=k/e*j,m=b.floor(i);if(i!=m)i-=m;h[j][k]=g(i)}}f[l]=h})}return f}function K(D,k,f,A,m,l){var x=this,v,y={},p={},o=[],i,g,t,r=f.$ChessMode.$Column||0,s=f.$ChessMode.$Row||0,j=f.ke(m,l),q=P(f),E=q.length-1,u=f.$Duration+f.$Delay*E,B=A+u,n=f.$SlideOut,w;B+=a.gb()?260:50;x.Vc=B;x.Fb=function(c){c-=A;var d=c<u;if(d||w){w=d;if(!n)c=u-c;var e=b.ceil(c/f.$Interval);a.b(p,function(c,f){var d=b.max(e,c.le);d=b.min(d,c.length-1);if(c.Wc!=d){if(!c.Wc&&!n)a.o(o[f]);else d==c.Wg&&n&&a.G(o[f]);c.Wc=d;a.xd(o[f],c[d])}})}};function z(b){a.Qe(b);var c=a.cb(b);a.b(c,function(a){z(a)})}k=a.D(k,c);z(k);if(a.J()){var F=!k["no-image"],C=a.zf(k,e,c);a.b(C,function(b){(F||b["jssor-slider"])&&a.vb(b,a.vb(b),c)})}a.b(q,function(e,k){a.b(e,function(N){var S=N[0],R=N[1],z=S+","+R,u=d,w=d,A=d;if(r&&R%2){if(h.ed(r))u=!u;if(h.bd(r))w=!w;if(r&16)A=!A}if(s&&S%2){if(h.ed(s))u=!u;if(h.bd(s))w=!w;if(s&16)A=!A}f.$Top=f.$Top||f.$Clip&4;f.$Bottom=f.$Bottom||f.$Clip&8;f.$Left=f.$Left||f.$Clip&1;f.$Right=f.$Right||f.$Clip&2;var G=w?f.$Bottom:f.$Top,D=w?f.$Top:f.$Bottom,F=u?f.$Right:f.$Left,E=u?f.$Left:f.$Right;f.$Clip=G||D||F||E;t={};g={$Top:0,$Left:0,$Opacity:1,V:m,T:l};i=a.e({},g);v=a.e({},j[z]);if(f.$Opacity)g.$Opacity=2-f.$Opacity;if(f.$ZIndex){g.$ZIndex=f.$ZIndex;i.$ZIndex=0}var Q=f.$Cols*f.$Rows>1||f.$Clip;if(f.$Zoom||f.$Rotate){var P=c;if(a.Hb()&&a.hf()<9)if(f.$Cols*f.$Rows>1)P=d;else Q=d;if(P){g.$Zoom=f.$Zoom?f.$Zoom-1:1;i.$Zoom=1;if(a.J()||a.pb())g.$Zoom=b.min(g.$Zoom,2);var K=f.$Rotate;if(K==c)K=1;g.$Rotate=K*360*(A?-1:1);i.$Rotate=0}}if(Q){if(f.$Clip){var x=f.$ScaleClip||1,o=v.C={};if(G&&D){o.$Top=j.T/2*x;o.$Bottom=-o.$Top}else if(G)o.$Bottom=-j.T*x;else if(D)o.$Top=j.T*x;if(F&&E){o.$Left=j.V/2*x;o.$Right=-o.$Left}else if(F)o.$Right=-j.V*x;else if(E)o.$Left=j.V*x}t.$Clip=v;i.$Clip=j[z]}if(f.$FlyDirection){var q=f.$FlyDirection;if(!u)q=h.Bf(q);if(!w)q=h.wf(q);var M=f.$ScaleHorizontal||1,O=f.$ScaleVertical||1;if(h.Rc(q))g.$Left+=m*M;else if(h.Sc(q))g.$Left-=m*M;if(h.Tc(q))g.$Top+=l*O;else if(h.dd(q))g.$Top-=l*O}a.b(g,function(b,c){if(a.tc(b))if(b!=i[c])t[c]=b-i[c]});y[z]=n?i:g;var L=b.round(k*f.$Delay/f.$Interval);p[z]=new Array(L);p[z].le=L;for(var C=f.od,J=0;J<=C;J++){var e={};a.b(t,function(g,c){var m=f.pd[c]||f.pd.A,l=m[f.$Round[c]||1],k=f.$During[c]||[0,1],d=(J/C-k[0])/k[1]*C;d=b.round(b.min(C,b.max(d,0)));var j=l[d];if(a.tc(g))e[c]=i[c]+g*j;else{var h=e[c]=a.e({},i[c]);h.C=[];a.b(g.C,function(c,b){var a=c*j;h.C[b]=a;h[b]+=a})}});if(i.$Zoom)e.Sb={$Rotate:e.$Rotate||0,$Scale:e.$Zoom,wb:m,rb:l};if(e.$Clip&&f.$Move){var B=e.$Clip.C,I=(B.$Top||0)+(B.$Bottom||0),H=(B.$Left||0)+(B.$Right||0);e.$Left=(e.$Left||0)+H;e.$Top=(e.$Top||0)+I;e.$Clip.$Left-=H;e.$Clip.$Right-=H;e.$Clip.$Top-=I;e.$Clip.$Bottom-=I}e.$ZIndex=e.$ZIndex||1;p[z].push(e)}})});q.reverse();a.b(q,function(b){a.b(b,function(d){var g=d[0],f=d[1],e=g+","+f,b=k;if(f||g)b=a.D(k,c);a.F(b,y[e]);a.Y(b,"hidden");a.w(b,"absolute");D.je(b);o[e]=b;a.o(b,n)})})}g.$JssorSlideshowRunner$=function(h,l,j,n,p){var d=this,o,f,c,s=0,r=n.$TransitionsOrder,k,g=16;function q(){var a=this,b=0;i.call(a,0,o);a.zb=function(d,a){if(a-b>g){b=a;c&&c.Fb(a);f&&f.Fb(a)}};a.lb=k}d.oe=function(f){var c=0,e=n.$Transitions,d=e.length;if(r){if(d>f&&(a.gb()||a.ff()||a.ef()))d-=d%f;c=s++%d}else c=b.floor(b.random()*d);e[c]&&(e[c].X=c);return e[c]};d.me=function(u,v,n,p,a){k=a;a=H(a,g);var m=p.cd,i=n.cd;m["no-image"]=!p.Ab;i["no-image"]=!n.Ab;var q=m,r=i,t=a,e=a.$Brother||H({},g);if(!a.$SlideOut){q=i;r=m}var s=e.$Shift||0;f=new K(h,r,e,b.max(s-e.$Interval,0),l,j);c=new K(h,q,t,b.max(e.$Interval-s,0),l,j);f.Fb(0);c.Fb(0);o=b.max(f.Vc,c.Vc);d.X=u};d.hb=function(){h.hb();f=e;c=e};d.ne=function(){var a=e;if(c)a=new q;return a};if(a.J()||a.pb()||p&&a.ic<537)g=32;m.call(d);i.call(d,-1e7,1e7)};function n(o,Lb){var h=this;function yc(){var a=this;i.call(a,-1e8,2e8);a.Ie=function(){var c=a.yb(),d=b.floor(c),f=u(d),e=c-b.floor(c);return {X:f,Je:d,mb:e}};a.zb=function(d,a){var e=b.floor(a);if(e!=a&&a>d)e++;Ub(e,c);h.i(n.$EVT_POSITION_CHANGE,u(a),u(d),a,d)}}function xc(){var b=this;i.call(b,0,0,{Pc:p});a.b(A,function(a){K&1&&a.qe(p);b.jc(a);a.$Shift(hb/cc)})}function wc(){var a=this,b=Tb.$Elmt;i.call(a,-1,2,{$Easing:l.$EaseLinear,Ac:{mb:ac},Pc:p},b,{mb:1},{mb:-1});a.Cb=b}function mc(o,m){var a=this,f,g,k,l,b;i.call(a,-1e8,2e8);a.zc=function(){R=c;V=e;h.i(n.$EVT_SWIPE_START,u(B.eb()),B.eb())};a.Bc=function(){R=d;l=d;var a=B.Ie();h.i(n.$EVT_SWIPE_END,u(B.eb()),B.eb());!a.mb&&ec(a.Je,s)};a.zb=function(d,c){var a;if(l)a=b;else{a=g;if(k)a=j.$SlideEasing(c/k)*(g-f)+f}B.K(a)};a.Tb=function(b,d,c,e){f=b;g=d;k=c;B.K(b);a.K(0);a.Nc(c,e)};a.Ke=function(d){l=c;b=d;a.$Play(d,e,c)};a.Le=function(a){b=a};B=new yc;B.ab(o);B.ab(m)}function nc(){var c=this,b=Zb();a.H(b,0);c.$Elmt=b;c.je=function(c){a.y(b,c);a.o(b)};c.hb=function(){a.G(b);a.Ic(b)}}function vc(q,o){var f=this,t,x,K,B,g,D=[],R,r,X,I,P,F,l,v,k;i.call(f,-w,w+1,{});function E(a){x&&x.uc();t&&t.uc();W(q,a);F=c;t=new N.$Class(q,N,1);x=new N.$Class(q,N);x.xc();t.xc()}function gb(){t.lc<N.lc&&E()}function L(o,q,m){if(!I){I=c;if(g&&m){var e=m.width,b=m.height,l=e,k=b;if(e&&b&&j.$FillMode){if(j.$FillMode&3&&(!(j.$FillMode&4)||e>J||b>H)){var i=d,p=J/H*b/e;if(j.$FillMode&1)i=p>1;else if(j.$FillMode&2)i=p<1;l=i?e*H/b:J;k=i?H:b*J/e}a.g(g,l);a.h(g,k);a.r(g,(H-k)/2);a.q(g,(J-l)/2)}a.w(g,"absolute");h.i(n.$EVT_LOAD_END,Jb)}}a.G(q);o&&o(f)}function fb(b,c,d,e){if(e==V&&s==o&&S)if(!dc){var a=u(b);y.me(a,o,c,f,d);c.Be();Y.Bb(a,1);Y.K(a);z.Tb(b,b,0)}}function ab(b){if(b==V&&s==o){if(!l){var a=e;if(y)if(y.X==o)a=y.ne();else y.hb();gb();l=new tc(o,a,f.ye(),f.ze());l.Xc(k)}!l.$IsPlaying()&&l.yc()}}function Q(d,c){if(d==o){if(d!=c)A[c]&&A[c].Ee();k&&k.$Enable();var i=V=a.E();f.tb(a.x(e,ab,i))}else{var h=b.abs(o-d),g=w+j.$LazyLoading;(!P||h<=g||p-h<=g)&&f.tb()}}function bb(){if(s==o&&l){l.db();k&&k.$Quit();k&&k.$Disable();l.nd()}}function cb(){s==o&&l&&l.db()}function O(b){if(U)a.nb(b);else h.i(n.$EVT_CLICK,o,b)}function M(){k=v.pInstance;l&&l.Xc(k)}f.tb=function(d,b){b=b||B;if(D.length&&!I){a.o(b);if(!X){X=c;h.i(n.$EVT_LOAD_START);a.b(D,function(b){if(!b.src){b.src=a.z(b,"src2");a.M(b,b["display-origin"])}})}a.rf(D,g,a.x(e,L,d,b))}else L(d,b)};f.Jd=function(){if(y){var b=y.oe(p);if(b){var f=V=a.E(),c=o+1*Yb,d=A[u(c)];return d.tb(a.x(e,fb,c,d,b,f),B)}}Z(s+j.$AutoPlaySteps*Yb)};f.cc=function(){Q(o,o)};f.Ee=function(){k&&k.$Quit();k&&k.$Disable();f.td();l&&l.Pd();l=e;E()};f.Be=function(){a.G(q)};f.td=function(){a.o(q)};f.Qd=function(){k&&k.$Enable()};function W(b,f,e){if(b["jssor-slider"])return;e=e||0;if(!F){if(b.tagName=="IMG"){D.push(b);if(!b.src){P=c;b["display-origin"]=a.M(b);a.G(b)}}a.J()&&a.H(b,(a.H(b)||0)+1);if(j.$HWA&&a.ic()>0)(!G||a.ic()<534||!eb)&&a.Pe(b)}var h=a.cb(b);a.b(h,function(h){var j=a.z(h,"u");if(j=="player"&&!v){v=h;if(v.pInstance)M();else a.j(v,"dataavailable",M)}if(j=="caption"){if(!a.Hb()&&!f){var i=a.D(h,c);a.Qb(b,i,h);a.xb(b,h);h=i;f=c}}else if(!F&&!e&&!g&&a.z(h,"u")=="image"){g=h;if(g){if(g.tagName=="A"){R=g;a.F(R,T);r=a.D(g,d);a.j(r,"click",O);a.F(r,T);a.M(r,"block");a.vb(r,0);a.oc(r,"backgroundColor","#000");g=a.We(g,"IMG")}g.border=0;a.F(g,T)}}W(h,f,e+1)})}f.Yb=function(c,b){var a=w-b;ac(K,a)};f.ye=function(){return t};f.ze=function(){return x};f.X=o;m.call(f);var C=a.v(q,"thumb");if(C){f.Od=a.D(C,c);a.xf(C,"id");a.G(C)}a.o(q);B=a.D(db,c);a.H(B,1e3);a.j(q,"click",O);E(c);f.Ab=g;f.sd=r;f.cd=q;f.Cb=K=q;a.y(K,B);h.$On(203,Q);h.$On(22,cb);h.$On(24,bb)}function tc(g,q,v,u){var b=this,m=0,x=0,o,k,e,f,l,r,w,t,p=A[g];i.call(b,0,0);function z(){a.sf(O);Kb&&l&&p.sd&&a.y(O,p.sd);a.o(O,l||!p.Ab)}function C(){if(r){r=d;h.i(n.$EVT_ROLLBACK_END,g,e,m,k,e,f);b.K(k)}b.yc()}function B(a){t=a;b.db();b.yc()}b.yc=function(){var a=b.yb();if(!I&&!R&&!t&&s==g){if(!a){if(o&&!l){l=c;b.nd(c);h.i(n.$EVT_SLIDESHOW_START,g,m,x,o,f)}z()}var d,j=n.$EVT_STATE_CHANGE;if(a!=f)if(a==e)d=f;else if(a==k)d=e;else if(!a)d=k;else if(a>e){r=c;d=e;j=n.$EVT_ROLLBACK_START}else d=b.Hc();h.i(j,g,a,m,k,e,f);var i=S&&(!Wb||bb);if(a==f)i&&p.Jd();else(i||a!=e)&&b.Nc(d,C)}};b.Pd=function(){y&&y.X==g&&y.hb();var a=b.yb();a<f&&h.i(n.$EVT_STATE_CHANGE,g,-a-1,m,k,e,f)};b.nd=function(b){q&&a.Y(jb,b&&q.lb.$Outside?"":"hidden")};b.Yb=function(b,a){if(l&&a>=o){l=d;z();p.td();y.hb();h.i(n.$EVT_SLIDESHOW_END,g,m,x,o,f)}h.i(n.$EVT_PROGRESS_CHANGE,g,a,m,k,e,f)};b.Xc=function(a){if(a&&!w){w=a;a.$On($JssorPlayer$.re,B)}};q&&b.jc(q);o=b.N();b.N();b.jc(v);k=v.N();e=k+j.$AutoPlayInterval;u.$Shift(e);b.ab(u);f=b.N()}function ac(c,g){var f=x>0?x:ib,d=qb*g*(f&1),e=rb*g*(f>>1&1);if(!a.gb()){d=b.round(d);e=b.round(e)}if(a.Hb()&&a.ob()>=10&&a.ob()<11)c.style.msTransform="translate("+d+"px, "+e+"px)";else if(a.gb()&&a.ob()>=30&&a.ob()<34){c.style.WebkitTransition="transform 0s";c.style.WebkitTransform="translate3d("+d+"px, "+e+"px, 0px) perspective(2000px)"}else{a.q(c,d);a.r(c,e)}}function rc(c){U=0;var b=a.of(c).tagName;!L&&b!="INPUT"&&b!="TEXTAREA"&&pc()&&qc(c)}function qc(b){xb=R;I=c;Gb=d;V=e;a.j(f,ob,Hb);a.E();Nb=z.Hc();z.db();if(!xb)x=0;if(G){var i=b.touches[0];Bb=i.clientX;Cb=i.clientY}else{var g=a.Lc(b);Bb=g.x;Cb=g.y;a.nb(b)}E=0;cb=0;gb=0;D=B.eb();h.i(n.$EVT_DRAG_START,u(D),D,b)}function Hb(e){if(I&&(!a.J()||e.button)){var f;if(G){var m=e.touches;if(m&&m.length>0)f=new k(m[0].clientX,m[0].clientY)}else f=a.Lc(e);if(f){var j=f.x-Bb,l=f.y-Cb;if(b.floor(D)!=D)x=x||ib&L;if((j||l)&&!x){if(L==3)if(b.abs(l)>b.abs(j))x=2;else x=1;else x=L;if(G&&x==1&&b.abs(l)-b.abs(j)>3)Gb=c}if(x){var d=l,i=rb;if(x==1){d=j;i=qb}if(!(K&1)){if(d>0){var g=i*s,h=d-g;if(h>0)d=g+b.sqrt(h)*5}if(d<0){var g=i*(p-w-s),h=-d-g;if(h>0)d=-g-b.sqrt(h)*5}}if(E-cb<-2)gb=1;else if(E-cb>2)gb=0;cb=E;E=d;zb=D-E/i/(nb||1);if(E&&x&&!Gb){a.nb(e);if(!R)z.Ke(zb);else z.Le(zb)}else a.J()&&a.nb(e)}}}else ub(e)}function ub(i){oc();if(I){I=d;a.E();a.Ue(f,ob,Hb);U=E;U&&a.nb(i);z.db();var e=B.eb();h.i(n.$EVT_DRAG_END,u(e),e,u(D),D,i);var c=b.floor(D);if(b.abs(E)>=j.$MinDragOffsetToSlide){c=b.floor(e);c+=gb}if(!(K&1))c=b.min(p-w,b.max(c,0));var g=b.abs(c-e);g=1-b.pow(1-g,5);if(!U&&xb)z.se(Nb);else if(e==c){Ab.Qd();Ab.cc()}else z.Tb(e,c,g*Vb)}}function lc(a){A[s];s=u(a);Ab=A[s];Ub(a);return s}function ec(a,b){x=0;lc(a);h.i(n.$EVT_PARK,u(a),b)}function Ub(b,c){Eb=b;a.b(Q,function(a){a.mc(u(b),b,c)})}function pc(){var b=n.jd||0,a=P;if(G)a&1&&(a&=1);n.jd|=a;return L=a&~b}function oc(){if(L){n.jd&=~P;L=0}}function Zb(){var b=a.Q();a.F(b,T);a.w(b,"absolute");return b}function u(a){return (a%p+p)%p}function ic(a,c){if(c)if(!K){a=b.min(b.max(a+Eb,0),p-w);c=d}else if(K&2){a=u(a+Eb);c=d}Z(a,j.$SlideDuration,c)}function Fb(){a.b(Q,function(a){a.ec(a.Pb.$ChanceToShow>bb)})}function gc(b){b=a.Nb(b);var c=b.target?b.target:b.srcElement,d=b.relatedTarget?b.relatedTarget:b.toElement;if(!a.kd(o,c)||a.kd(o,d))return;bb=1;Fb();A[s].cc()}function fc(){bb=0;Fb()}function hc(){T={V:J,T:H,$Top:0,$Left:0};a.b(X,function(b){a.F(b,T);a.w(b,"absolute");a.Y(b,"hidden");a.G(b)});a.F(db,T)}function lb(b,a){Z(b,a,c)}function Z(h,g,l){if(Rb&&(!I||j.$NaviQuitDrag)){R=c;I=d;z.db();if(a.kc(g))g=Vb;var f=vb.yb(),e=h;if(l){e=f+h;if(h>0)e=b.ceil(e);else e=b.floor(e)}if(!(K&1)){e=u(e);e=b.max(0,b.min(e,p-w))}var k=(e-f)%p;e=f+k;var i=f==e?0:g*b.abs(k);i=b.min(i,g*w*1.5);z.Tb(f,e,i||1)}}h.$PlayTo=Z;h.$GoTo=function(a){Z(a,1)};h.$Next=function(){lb(1)};h.$Prev=function(){lb(-1)};h.$Pause=function(){S=d};h.$Play=function(){if(!S){S=c;A[s]&&A[s].cc()}};h.$SetSlideshowTransitions=function(a){j.$SlideshowOptions.$Transitions=a};h.$SetCaptionTransitions=function(b){N.$CaptionTransitions=b;N.lc=a.E()};h.$SlidesCount=function(){return X.length};h.$CurrentIndex=function(){return s};h.$IsAutoPlaying=function(){return S};h.$IsDragging=function(){return I};h.$IsSliding=function(){return R};h.$IsMouseOver=function(){return !bb};h.$LastDragSucceded=function(){return U};h.$GetOriginalWidth=function(){return a.g(v||o)};h.$GetOriginalHeight=function(){return a.h(v||o)};h.$GetScaleWidth=function(){return a.g(o)};h.$GetScaleHeight=function(){return a.h(o)};h.$SetScaleWidth=function(c){if(!v){var b=a.Q(f);a.Ob(b,a.Ob(o));a.vc(b,a.wc(o));a.w(b,"relative");a.r(b,0);a.q(b,0);a.Y(b,"visible");v=a.Q(f);a.w(v,"absolute");a.r(v,0);a.q(v,0);a.g(v,a.g(o));a.h(v,a.h(o));a.Te(v,"0 0");a.y(v,b);var g=a.cb(o);a.y(o,v);a.oc(o,"backgroundImage","");var e={navigator:ab&&ab.$Scale==d,arrowleft:M&&M.$Scale==d,arrowright:M&&M.$Scale==d,thumbnavigator:F&&F.$Scale==d,thumbwrapper:F&&F.$Scale==d};a.b(g,function(c){a.y(e[a.z(c,"u")]?o:b,c)});a.o(b);a.o(v)}nb=c/a.g(v);a.Oe(v,nb);a.g(o,c);a.h(o,nb*a.h(v));a.b(Q,function(a){a.hc()})};h.Dc=function(a){var d=b.ceil(u(hb/cc)),c=u(a-s+d);if(c>w){if(a-s>p/2)a-=p;else if(a-s<=-p/2)a+=p}else a=s+c-d;return a};m.call(this);h.$Elmt=o=a.W(o);var j=a.e({$FillMode:0,$LazyLoading:1,$StartIndex:0,$AutoPlay:d,$Loop:1,$HWA:c,$NaviQuitDrag:c,$AutoPlaySteps:1,$AutoPlayInterval:3e3,$PauseOnHover:1,$SlideDuration:500,$SlideEasing:l.$EaseOutQuad,$MinDragOffsetToSlide:20,$SlideSpacing:0,$DisplayPieces:1,$ParkingPosition:0,$UISearchMode:1,$PlayOrientation:1,$DragOrientation:1},Lb),ib=j.$PlayOrientation&3,Yb=(j.$PlayOrientation&4)/-4||1,fb=j.$SlideshowOptions,N=a.e({$Class:t,$PlayInMode:1,$PlayOutMode:1},j.$CaptionSliderOptions),ab=j.$BulletNavigatorOptions,M=j.$ArrowNavigatorOptions,F=j.$ThumbnailNavigatorOptions,W=j.$UISearchMode,v,C=a.v(o,"slides",e,W),db=a.v(o,"loading",e,W)||a.Q(f),Ob=a.v(o,"navigator",e,W),Ib=a.v(o,"arrowleft",e,W),bc=a.v(o,"arrowright",e,W),Mb=a.v(o,"thumbnavigator",e,W),kc=a.g(C),jc=a.h(C),T,X=[],sc=a.cb(C);a.b(sc,function(b){b.tagName=="DIV"&&!a.z(b,"u")&&X.push(b)});var s=-1,Eb,Ab,p=X.length,J=j.$SlideWidth||kc,H=j.$SlideHeight||jc,Xb=j.$SlideSpacing,qb=J+Xb,rb=H+Xb,cc=ib&1?qb:rb,w=b.min(j.$DisplayPieces,p),jb,x,L,Gb,G,Q=[],Qb,Sb,Pb,Kb,dc,S,Wb=j.$PauseOnHover,Vb=j.$SlideDuration,yb,eb,hb,Rb=w<p,K=Rb?j.$Loop:0,P,U,bb=1,R,I,V,Bb=0,Cb=0,E,cb,gb,vb,B,Y,z,Tb=new nc,nb;S=j.$AutoPlay;h.Pb=Lb;hc();o["jssor-slider"]=c;a.H(C,a.H(C)||0);a.w(C,"absolute");jb=a.D(C);a.Qb(a.O(C),jb,C);if(fb){Kb=fb.$ShowLink;yb=fb.$Class;eb=w==1&&p>1&&yb&&(!a.Hb()||a.ob()>=8)}hb=eb||w>=p||!(K&1)?0:j.$ParkingPosition;P=(w>1||hb?ib:-1)&j.$DragOrientation;var Db=C,A=[],y,O,tb="mousedown",ob="mousemove",wb="mouseup",mb,D,xb,Nb,zb;if(g.navigator.msPointerEnabled){tb="MSPointerDown";ob="MSPointerMove";wb="MSPointerUp";mb="MSPointerCancel";if(P){var sb="none";if(P==1)sb="pan-y";else if(P==2)sb="pan-x";a.uf(Db.style,"-ms-touch-action",sb)}}else if("ontouchstart" in g||"createTouch" in f){G=c;tb="touchstart";ob="touchmove";wb="touchend";mb="touchcancel"}Y=new wc;if(eb)y=new yb(Tb,J,H,fb,G);a.y(jb,Y.Cb);a.Y(C,"hidden");O=Zb();a.oc(O,"backgroundColor","#000");a.vb(O,0);a.Qb(Db,O,Db.firstChild);for(var pb=0;pb<X.length;pb++){var uc=X[pb],Jb=new vc(uc,pb);A.push(Jb)}a.G(db);vb=new xc;z=new mc(vb,Y);if(P){a.j(C,tb,rc);a.j(f,wb,ub);mb&&a.j(f,mb,ub)}Wb&=G?2:1;if(Ob&&ab){Qb=new ab.$Class(Ob,ab);Q.push(Qb)}if(M&&Ib&&bc){Sb=new M.$Class(Ib,bc,M);Q.push(Sb)}if(Mb&&F){F.$StartIndex=j.$StartIndex;Pb=new F.$Class(Mb,F);Q.push(Pb)}a.b(Q,function(a){a.rc(p,A,db);a.$On(q.Rb,ic)});h.$SetScaleWidth(h.$GetOriginalWidth());a.j(o,"mouseout",gc);a.j(o,"mouseover",fc);Fb();j.$ArrowKeyNavigation&&a.j(f,"keydown",function(a){if(a.keyCode==r.Xe)lb(-1);else a.keyCode==r.af&&lb(1)});var kb=j.$StartIndex;if(!(K&1))kb=b.max(0,b.min(kb,p-w));z.Tb(kb,kb,0)}n.$EVT_CLICK=21;n.$EVT_DRAG_START=22;n.$EVT_DRAG_END=23;n.$EVT_SWIPE_START=24;n.$EVT_SWIPE_END=25;n.$EVT_LOAD_START=26;n.$EVT_LOAD_END=27;n.$EVT_POSITION_CHANGE=202;n.$EVT_PARK=203;n.$EVT_SLIDESHOW_START=206;n.$EVT_SLIDESHOW_END=207;n.$EVT_PROGRESS_CHANGE=208;n.$EVT_STATE_CHANGE=209;n.$EVT_ROLLBACK_START=210;n.$EVT_ROLLBACK_END=211;g.$JssorSlider$=s=n};var q={Rb:1};g.$JssorBulletNavigator$=function(f,D){var h=this;m.call(h);f=a.W(f);var s,t,r,w,l=0,g,n,k,A,B,j,i,p,o,C=[],u=[];function z(a){a!=-1&&u[a].Jc(a==l)}function x(a){h.i(q.Rb,a*n)}h.$Elmt=f;h.mc=function(a){if(a!=w){var d=l,c=b.floor(a/n);l=c;w=a;z(d);z(c)}};h.ec=function(b){a.o(f,b)};var v;h.hc=function(){if(!v||g.$Scale==d){g.$AutoCenter&1&&a.q(f,(a.g(a.O(f))-t)/2);g.$AutoCenter&2&&a.r(f,(a.h(a.O(f))-r)/2);v=c}};var y;h.rc=function(D){if(!y){s=b.ceil(D/n);l=0;var q=p+A,v=o+B,m=b.ceil(s/k)-1;t=p+q*(!j?m:k-1);r=o+v*(j?m:k-1);a.g(f,t);a.h(f,r);for(var d=0;d<s;d++){var w=a.tf();a.Ve(w,d+1);var h=a.Ec(i,"NumberTemplate",w,c);a.w(h,"absolute");var z=d%(m+1);a.q(h,!j?q*z:d%k*q);a.r(h,j?v*z:b.floor(d/(m+1))*v);a.y(f,h);C[d]=h;g.$ActionMode&1&&a.j(h,"click",a.x(e,x,d));g.$ActionMode&2&&a.j(h,"mouseover",a.x(e,x,d));u[d]=a.Ub(h)}y=c}};h.Pb=g=a.e({$SpacingX:0,$SpacingY:0,$Orientation:1,$ActionMode:1},D);i=a.v(f,"prototype");p=a.g(i);o=a.h(i);a.xb(f,i);n=g.$Steps||1;k=g.$Lanes||1;A=g.$SpacingX;B=g.$SpacingY;j=g.$Orientation-1};g.$JssorArrowNavigator$=function(b,g,r){var f=this;m.call(f);var h,i,o=a.O(b),n=a.g(b),k=a.h(b);function j(a){f.i(q.Rb,a,c)}f.mc=function(c,b,a){if(a);};f.ec=function(c){a.o(b,c);a.o(g,c)};var p;f.hc=function(){if(!p||h.$Scale==d){var f=a.g(o),e=a.h(o);if(h.$AutoCenter&1){a.q(b,(f-n)/2);a.q(g,(f-n)/2)}if(h.$AutoCenter&2){a.r(b,(e-k)/2);a.r(g,(e-k)/2)}p=c}};var l;f.rc=function(){if(!l){a.j(b,"click",a.x(e,j,-i));a.j(g,"click",a.x(e,j,i));a.Ub(b);a.Ub(g);l=c}};f.Pb=h=a.e({$Steps:1},r);i=h.$Steps};g.$JssorThumbnailNavigator$=function(i,z){var h=this,x,p,e,u=[],y,w,f,l,n,t,r,k,o,g,j;m.call(h);i=a.W(i);function A(m,d){var g=this,b,l,k;function n(){l.Jc(p==d)}function i(){if(!o.$LastDragSucceded()){var a=f-d%f,b=o.Dc((d+a)/f-1),c=b*f+f-a;h.i(q.Rb,c)}}g.X=d;g.Zc=n;k=m.Od||m.Ab||a.Q();g.Cb=b=a.Ec(j,"ThumbnailTemplate",k,c);l=a.Ub(b);e.$ActionMode&1&&a.j(b,"click",i);e.$ActionMode&2&&a.j(b,"mouseover",i)}h.mc=function(c,d,e){var a=p;p=c;a!=-1&&u[a].Zc();u[c].Zc();!e&&o.$PlayTo(o.Dc(b.floor(d/f)))};h.ec=function(b){a.o(i,b)};h.hc=a.bb;var v;h.rc=function(E,C){if(!v){x=E;b.ceil(x/f);p=-1;k=b.min(k,C.length);var h=e.$Orientation&1,q=t+(t+l)*(f-1)*(1-h),m=r+(r+n)*(f-1)*h,B=q+(q+l)*(k-1)*h,z=m+(m+n)*(k-1)*(1-h);a.w(g,"absolute");a.Y(g,"hidden");e.$AutoCenter&1&&a.q(g,(y-B)/2);e.$AutoCenter&2&&a.r(g,(w-z)/2);a.g(g,B);a.h(g,z);var j=[];a.b(C,function(m,e){var i=new A(m,e),d=i.Cb,c=b.floor(e/f),k=e%f;a.q(d,(t+l)*k*(1-h));a.r(d,(r+n)*k*h);if(!j[c]){j[c]=a.Q();a.y(g,j[c])}a.y(j[c],d);u.push(i)});var D=a.e({$AutoPlay:d,$NaviQuitDrag:d,$SlideWidth:q,$SlideHeight:m,$SlideSpacing:l*h+n*(1-h),$MinDragOffsetToSlide:12,$SlideDuration:200,$PauseOnHover:1,$PlayOrientation:e.$Orientation,$DragOrientation:e.$DisableDrag?0:e.$Orientation},e);o=new s(i,D);v=c}};h.Pb=e=a.e({$SpacingX:3,$SpacingY:3,$DisplayPieces:1,$Orientation:1,$AutoCenter:3,$ActionMode:1},z);y=a.g(i);w=a.h(i);g=a.v(i,"slides");j=a.v(g,"prototype");t=a.g(j);r=a.h(j);a.xb(g,j);f=e.$Lanes||1;l=e.$SpacingX;n=e.$SpacingY;k=e.$DisplayPieces};function t(){i.call(this,0,0);this.uc=a.bb}g.$JssorCaptionSlider$=function(q,k,g){var d=this,j,o=g?k.$PlayInMode:k.$PlayOutMode,f=k.$CaptionTransitions,p={lb:"t",$Delay:"d",$Duration:"du",$ScaleHorizontal:"x",$ScaleVertical:"y",$Rotate:"r",$Zoom:"z",$Opacity:"f",L:"b"},e={A:function(b,a){if(!isNaN(a.P))b=a.P;else b*=a.Wd;return b},$Opacity:function(b,a){return this.A(b-1,a)}};e.$Zoom=e.$Opacity;i.call(d,0,0);function m(r,l){var k=[],i,j=[],c=[];function h(c,d){var b={};a.b(p,function(g,h){var e=a.z(c,g+(d||""));if(e){var f={};if(g=="t")f.P=e;else if(e.indexOf("%")+1)f.Wd=a.ld(e)/100;else f.P=a.ld(e);b[h]=f}});return b}function n(){return f[b.floor(b.random()*f.length)]}function d(g){var h;if(g=="*")h=n();else if(g){var e=f[a.qf(g)]||f[g];if(a.Db(e)){if(g!=i){i=g;c[g]=0;j[g]=e[b.floor(b.random()*e.length)]}else c[g]++;e=j[g];if(a.Db(e)){e=e.length&&e[c[g]%e.length];if(a.Db(e))e=e[b.floor(b.random()*e.length)]}}h=e;if(a.Qc(h))h=d(h)}return h}var q=a.cb(r);a.b(q,function(b){var c=[];c.$Elmt=b;var f=a.z(b,"u")=="caption";a.b(g?[0,3]:[2],function(k,n){if(f){var j,g;if(k!=2||!a.z(b,"t3")){g=h(b,k);if(k==2&&!g.lb){g.$Delay=g.$Delay||{P:0};g=a.e(h(b,0),g)}}if(g&&g.lb){j=d(g.lb.P);if(j){var i=a.e({$Delay:0,$ScaleHorizontal:1,$ScaleVertical:1},j);a.b(g,function(c,a){var b=(e[a]||e.A).apply(e,[i[a],g[a]]);if(!isNaN(b))i[a]=b});if(!n)if(g.L)i.L=g.L.P||0;else if(o&2)i.L=0}}c.push(i)}if(l%2&&!n)c.ud=m(b,l+1)});k.push(c)});return k}function n(x,d,F){var j={$Easing:d.$Easing,$Round:d.$Round,$During:d.$During,$Reverse:g&&!F,zd:c},k=x,D=a.O(x),o=a.g(k),n=a.h(k),z=a.g(D),y=a.h(D),f={},l={},m=d.$ScaleClip||1;if(d.$Opacity)f.$Opacity=2-d.$Opacity;j.wb=o;j.rb=n;if(d.$Zoom||d.$Rotate){f.$Zoom=d.$Zoom?d.$Zoom-1:1;if(a.J()||a.pb())f.$Zoom=b.min(f.$Zoom,2);l.$Zoom=1;var s=d.$Rotate||0;if(s==c)s=1;f.$Rotate=s*360;l.$Rotate=0}else if(d.$Clip){var E={$Top:0,$Right:o,$Bottom:n,$Left:0},w=a.e({},E),e=w.C={},v=d.$Clip&4,A=d.$Clip&8,t=d.$Clip&1,C=d.$Clip&2;if(v&&A){e.$Top=n/2*m;e.$Bottom=-e.$Top}else if(v)e.$Bottom=-n*m;else if(A)e.$Top=n*m;if(t&&C){e.$Left=o/2*m;e.$Right=-e.$Left}else if(t)e.$Right=-o*m;else if(C)e.$Left=o*m;j.$Move=d.$Move;f.$Clip=w;l.$Clip=E}var p=d.$FlyDirection,q=0,r=0,B=d.$ScaleHorizontal,u=d.$ScaleVertical;if(h.Rc(p))q-=z*B;else if(h.Sc(p))q+=z*B;if(h.Tc(p))r-=y*u;else if(h.dd(p))r+=y*u;if(q||r||j.$Move){f.$Left=q+a.q(k);f.$Top=r+a.r(k)}var G=d.$Duration;l=a.e(l,a.vd(k,f));j.Ac=a.yd();return new i(d.$Delay,G,j,k,l,f)}function l(b,c){a.b(c,function(c){var f,h=c.$Elmt,e=c[0],i=c[1];if(e){f=n(h,e);b=f.Bb(a.kc(e.L)?b:e.L,1)}b=l(b,c.ud);if(i){var g=n(h,i,1);g.Bb(b,1);d.ab(g);j.ab(g)}f&&d.ab(f)});return b}d.uc=function(){d.K(d.N()*(g||0));j.xc()};j=new i(0,0);l(0,o?m(q,1):[])}})(window,document,Math,null,true,false);NHS.Scripts.ImageViewer=function(a){this.parameters=a;this.brightcovePlayer=null;this.youtubePlayer=null;this.logger=a.looger||logger;this.defaultWidth=640;this.defaulHeight=480;this.youtubePlayer=null;this.slider=null;this.sliderOptions={$FillMode:4,$AutoPlay:false,$DragOrientation:1,$ArrowKeyNavigation:true,$SlideDuration:900,$StartIndex:0,$LazyLoading:1,$Loop:0,$ArrowNavigatorOptions:{$Class:$JssorArrowNavigator$,$ChanceToShow:2,$AutoCenter:2},$ThumbnailNavigatorOptions:{$Class:$JssorThumbnailNavigator$,$ChanceToShow:2,$Loop:0,$SpacingX:2,$DisplayPieces:9,$ParkingPosition:360,$ArrowNavigatorOptions:{$Class:$JssorArrowNavigator$,$ChanceToShow:2,$AutoCenter:2,$Steps:9}}}};NHS.Scripts.ImageViewer.prototype={initialize:function(){var c=this;this.slider=new $JssorSlider$(this.parameters.containerName,this.sliderOptions);this.slider.$On($JssorSlider$.$EVT_PARK,this.onSlideChanges.bind(this));this.slider.$On($JssorSlider$.$EVT_CLICK,this.onSlideClick.bind(this));this.playingVideo=false;this.youtubePlayer=null;this.brightCovePlayer=null;this.brightCovePlayerTemplate='<object id="nhs_brightCovePlayer" class="BrightcoveExperience"><param name="bgcolor" value="#FFF /><param name="width" value="{{width}}" /><param name="height" value="{{height}}" /><param name="playerID" value="{{playerID}}" /><param name="playerKey" value="{{playerKey}}" /><param name="isVid" value="true" /><param name="isUI" value="true" /><param name="dynamicStreaming" value="true" /><param name="wmode" value="transparent"><param name="@videoPlayer" value="{{videoID}}"; /><param name="htmlFallback" value="true" /><param name="autoStart" value="true" /></object>';this.slides=$jq("div[u='slides'] .nhs_slide");$jq("div.w").each(function(b,c){var a=$jq(this.slides[b]).data("type");(a=="v-bc"||a=="v-yt")&&$jq(c).append('<div class="nhs_videoThumbIcon"></div>')}.bind(this));$jq("#"+this.parameters.arrowLeftControlId).click(function(a){this.onNextorPrevClicked(0,a)}.bind(this));$jq("#"+this.parameters.arrowRightControlId).click(function(a){this.onNextorPrevClicked(1,a)}.bind(this));$jq(".nhs_thumbsControls .nhs_arrowXLl").click(function(){this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Icon Backward")}.bind(this));$jq(".nhs_thumbsControls .nhs_arrowXLr").click(function(){this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Icon Forward")}.bind(this));if(this.areThereYoutubeVideos()){var b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)}$jq(".nhs_iconsBarWapper a, .nhs_iconsBarWapper span").click(function(){var b=$jq(this).data("type"),a=$jq($jq(".nhs_slides div[data-type^='"+b.split(",")[0]+"']")[0]);if(a.length==0)a=$jq($jq(".nhs_slides div[data-type^='"+b.split(",")[1]+"']")[0]);a!=null&&a.index()!=-1&&c.slider.$PlayTo(a.index()-1);return false});$jq("#"+this.parameters.freeBrochureTopButton).click(function(){this.slider.$PlayTo(this.getSlidesCount()-1)}.bind(this));$jq("#"+this.parameters.arrowLeftControlId).addClass("nhs_disabledArrow");$jq("#nhs_PlayerCommunityName a").click(function(){this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Favorite")}.bind(this));$jq("#nhs_PinterestOverlayBig #button_pin_it a").click(function(){this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Pinterest")}.bind(this));$jq("#nhs_playerLeadForm #btnFreeBrochure").click(function(){this.logGAEvent("Lead Events","Image Viewer - Main Form","Submit Form - Free Brochure")}.bind(this));!navigator.userAgent.match(/(iPhone|iPod|iPad|BlackBerry|IEMobile)/)&&$jq(window).bind("resize",this.scaleSlider.bind(this));$jq(".nhs_slide[data-type^='i-']").length==0&&$jq(".nhs_iconBarImage").hide();$jq(".nhs_slide[data-type^='l-flp']").length==0&&$jq(".nhs_iconBarFloorPlan").hide();$jq(".nhs_slide[data-type^='l-vt']").length==0&&$jq(".nhs_iconBarTour").hide();$jq(".nhs_slide[data-type^='l-ev']").length==0&&$jq(".nhs_slide[data-type^='v-']").length==0&&$jq(".nhs_iconBarVideo").hide();!this.areThereVideos()&&$jq("li.nhs_iconBarVideo").insertAfter($jq("li.nhs_iconBarImage"));this.setupIconsBar();this.getSlidesCount()>0&&$jq("#"+this.parameters.titleControlId).text($jq(this.getCurrentSlide()).data("title"));this.getSlidesCount()<=9&&$jq(".nhs_thumbsControls").hide()},getCurrentSlide:function(){return $jq(this.slides[this.slider.$CurrentIndex()])},getSlidesCount:function(){return this.slider.$SlidesCount()},areThereYoutubeVideos:function(){return $jq("#nhs_SliderContainer div[data-type='v-yt']").length>0},areThereVideos:function(){return $jq("#nhs_SliderContainer div[data-type='v-yt'], #nhs_SliderContainer div[data-type='v-bc']").length>0},playYouTubeVideo:function(a){this.playingVideo=true;if(this.youtubePlayer!=undefined&&this.youtubePlayer!=null)this.youtubePlayer.loadVideoById(a);else this.youtubePlayer=new YT.Player(this.parameters.youtubeControlId,{height:this.parameters.videoHeight,width:this.parameters.videoWidth,videoId:a,playerVars:{autoplay:1}})},playBrightcoveVideo:function(a){this.playingVideo=true;if(this.brightCovePlayer==null){var c={playerID:"1667945989001",videoID:a,width:this.parameters.videoWidth,height:this.parameters.videoHeight,playerKey:this.parameters.brightcoveToken},b=this.markup(this.brightCovePlayerTemplate,c);$jq("#"+this.parameters.brightcoveControlId).html(b);brightcove.createExperiences()}else this.brightCovePlayer.loadVideo(a)},stopVideo:function(){this.playingVideo=false;$jq("#"+this.parameters.youtubeControlId).css("display","none");$jq("#"+this.parameters.brightcoveControlId).css("display","none");this.youtubePlayer!=undefined&&this.youtubePlayer!=null&&this.youtubePlayer.stopVideo();$jq("#"+this.parameters.brightcoveControlId).html("")},scaleSlider:function(){var a=document.body.clientWidth;if(a)this.slider.$SetScaleWidth(Math.min(a,1920));else window.setTimeout(this.scaleSlider.bind(this),30)},resizeSlider:function(){var a=this.slider.$Elmt.parentNode.clientWidth-100;if(a>1500)a=1500;var b=a+"px";if(a){jQuery("#nhs_SliderContainer, .nhs_SliderWrapper, .nhs_slide, .nhs_thumbnails, .nhs_thumbnails > div, .nhs_thumbs").css("width",b);var c=jQuery(".nhs_slide").height()+"px";jQuery(".nhs_slide").css("line-height",c);jQuery(".nhs_slide").css("left",b)}else window.setTimeout(this.resizeSlider,30)},setupIconsBar:function(){$jq(".nhs_iconsBar li").removeClass("active");$jq(".nhs_iconsBar li span").removeClass("active");var a=this.getCurrentSlide().data("type");if(a=="l-flp"){$jq(".nhs_iconBarFloorPlan").addClass("active");$jq(".nhs_iconBarFloorPlan > span").addClass("active")}else if(a=="l-vt"){$jq(".nhs_iconBarTour").addClass("active");$jq(".nhs_iconBarTour > span").addClass("active")}else if(a=="l-ev"||a.indexOf("v-")!=-1){$jq(".nhs_iconBarVideo").addClass("active");$jq(".nhs_iconBarVideo > span").addClass("active")}else if(a.indexOf("i")!=-1){$jq(".nhs_iconBarImage").addClass("active");$jq(".nhs_iconBarImage > span").addClass("active")}},createSlides:function(){this.parameters!=null&&this.parameters.mediaObjects!=null&&$.each(this.parameters.mediaObjects,function(b,a){$jq("#"+this.parameters.containerName+" div[u='slides']").append('<div><img u="image" src="'+this.parameters.imagesResourceDomain+a.Url+'" /><img u="thumb" src="'+this.parameters.imagesResourceDomain+a.Thumbnail+'" /></div>')}.bind(this))},logGAEvent:function(a,b,c){$jq.googlepush(a,b,c)},onSlideClick:function(f,d){var a=this.getCurrentSlide().data("type");a=="l-flp"&&this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Floorplan Click");a=="l-vt"&&this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Tour Click");a.indexOf("i-")!=-1&&this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Media Click");if(a.indexOf("l-")!=-1){var e=this.getCurrentSlide().data("url"),c=this.getCurrentSlide().data("event");this.logger.logAndRedirect(d,e,c,this.parameters.communityId,this.parameters.builderId,this.parameters.planId,this.parameters.specId,this.parameters.marketId,true)}else if(a=="v-yt"){var b=this.getCurrentSlide().data("id");$jq("#"+this.parameters.youtubeControlId).show();this.playYouTubeVideo(b);this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Video Click")}else if(a=="v-bc"){var b=this.getCurrentSlide().data("id");$jq("#"+this.parameters.brightcoveControlId).show();this.playBrightcoveVideo(b);this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Video Clic")}},onNextorPrevClicked:function(a){this.playingVideo&&this.stopVideo();this.wasArrowClick=true;(this.slider.$CurrentIndex()>0&&a==0||this.slider.$CurrentIndex()<this.getSlidesCount()-1&&a==1)&&$jq.googlepush("Image Viewer","Image Viewer",a?"Image Viewer - Main Forward":"Image Viewer - Main Backward")},onSlideChanges:function(b){var a=this.getCurrentSlide().data("type");this.playingVideo&&this.stopVideo();this.setupIconsBar();if(!this.wasArrowClick){(a.indexOf("v-")!=-1||a.indexOf("l-ev")!=-1)&&this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Video Slide");if(a.indexOf("l-flp")!=-1)this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Floorplan Slide");else if(a.indexOf("i-")!=-1)this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Media Slide");else if(a.indexOf("l-vt")!=-1)this.logGAEvent("Image Viewer","Image Viewer","Image Viewer - Tours");else a=="brochure"&&this.logGAEvent("Lead Events","Image Viewer - Main Form","Open Form - Free Brochure")}else this.wasArrowClick=false;if($jq(this.getCurrentSlide()).data("title")==undefined)$jq("#"+this.parameters.titleControlId).text("");else $jq("#"+this.parameters.titleControlId).text($jq(this.getCurrentSlide()).data("title"));$jq("#"+this.parameters.arrowLeftControlId).removeClass("nhs_disabledArrow");$jq("#"+this.parameters.arrowRightControlId).removeClass("nhs_disabledArrow");if(b==this.getSlidesCount()-1)$jq("#"+this.parameters.arrowRightControlId).addClass("nhs_disabledArrow");else b==0&&$jq("#"+this.parameters.arrowLeftControlId).addClass("nhs_disabledArrow")},markup:function(a,c){var b,e=0,d=a.match(c instanceof Array?/{{\d+}}/g:/{{\w+}}/g)||[];while(b=d[e++])a=a.replace(b,c[b.substr(2,b.length-4)]);return a}}