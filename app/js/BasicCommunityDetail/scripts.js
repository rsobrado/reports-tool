var BCMAPI=new function(){this.token="";this.callback="BCMAPI.flush";this.url="http://api.brightcove.com/services/library";this.calls=[{command:"find_all_videos",def:false},{command:"find_video_by_id",def:"video_id"},{command:"find_video_by_id_unfiltered",def:"video_id"},{command:"find_videos_by_ids",def:"video_ids"},{command:"find_videos_by_ids_unfiltered",def:"video_ids"},{command:"find_video_by_reference_id",def:"reference_id"},{command:"find_video_by_reference_id_unfiltered",def:"reference_id"},{command:"find_videos_by_reference_ids",def:"reference_ids"},{command:"find_videos_by_reference_ids_unfiltered",def:"reference_ids"},{command:"find_videos_by_campaign_id",def:"campaign_id"},{command:"find_videos_by_tags",def:"or_tags"},{command:"find_videos_by_text",def:"text"},{command:"find_videos_by_user_id",def:"user_id"},{command:"find_modified_videos",def:"from_date"},{command:"find_related_videos",def:"video_id"},{command:"find_all_playlists",def:false},{command:"find_playlist_by_id",def:"playlist_id"},{command:"find_playlists_by_ids",def:"playlist_ids"},{command:"find_playlist_by_reference_id",def:"reference_id"},{command:"find_playlists_by_reference_ids",def:"reference_ids"},{command:"find_playlists_for_player_id",def:"player_id"},{command:"search_videos",def:"all"}];this.inject=function(b){var a=document.createElement("script");a.setAttribute("src",this.url+"?"+b);a.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(a);return true};this.find=function(c,a){c=c.toLowerCase().replace(/(find_)|(_)|(get_)/g,"");a=a||null;var f=null,b="";for(var d in this.calls){if(typeof this.calls[d].command=="undefined")continue;if(c==this.calls[d].command.toLowerCase().replace(/(find_)|(_)|(get_)/g,"")){c=this.calls[d].command;if(typeof this.calls[d].def!="undefined")f=this.calls[d].def;break}}b="command="+c;if(typeof a=="object"&&a){for(var e in a)if(e=="selector")b+="&"+f+"="+encodeURIComponent(a[e]);else b+="&"+e+"="+encodeURIComponent(a[e]);if(typeof a.callback!="string")b+="&callback="+this.callback;if(typeof a.token!="string")b+="&token="+this.token}else if(a){b+="&"+f+"="+encodeURIComponent(a)+"&callback="+this.callback;b+="&token="+this.token}else{b+="&token="+this.token;b+="&callback="+this.callback}this.inject(b);return true};this.search=function(a){return this.find("search_videos",a)};this.flush=function(){return true}};var bcExp,bcVP,bcImg,bcVw,_imageBaseUrl,_imgNLinks,_mp_listingType,_bcExperienceID,mp_captionBarID,_videos,_currentObjCache,_globalParams,loadURL,loadSubType,loadTitle,loadIndex,loadCue,loadID,modExp,modCon;NHS.Scripts.MediaPlayerVideo=function(a){if(a.mediaObjs.length==0)mp_mediaItems=null;else mp_mediaItems=a.mediaObjs;_mp_ComID=a.hasOwnProperty("communityID")?a.communityID:0;_mp_PlanID=a.hasOwnProperty("planID")?a.planID:0;_mp_SpecID=a.hasOwnProperty("specID")?a.specID:0;_mp_builderID=a.builderID;_mp_listingType=a.hasOwnProperty("specID")?"spec":a.hasOwnProperty("planID")?"plan":a.hasOwnProperty("communityID")?"com":"commres";this._externalLinks=a.externalLinks;_globalParams=a;_bcExperienceID=a.bcExperienceID;_imgBaseUrl=a.imgBaseUrl;this._titlebarID=a.titleBarID;_mp_listingType=="com"?$jq("#"+this._titlebarID).text("Community Gallery"):$jq("#"+this._titlebarID).text("Home Gallery");mp_captionBarID=a.captionBarID;_mp_imgtitleBar=a.imgtitleBar;_logger=a.logger;this.marketId=a.marketID;this.marketName=a.marketName};onTemplateReady=function(){var a=this.myvidid,b=this.mysubtype,c=this.mytitle,d=this.myindex,e=this.mycue,f=this.myid;NHS.Scripts.MediaPlayerVideo.loadVideo(a,b,c,d,e,f);this.allLoaded=true};myTemplateLoaded=function(a){bcExp=brightcove.api.getExperience(a);bcVP=bcExp.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);modExp=bcExp.getModule(brightcove.api.modules.APIModules.EXPERIENCE);modCon=bcExp.getModule(brightcove.api.modules.APIModules.CONTENT);var c=$jq(".BrightcoveExperience").width(),b=$jq(".BrightcoveExperience").height();modExp.setSize(c,b)};NHS.Scripts.MediaPlayerVideo.prototype={_initialize:function(a){BCMAPI.token="HYWld5USmeg7f3O0xaq2UgSaQBVyuw72JRRcM_k4sRX7yIGlb-lcuQ..";BCMAPI.callback=a;_currentObjCache=this},_popImgnLnksFromMediaItems:function(b){_imgNLinks=[];var a=false;if(mp_mediaItems!=null){var c=mp_mediaItems;jQuery.each(c,function(c,b){if(b.Type==="i"){_imgNLinks.push(b);a=true}})}if(_currentObjCache._externalLinks!=null&&_currentObjCache._externalLinks.length>0){var d=_currentObjCache._externalLinks;jQuery.each(d,function(c,b){_imgNLinks.push(b);a=true})}if(!b&&a);!b&&!a&&NHS.Scripts.MediaPlayerVideo._noMedia()},loadShowCasePlayer:function(){$jq("#videoList").empty();this._initialize("NHS.Scripts.MediaPlayerVideo._popShowcaseVideos");var a=NHS.Scripts.MediaPlayerVideo._getTags(),c=a!="",b=this.marketName+"_"+this.marketId;a+=a!==""?",showcasevideo,":"showcasevideo";a=b+",allmarkets-"+_globalParams.brightCoveSuffix+","+a;BCMAPI.find("find_videos_by_tags",{or_tags:a,fields:"name,id,referenceId,thumbnailURL,tags"})},loadMediaPlayer:function(a){if(a=="community")this.loadComDetailsMediaPlayer();else if(a=="home")this.loadHomDetailsMediaPlayer();else a=="results"&&this.loadShowCasePlayer()},loadComDetailsMediaPlayer:function(){this._loadDetailsMediaPlayer("NHS.Scripts.MediaPlayerVideo._popComVideos")},loadHomDetailsMediaPlayer:function(){this._loadDetailsMediaPlayer("NHS.Scripts.MediaPlayerVideo._popHomVideos")},_loadDetailsMediaPlayer:function(b){this._initialize(b);var a=NHS.Scripts.MediaPlayerVideo._getTags(),c=a!="";if(c)BCMAPI.find("find_videos_by_tags",{or_tags:a,fields:"id,referenceId,thumbnailURL,tags"});else this._popImgnLnksFromMediaItems(false)}};NHS.Scripts.MediaPlayerVideo._getTags=function(){var a="";if(mp_mediaItems!=null){jQuery.each(mp_mediaItems,function(c,b){if(b.Type==="v")a+=b.VideoID+","});a=a.substr(0,a.length-1)}return a};NHS.Scripts.MediaPlayerVideo._popComVideos=function(a){NHS.Scripts.MediaPlayerVideo._popVideos(a,"cv")};NHS.Scripts.MediaPlayerVideo._popHomVideos=function(a){NHS.Scripts.MediaPlayerVideo._popVideos(a,"hv")};NHS.Scripts.MediaPlayerVideo._popShowcaseVideos=function(a){NHS.Scripts.MediaPlayerVideo._popVideos(a,"sv")};NHS.Scripts.MediaPlayerVideo._popVideos=function(d,j){_currentObjCache._popImgnLnksFromMediaItems(d.items.length!=0);var a=[],b=[],h=[],m=NHS.Scripts.MediaPlayerVideo.lookUpTable,f=j,c="";jQuery.each(d.items,function(r,e){var j=0,p=0,i=0;if(e.referenceId==null)e.referenceId="";if(e.tags.length>=2){var g=e.tags[1],k=e.tags[0];if(g.indexOf("-")!=-1){var q=k;k=g;g=q}var l=k.split("-");if(l.length>2){j=l[1];i=l[2]}var n=true;mp_mediaItems!=null&&e.tags[0]!="showcasevideo"&&jQuery.each(mp_mediaItems,function(b,a){if(a.RefID==i){n=false;c=a.Title;p=a.Sort*1;return false}})}_videos=d.items;var m=false;a.length>0&&g!=""&&e.tags[0]!="showcasevideo"&&jQuery.each(a,function(b,a){if(g==a.hash){m=true;return false}});if(!m&&!n&&e.tags[0]!="showcasevideo")a[a.length]={Type:"v",SubType:f,Thumbnail:e.thumbnailURL,Title:c==null||c==""?e.name:c,Url:e.id,ID:j,Sort:p,hash:g,refID:i,IsYouTubeVideo:false};if(e.tags[0]=="showcasevideo")b[b.length]={Type:"v",SubType:f,Thumbnail:e.thumbnailURL,Title:e.name,Url:e.id,ID:0,Sort:1,hash:g,IsYouTubeVideo:false};if($jq.inArray(this.marketName+"_"+this.marketID,e.tags)!=-1||$jq.inArray("allmarkets-"+_globalParams.brightCoveSuffix,e.tags)!=-1){var o=1e3;if(e.referenceId!=null&&e.referenceId.indexOf("_")!=-1)o=e.referenceId.substr(e.referenceId.lastIndexOf("_")+1);h[h.length]={Type:"v",SubType:f,Thumbnail:e.thumbnailURL,Title:e.name,Url:e.id,ID:j,Sort:parseInt(o),hash:g,VideoStillURL:e.videoStillURL,IsYouTubeVideo:false}}});if(d.items.length!=0){var i=[];if(typeof mp_mediaItems!="undefined"&&mp_mediaItems!=null)for(var g=0,l=mp_mediaItems.length;g<l;g++)$jq.each(a,function(){mp_mediaItems[g].RefID.toString()==this.refID&&i.push(this)});a=i.groupNSort(function(a){return a.ID},function(a,b){if(a.Sort==b.Sort)return b.Sort.localeCompare(a.Sort);else return a.Sort-b.Sort});if(b.length>1)a=a.concat(b);NHS.Scripts.MediaPlayerVideo._bindTmpl(a,true);var e=a.length;if(!!_imgNLinks&&_imgNLinks.length!=0){NHS.Scripts.MediaPlayerVideo._bindTmpl(_imgNLinks,false);e=e+_imgNLinks.length}var k=j=="sv"?2:3;NHS.Scripts.MediaPlayerVideo._buildCarousel(e,k);if(a.length!=0)NHS.Scripts.MediaPlayerVideo.loadVideo(a[0].Url,a[0].SubType,a[0].Title,1,true,a[0].ID);else NHS.Scripts.MediaPlayerVideo.loadVideo(b[0].Url,b[0].SubType,b[0].Title,1,true,b[0].ID)}};NHS.Scripts.MediaPlayerVideo._bindTmpl=function(a,b){if(typeof a!=="undefined")if(a.length>0){b&&$jq("#videoList").empty();$jq.tmpl("mpTmpl",a).appendTo("#videoList")}};NHS.Scripts.MediaPlayerVideo._buildCarousel=function(a){if(a==0)NHS.Scripts.MediaPlayerVideo._noMedia();else{$jq("#nhs_VideoWrapper").jCarouselLite({circular:a>3,btnNext:"#nhs_VideoPlaylistNext",btnPrev:"#nhs_VideoPlaylistPrev",auto:3700,speed:1800,easing:"swing",visible:Math.min(3,a),scroll:2});NHS.Scripts.MediaPlayerVideo._animate()}NHS.Scripts.MediaPlayerVideo._noOfCarouselItems=a};NHS.Scripts.MediaPlayerVideo._logMedia=function(){if(_mp_listingType=="com")_logger.logEvent("CDVM",_mp_ComID,_mp_builderID);else _logger.logEvent("HDVM",_mp_ComID,_mp_builderID,_mp_PlanID,_mp_SpecID)};NHS.Scripts.MediaPlayerVideo._logVideo=function(b){var a="";if(_mp_listingType=="commres")_logger.logEvent("CRVID",b,0);else if(_mp_listingType=="com"){_logger.logEvent("CDVID",_mp_ComID,_mp_builderID);a="siteCommVV"}else{_logger.logEvent("HDVID",_mp_ComID,_mp_builderID,_mp_SpecID>0?0:_mp_PlanID,_mp_SpecID);a="siteHomeVV"}a!=""&&jQuery.SetDataLayerPair(a)};NHS.Scripts.MediaPlayerVideo._animate=function(){$jq("#nhsplayer").fadeIn(100);$jq("#nhsplayerloading").fadeOut();$jq("#nhsplayerloading").hide()};NHS.Scripts.MediaPlayerVideo._noMedia=function(){$jq("#nhsplayer").hide();$jq("#noImage").fadeIn(100);$jq("#nhsplayerloading").fadeOut();$jq("#nhsplayerloading").hide()};NHS.Scripts.MediaPlayerVideo.loadImage=function(g,b,f,d,c){bcVP.setVisible(false);bcImg.setSource(_imgBaseUrl+g);bcImg.setScaleMode("scaleDown");$jq("#nhsplayerloading").hide();bcVw.setSelectedIndex(1);var a;if(_mp_listingType=="com")a=b=="ci"||b=="lm"?"Community Image":"Home Image";else a=NHS.Scripts.MediaPlayerVideo.lookUpTable[b];var e=d+" of "+NHS.Scripts.MediaPlayerVideo._noOfCarouselItems;a=" Now Showing: "+a;NHS.Scripts.MediaPlayerVideo._displayTitle(f,a,e);$jq("#nhs_MediaMaximize").show();c==false&&NHS.Scripts.MediaPlayerVideo._logMedia()};NHS.Scripts.MediaPlayerVideo.loadVideoByTag=function(b,d,c,e,g,f){if(b!=null){var a=null;jQuery.each(_videos,function(e,d){if(d.tags.length>1&&d.tags[1]==b||d.name==c)a=d.id});a!=null&&NHS.Scripts.MediaPlayerVideo.loadVideo(a,d,c,e,g,f)}};NHS.Scripts.MediaPlayerVideo.loadVideo=function(b,h,f,c,g,d){var a=_mp_listingType=="com"?"Community Video":"Home Video",e=c+" of "+NHS.Scripts.MediaPlayerVideo._noOfCarouselItems;a="Now Showing: "+a;NHS.Scripts.MediaPlayerVideo._displayTitle(f,a,e);$jq("#nhs_MediaMaximize").hide();bcVP.loadVideoByID(b);bcVP.play();$jq("#nhsplayerloading").hide();g==false&&NHS.Scripts.MediaPlayerVideo._logVideo(d)};NHS.Scripts.MediaPlayerVideo.loadVideoValues=function(b,a,d,f,e,c){this.loadURL=b;this.loadSubType=a;this.loadTitle=d;this.loadCue=e;this.loadID=c};NHS.Scripts.MediaPlayerVideo._displayTitle=function(a,b){$jq("#"+mp_captionBarID).text(b);if($jq.trim(a)!=""){$jq("#"+_mp_imgtitleBar).show().text(a);$jq("div.nhs_MediaImageTitle").show()}else $jq("div.nhs_MediaImageTitle").hide()};NHS.Scripts.MediaPlayerVideo._carouselTmpl=$jq.template("mpTmpl","<li>                        {{if Type === 'v'}}                        <a href='javascript:;'   onclick=\"NHS.Scripts.MediaPlayerVideo.loadVideo('${Url}','${SubType}','${Title}',${$index+1}, false, ${ID});\" class=\"video\" >                         <img src=\"${Thumbnail}\" title=\"${Title} \" />                           <span></span>                         </a>                         {{else Type === 'i'}}                         <a href='javascript:;' onclick=\"NHS.Scripts.MediaPlayerVideo.loadImage('${Url}','${SubType}','${Title}','${$index+1}', false);\" class=\"image\">                         <img src=\"${_imgBaseUrl+Thumbnail}\" title=\"${Title}\" />                         </a>                         {{else Type === 'l'}}                         {{html Url}}                         {{/if}}                        </li>");NHS.Scripts.MediaPlayerVideo.lookUpTable={cv:"Community Video",sv:"Community Video",hv:"Home Video",ci:"Community Image",hi:"Home Image",ev:"External Video",pv:"Plan Viewer",vir:"Virtual Tour",ele:"Elevation",flp:"FloorPlan","int":"Interior",ext:"Exterior",lm:"Community Lot Map"};NHS.Scripts.MediaPlayerVideo.GetPageSize=function(){var a=document.documentElement,c=window.innerWidth||self.innerWidth||a&&a.clientWidth||document.body.clientWidth,b=window.innerHeight||self.innerHeight||a&&a.clientHeight||document.body.clientHeight;arrayPageSize=[c,b];return arrayPageSize};NHS.Scripts.MediaPlayerVideo.Zoom=function(b,a){NHS.Scripts.MediaPlayerVideo._prevWidth=$jq(a).width();NHS.Scripts.MediaPlayerVideo._prevHeight=$jq(a).height();var d=$jq(a).width()*1.5,g=$jq(a).height()*1.5,e=NHS.Scripts.MediaPlayerVideo.GetPageSize(),h=e[0],f=e[1],c;if(f>640)c=640;else c=f-50;$jq(b).dialog("destroy");$jq(b).dialog({modal:true,autoStart:false,height:c,width:d+40,resizable:false,hide:"fold",show:"blind",close:function(){$jq(b).dialog("destroy");$jq(b).removeAttr("style").removeAttr("class");$jq(a).width(NHS.Scripts.MediaPlayerVideo._prevWidth).height(NHS.Scripts.MediaPlayerVideo._prevHeight);$jq("#nhsplayerContainer").append($jq(b))}});$jq(a).width(d);$jq(a).height(g);if(mp_timetoSeek>0);$jq(b).dialog("open");bcVP.pause(false)};NHS.Scripts.MediaPlayerVideo.onVideoLoad=function(){typeof mp_timetoSeek!=="undefined"&&bcVP.seek(mp_timetoSeek)};Array.prototype.groupBy=function(d){for(var a=0,e=this.length,b={},c;a<e;a++){if(!b[c="k:"+d(this[a],a,this)])b[c]=[];b[c].push(this[a])}return b};Array.prototype.groupNSort=function(d,c){var b=this.groupBy(d),a=[];for(grp in b){b[grp].sort(c);a=a.concat(b[grp])}return a};(function(a){a.fn.adGallery=function(b){var f={loader_image:b.resource_root+"/GlobalResourcesMvc/Default/images/imgs-player/loader.gif",listingType:b.listingType,start_at_index:0,description_wrapper:false,thumb_opacity:.8,animate_first_image:true,animation_speed:400,width:false,height:false,display_next_and_prev:true,display_back_and_forward:false,scroll_jump:0,slideshow:{enable:true,autostart:false,speed:4e3,start_label:"Start",stop_label:"Stop",stop_on_scroll:false,countdown_prefix:"(",countdown_sufix:")",onStart:false,onStop:false},effect:"fade",mp_type:false,noimg:false,nocdmain:b.resource_root+"/GlobalResourcesMvc/Default/images/blank.gif",wrapperW:false,wrapperH:false,enable_keyboard_move:true,cycle:true,callbacks:{init:false,afterImageVisible:false,beforeImageVisible:false}},d=a.extend(false,f,b);if(b&&b.slideshow)d.slideshow=a.extend(false,f.slideshow,b.slideshow);if(!d.slideshow.enable)d.slideshow.autostart=false;var e=[];a(this).each(function(){var a=new c(this,d);e[e.length]=a});return e};function e(b,e,a){var d=parseInt(b.css("top"),10);if(e=="left"){var c="-"+this.image_wrapper_height+"px";b.css("top",this.image_wrapper_height+"px")}else{var c=this.image_wrapper_height+"px";b.css("top","-"+this.image_wrapper_height+"px")}if(a){a.css("bottom","-"+a[0].offsetHeight+"px");a.animate({bottom:0},this.settings.animation_speed*2)}this.current_description&&this.current_description.animate({bottom:"-"+this.current_description[0].offsetHeight+"px"},this.settings.animation_speed*2);return {old_image:{top:c},new_image:{top:d}}}function d(b,e,a){var d=parseInt(b.css("left"),10);if(e=="left"){var c="-"+this.image_wrapper_width+"px";b.css("left",this.image_wrapper_width+"px")}else{var c=this.image_wrapper_width+"px";b.css("left","-"+this.image_wrapper_width+"px")}if(a){a.css("bottom","-"+a[0].offsetHeight+"px");a.animate({bottom:0},this.settings.animation_speed*2)}this.current_description&&this.current_description.animate({bottom:"-"+this.current_description[0].offsetHeight+"px"},this.settings.animation_speed*2);return {old_image:{left:c},new_image:{left:d}}}function f(a){var e=a.width(),c=a.height(),b=parseInt(a.css("left"),10),d=parseInt(a.css("top"),10);a.css({width:0,height:0,top:this.image_wrapper_height/2,left:this.image_wrapper_width/2});return {old_image:{width:0,height:0,top:this.image_wrapper_height/2,left:this.image_wrapper_width/2},new_image:{width:e,height:c,top:d,left:b}}}function g(a){a.css("opacity",0);return {old_image:{opacity:0},new_image:{opacity:1}}}function h(a){a.css("opacity",0);return {old_image:{opacity:0},new_image:{opacity:1},speed:0}}function c(b,a){this.init(b,a)}c.prototype={pageClick:1,numclicks:1,maxclicks:0,wrapper:false,image_wrapper:false,gallery_info:false,nav:false,loader:false,preloads:false,thumbs_wrapper:false,scroll_back:false,scroll_forward:false,next_link:false,prev_link:false,thumb_next_link:false,thumb_prev_link:false,slideshow:false,image_wrapper_width:0,image_wrapper_height:0,current_index:0,current_image:false,current_description:false,nav_display_width:0,settings:false,images:false,in_transition:false,animations:false,init:function(g,f){var d=this;this.wrapper=a(g);this.settings=f;this.setupElements();this.setupAnimations();if(this.settings.width){this.image_wrapper_width=this.settings.width;this.image_wrapper.width(this.settings.width);this.wrapper.width(this.settings.width)}else if(_wrapperW>0){this.image_wrapper_width=_wrapperW;this.image_wrapper.width(_wrapperW);this.wrapper.width(_wrapperW)}else this.image_wrapper_width=this.image_wrapper.width();if(this.settings.height){this.image_wrapper_height=this.settings.height;this.image_wrapper.height(this.settings.height)}else if(_wrapperH>0){this.image_wrapper_height=_wrapperH;this.image_wrapper.height(_wrapperH)}else this.image_wrapper_height=this.image_wrapper.height();this.nav_display_width=this.nav.width();this.current_index=0;this.current_image=false;this.current_description=false;this.in_transition=false;this.findImages();this.settings.display_next_and_prev&&this.initNextAndPrev();var e=function(a){return d.nextImage(a)};this.slideshow=new b(e,this.settings.slideshow);this.controls.append(this.slideshow.create());if(this.settings.slideshow.enable)this.slideshow.enable();else this.slideshow.disable();this.settings.display_back_and_forward&&this.initBackAndForward();this.settings.enable_keyboard_move&&this.initKeyEvents();var c=parseInt(this.settings.start_at_index,10);if(window.location.hash&&window.location.hash.indexOf("#ad-image")===0){c=window.location.hash.replace(/[^0-9]+/g,"");if(c*1!=c)c=this.settings.start_at_index}this.loading(true);this.showImage(c,function(){if(d.settings.slideshow.autostart){d.preloadImage(c+1);d.slideshow.start()}});this.fireCallback(this.settings.callbacks.init)},setupAnimations:function(){this.animations={"slide-vert":e,"slide-hori":d,resize:f,fade:g,none:h}},setupElements:function(){this.controls=this.wrapper.find(".ad-controls");this.image_wrapper=this.wrapper.find(".ad-image-wrapper");jQuery(this.image_wrapper).empty();this.image_wrapper.html("");this.nav=a(".ad-nav");this.thumbs_wrapper=this.nav.find(".ad-thumbs");this.preloads=a('<div class="ad-preloads"></div>');var b=this.settings.listingType;if(b=="spec"||b=="plan"){this.thumb_next_link=a("<div class=\"ad-next-thumb\" onclick=\"$jq.googlepush('Images','Home - Gallery','Forward Button');\"><div class=\"ad-next-imageThumb\"></div></div>");this.thumb_prev_link=a("<div class=\"ad-prev-thumb\" onclick=\"$jq.googlepush('Images','Home - Gallery','Back Button');\"><div class=\"ad-prev-imageThumb\"></div></div>")}else{this.thumb_next_link=a('<div class="ad-next-thumb"><div class="ad-next-imageThumb"></div></div>');this.thumb_prev_link=a('<div class="ad-prev-thumb"><div class="ad-prev-imageThumb"></div></div>')}this.nav.append(this.thumb_prev_link);this.nav.append(this.thumb_next_link);a(document.body).append(this.preloads)},loading:function(a){if(a);},addAnimation:function(c,b){if(a.isFunction(b))this.animations[c]=b},findImages:function(){var b=this;this.images=[];var d=0,e=0,f=this.thumbs_wrapper.find("a"),c=f.length;this.settings.thumb_opacity<1&&f.find("img").css("opacity",this.settings.thumb_opacity);var g=c%3;if(g==0)this.maxclicks=(c-g)/3;else this.maxclicks=(c-g)/3+1;f.each(function(h){var f=a(this),g=f.attr("href"),c=f.find("img");if(!b.isImageLoaded(c[0]))c.load(function(){d+=this.parentNode.parentNode.offsetWidth;e++});else{d+=c[0].parentNode.parentNode.offsetWidth;e++}f.addClass("ad-thumb"+h);if(g.indexOf("logredirect")>-1){var k=b.settings.listingType;if(k=="spec"||k=="plan")if(g.indexOf("tour")>-1||g.indexOf("virtual")>-1||g.indexOf("video")>-1||g.indexOf("HDVTCT")>-1)f.click(function(){$jq.googlepush("Outbound Links","Home - Gallery","Home Tour")});else(g.indexOf("floor")>-1||g.indexOf("plan")>-1||g.indexOf("HDPVCT")>-1)&&f.click(function(){$jq.googlepush("Outbound Links","Home - Gallery","Plan Viewer")});f.hover(function(){!a(this).is(".ad-active")&&b.settings.thumb_opacity<1&&a(this).find("img").fadeTo(300,1);b.preloadImage(h)},function(){!a(this).is(".ad-active")&&b.settings.thumb_opacity<1&&a(this).find("img").fadeTo(300,b.settings.thumb_opacity)})}else f.click(function(){b.showImage(h);b.slideshow.stop();var c=h%3,a=(h-c)/3+1;b.numclicks=a;return false}).hover(function(){!a(this).is(".ad-active")&&b.settings.thumb_opacity<1&&a(this).find("img").fadeTo(300,1);b.preloadImage(h)},function(){!a(this).is(".ad-active")&&b.settings.thumb_opacity<1&&a(this).find("img").fadeTo(300,b.settings.thumb_opacity)});var f=false;if(c.data("ad-link"))f=c.data("ad-link");else if(c.attr("longdesc")&&c.attr("longdesc").length)f=c.attr("longdesc");var j=false;if(c.data("ad-desc"))j=c.data("ad-desc");else if(c.attr("alt")&&c.attr("alt").length)j=c.attr("alt");var i=false;if(c.data("ad-title"))i=c.data("ad-title");else if(c.attr("title")&&c.attr("title").length)i=c.attr("title");b.images[h]={thumb:c.attr("src"),image:g,error:false,preloaded:false,desc:j,title:i,size:false,link:f}});var h=setInterval(function(){if(c==e){d-=80;var a=b.nav.find(".ad-thumb-list"),g=1,f=a.height();while(g<201){if(f!=a.height())break;f=a.height();g++}clearInterval(h)}},100)},initKeyEvents:function(){var b=this;a(document).keydown(function(a){if(a.keyCode==39){b.nextImage();b.slideshow.stop()}else if(a.keyCode==37){b.prevImage();b.slideshow.stop()}})},initNextAndPrev:function(){this.thumb_next_link.click(function(){if(b.numclicks<b.maxclicks){if(b.numclicks<b.maxclicks){b.numclicks+=1;if(b.numclicks<=b.maxclicks){var d=b.nav_display_width-50;if(b.settings.scroll_jump>0)var d=b.settings.scroll_jump;var a=b.thumbs_wrapper.scrollLeft()+d;a+=27;b.settings.slideshow.stop_on_scroll&&b.slideshow.stop();b.thumbs_wrapper.animate({scrollLeft:a+"px"})}}}else{var c=b.nav.find(".ad-thumb"+0),a=c[0].parentNode.offsetLeft;a-=b.nav_display_width/2-c[0].offsetWidth/2;a-=14;b.thumbs_wrapper.animate({scrollLeft:a+"px"});b.numclicks=1}return false});this.thumb_prev_link.click(function(){var e=b.numclicks,i=b.current_index;b.numclicks-=1;var f=b.numclicks;if(b.numclicks<1)b.numclicks=1;var h=b.nav_display_width-50;if(b.settings.scroll_jump>0)var h=b.settings.scroll_jump;var a=b.thumbs_wrapper.scrollLeft()-h;a-=27;b.settings.slideshow.stop_on_scroll&&b.slideshow.stop();b.thumbs_wrapper.animate({scrollLeft:a+"px"});if(f==0&&e==1){var g=b.thumbs_wrapper.find("a"),d=g.length,c=b.nav.find(".ad-thumb"+(d-1)),a=c[0].parentNode.offsetLeft;a-=b.nav_display_width/2-c[0].offsetWidth/2;a-=14;b.thumbs_wrapper.animate({scrollLeft:a+"px"});b.numclicks=b.maxclicks}return false});$jq("#nextVid").click(function(){b.nextImage();b.slideshow.stop();var a=b.nav.find(".ad-thumb"+b.current_index);a[0].href.indexOf("brightcove")>-1&&bcVP.stop();if(a[0].href.indexOf("youtu")>-1)player!=undefined&&player.stopVideo();_toggleVideo=0;$jq("#vidP").hide();$jq("#medP").show()});$jq("#prevVid").click(function(){b.prevImage();b.slideshow.stop();var a=b.nav.find(".ad-thumb"+b.current_index);a[0].href.indexOf("brightcove")>-1&&bcVP.stop();if(a[0].href.indexOf("youtu")>-1)player!=undefined&&player.stopVideo();_toggleVideo=0;$jq("#vidP").hide();$jq("#medP").show()});$jq("#prevParent").mouseover(function(){$jq("#prevVid").show()});$jq("#prevParent").mouseout(function(){$jq("#prevVid").hide()});$jq("#nextParent").mouseover(function(){$jq("#nextVid").show()});$jq("#nextParent").mouseout(function(){$jq("#nextVid").hide()});var c=this.settings.listingType;if(c=="spec"||c=="plan"){this.next_link=a('<div class="ad-next" onclick="$jq.googlepush(\'Images\',\'Home - Gallery\',\'Forward Button\');"><div class="ad-next-image" title="Next"></div></div>');this.prev_link=a('<div class="ad-prev" onclick="$jq.googlepush(\'Images\',\'Home - Gallery\',\'Back Button\');"><div class="ad-prev-image" title="Previous"></div></div>')}else{this.next_link=a('<div class="ad-next"><div class="ad-next-image" title="Next"></div></div>');this.prev_link=a('<div class="ad-prev"><div class="ad-prev-image" title="Previous"></div></div>')}this.image_wrapper.append(this.next_link);this.image_wrapper.append(this.prev_link);var b=this;this.prev_link.add(this.next_link).mouseover(function(){a(this).css("height",b.image_wrapper_height);a(this).find("div").show()}).mouseout(function(){a(this).find("div").hide()}).click(function(){if(a(this).is(".ad-next")){b.nextImage();b.slideshow.stop()}else{b.prevImage();b.slideshow.stop()}}).find("div")},initBackAndForward:function(){var b=this;this.scroll_forward=a('<a class="ad-forward">Next</a>');this.scroll_back=a('<a class="ad-back">Previous</a>');this.nav.append(this.scroll_forward);this.nav.prepend(this.scroll_back);var c=0,d=false;a(this.scroll_back).add(this.scroll_forward).click(function(){var c=b.nav_display_width-50;if(b.settings.scroll_jump>0)var c=b.settings.scroll_jump;if(a(this).is(".ad-forward"))var d=b.thumbs_wrapper.scrollLeft()+c;else var d=b.thumbs_wrapper.scrollLeft()-c;b.settings.slideshow.stop_on_scroll&&b.slideshow.stop();b.thumbs_wrapper.animate({scrollLeft:d+"px"});b.slideshow.start();return false}).css("opacity",.6).hover(function(){var e="left";if(a(this).is(".ad-forward"))e="right";d=setInterval(function(){c++;c>30&&b.settings.slideshow.stop_on_scroll&&b.slideshow.stop();var a=b.thumbs_wrapper.scrollLeft()+1;if(e=="left")a=b.thumbs_wrapper.scrollLeft()-1;b.thumbs_wrapper.scrollLeft(a)},10);a(this).css("opacity",1)},function(){c=0;clearInterval(d);a(this).css("opacity",.6)})},_afterShow:function(){$jq("#nhs_ImagePlayerItemCounts").html(this.current_index+1+" of "+this.images.length);$jq("#nhs_VideoPlayerItemCounts").html($jq("#nhs_ImagePlayerItemCounts").html());if(!this.settings.cycle){this.prev_link.show().css("height",this.image_wrapper_height);this.next_link.show().css("height",this.image_wrapper_height);this.current_index==this.images.length-1&&this.next_link.hide();this.current_index==0&&this.prev_link.hide()}this.fireCallback(this.settings.callbacks.afterImageVisible)},_getContainedImageSize:function(b,a){if(a>this.image_wrapper_height){var c=b/a;a=this.image_wrapper_height;b=this.image_wrapper_height*c}if(b>this.image_wrapper_width){var c=a/b;b=this.image_wrapper_width;a=this.image_wrapper_width*c}return {width:b,height:a}},_centerImage:function(a,c,b){a.css("top","32px");if(b<this.image_wrapper_height){var d=this.image_wrapper_height-b;a.css("top",d/2+32+"px")}a.css("left","0px");if(c<this.image_wrapper_width){var d=this.image_wrapper_width-c;a.css("left",d/2+"px")}},_getDescription:function(b){var c=false;if(b.desc.length||b.title.length){var d="";if(b.title.length)d='<strong class="ad-description-title">'+b.title+"</strong>";var c="";if(b.desc.length)c="<span>"+b.desc+"</span>";c=a('<p class="ad-image-description">'+d+c+"</p>")}return c},showImageThumb:function(b,a){this._showWhenLoadedThumb(b,a)},showImage:function(b,e){var g;(this.images[b]==undefined||this.images.length==0)&&this.findImages();g=this.images[b];if(g.error){this.images[b].image=this.settings.nocdmain;this.images[b].error=false;this.in_transition=false}var f=a(new Image);f.attr("src",this.images[b].image);if(!this.isImageLoaded(f[0])){var c=this;f.load(function(){}).error(function(){c.loading(false);c.images[b].image=c.settings.nocdmain;c.images[b].error=false;c.in_transition=false;c.showImage(b,e)})}if(this.images[b]&&!this.in_transition){var c=this,d=this.images[b];if(d.error){d.image=this.settings.nocdmain;d.error=false}this.in_transition=true;if(!d.preloaded){this.loading(true);this.preloadImage(b,function(){c.loading(false);c._showWhenLoaded(b,e)})}else this._showWhenLoaded(b,e)}},_showWhenLoadedThumb:function(c,k){if(this.images[c]){var l=this.images[c],d=a(".ad-image"),g=this._getDescription(l,d);this.highLightThumb(this.nav.find(".ad-thumb"+c),c);var i="right";if(this.current_index<c)i="left";this.fireCallback(this.settings.callbacks.beforeImageVisible);if(this.current_image||this.settings.animate_first_image){var e=this.settings.animation_speed,f="swing",b=this.animations[this.settings.effect].call(this,d,i,g);if(typeof b.speed!="undefined")e=b.speed;if(typeof b.easing!="undefined")f=b.easing;if(this.current_image){var j=this.current_image,h=this.current_description;j.animate(b.old_image,e,f,function(){j.remove();h&&h.remove()})}d.animate(b.new_image,e,f,function(){context.current_index=context.current_index;context.current_image=d;context.current_description=g;context.in_transition=false;context._afterShow();context.fireCallback(k)})}else{this.current_index=c;this.current_image=d;context.current_description=g;this.in_transition=false;context._afterShow();this.fireCallback(k)}}},_showWhenLoaded:function(c,n){if(this.images[c]){var d=this;$jq("#nhs_ImagePlayerCaption").text(_globalCaption[c]);$jq("#nhs_MediaPlayerCaption").text(_globalCaption[c]);var f=this.images[c],b=a(document.createElement("div")).addClass("ad-image");b.attr("z-index","10");var q=a(new Image).attr("src",f.image);if(f.link){var p=a('<a href="'+f.link+'" target="_blank" ></a>');p.append(q);b.append(p)}else b.append(q);this.image_wrapper.prepend(b);size={width:460,height:307};var e=this._getDescription(f,b);if(e)if(!this.settings.description_wrapper){b.append(e);var s=size.width-parseInt(e.css("padding-left"),10)-parseInt(e.css("padding-right"),10)}else this.settings.description_wrapper.append(e);if(f.image.indexOf("brightcove")>-1||f.image.indexOf("youtu")>-1){var i=a(document.createElement("span"));b.append(i);var r=b.css("width").replace("px","");i.css("left","0px");var o=this.nav.find(".ad-thumb"+c)[0];a(o).attr("tmpclick")!=null&&i.attr("onclick",a(o).attr("tmpclick"))}else updatePinterest(f.image,false);this.highLightThumb(this.nav.find(".ad-thumb"+c),c);var l="right";if(this.current_index<c)l="left";this.fireCallback(this.settings.callbacks.beforeImageVisible);if(this.current_image||this.settings.animate_first_image){var h=this.settings.animation_speed,j="swing",g=this.animations[this.settings.effect].call(this,b,l,e);if(typeof g.speed!="undefined")h=g.speed;if(typeof g.easing!="undefined")j=g.easing;if(this.current_image){var m=this.current_image,k=this.current_description;m.animate(g.old_image,h,j,function(){m.remove();k&&k.remove()})}b.animate(g.new_image,h,j,function(){d.current_index=c;d.current_image=b;d.current_description=e;d.in_transition=false;d._afterShow();d.fireCallback(n)})}else{this.current_index=c;this.current_image=b;d.current_description=e;this.in_transition=false;d._afterShow();this.fireCallback(n)}}},nextIndex:function(){if(this.current_index==this.images.length-1){if(!this.settings.cycle)return false;var a=0}else var a=this.current_index+1;return a},nextImageThumb:function(b){var a=this.nextIndex();if(a===false)return false;this.showImageThumb(a,b);return true},nextImage:function(c){var a=this.nextIndex();if(a===false)return false;this.preloadImage(a+1);this.showImage(a,c);var d=a%3,b=(a-d)/3+1;this.numclicks=b;return true},prevIndex:function(){if(this.current_index==0){if(!this.settings.cycle)return false;var a=this.images.length-1}else var a=this.current_index-1;return a},prevImage:function(c){var a=this.prevIndex();if(a===false)return false;this.preloadImage(a-1);this.showImage(a,c);var d=a%3,b=(a-d)/3+1;this.numclicks=b;return true},preloadAll:function(){var b=this,a=0;function c(){if(a<b.images.length){a++;b.preloadImage(a,c)}}b.preloadImage(a,c)},preloadImage:function(e,d){if(this.images[e]){var b=this.images[e];if(!this.images[e].preloaded){var c=a(new Image);c.attr("src",b.image);if(!this.isImageLoaded(c[0])){this.preloads.append(c);var f=this;c.load(function(){b.preloaded=true;b.size={width:this.width,height:this.height};f.fireCallback(d)}).error(function(){b.error=true;b.preloaded=false;b.size=false})}else{b.preloaded=true;b.size={width:c[0].width,height:c[0].height};this.fireCallback(d)}}else this.fireCallback(d)}},isImageLoaded:function(a){if(typeof a.complete!="undefined"&&!a.complete)return false;if(typeof a.naturalWidth!="undefined"&&a.naturalWidth==0)return false;return true},highLightThumb:function(a,c){this.thumbs_wrapper.find(".ad-active").removeClass("ad-active");a.addClass("ad-active");player!=undefined&&player.stopVideo();$jq("#vidP").hide();$jq("#medP").show();_toggleVideo=0;if(this.settings.thumb_opacity<1){this.thumbs_wrapper.find("a:not(.ad-active) img").fadeTo(300,this.settings.thumb_opacity);a.find("img").fadeTo(300,1)}var b=a[0].parentNode.offsetLeft;b-=this.nav_display_width/2-a[0].offsetWidth/2;b-=14;if(this.current_index>c)this.thumbs_wrapper.animate({scrollLeft:b+"px"});else c!=1&&this.thumbs_wrapper.animate({scrollLeft:b+"px"})},fireCallback:function(b){a.isFunction(b)&&b.call(this)}};function b(a,b){this.init(a,b)}b.prototype={start_link:false,stop_link:false,countdown:false,controls:false,settings:false,nextimage_callback:false,enabled:false,running:false,countdown_interval:false,init:function(a,b){var c=this;this.nextimage_callback=a;this.settings=b},create:function(){this.start_link=a('<span class="ad-slideshow-start">'+this.settings.start_label+"</span>");this.stop_link=a('<span class="ad-slideshow-stop">'+this.settings.stop_label+"</span>");this.countdown=a('<span class="ad-slideshow-countdown"></span>');this.countdown.hide();var b=this;this.start_link.click(function(){b.start()});this.stop_link.click(function(){b.stop()});a(document).keydown(function(a){if(a.keyCode==83)if(b.running)b.stop();else b.start()});return this.controls},disable:function(){this.enabled=false;this.stop();this.controls.hide()},enable:function(){this.enabled=true},toggle:function(){if(this.enabled)this.disable();else this.enable()},start:function(){if(this.running||!this.enabled)return false;var a=this;this.running=true;this._next();this.fireCallback(this.settings.onStart);return true},stop:function(){if(!this.running)return false;this.running=false;this.countdown.hide();clearInterval(this.countdown_interval);this.fireCallback(this.settings.onStop);return true},_next:function(){var a=this,c=this.settings.countdown_prefix,d=this.settings.countdown_sufix;clearInterval(a.countdown_interval);this.countdown.show().html(c+this.settings.speed/1e3+d);var b=0;this.countdown_interval=setInterval(function(){b+=1e3;if(b>=a.settings.speed){var f=function(){a.running&&a._next();b=0};!a.nextimage_callback(f)&&a.stop();b=0}var e=parseInt(a.countdown.text().replace(/[^0-9]/g,""),10);e--;e>0&&a.countdown.html(c+e+d)},1e3)},fireCallback:function(b){a.isFunction(b)&&b.call(this)}}})(jQuery);var bcExp,bcVP,bcImg,bcVw,_imageBaseUrl,_imgNLinks,_youtubeLinks,_mp_listingType,_isBasicCommunity,_bcExperienceID,mp_captionBarIDNew,_videos,_currentObjCache,_imgList,_myW,_toggleVideo,_youtubeCreated,_globalParams,_globalCaption,_ended,gnocdmain,gnoimgMed,gnoimgLarge,glistingType;GallerylookUpTable={cv:"Community Video",sv:"Community Video",hv:"Home Video",ci:"Community Image",hi:"Home Image",ev:"External Video",pv:"Plan Viewer",vir:"Virtual Tour",vt:"Virtual Tour",ele:"Elevation",flp:"FloorPlan","int":"Interior",ext:"Exterior",lm:"Community Lot Map"};function UpdateResPlayer(){$jq(".ad-gallery").css("width","300px");$jq(".ad-gallery").css("height","240px");$jq(".nhs_ImagePlayerBox").css("width","300px");$jq(".nhs_ImagePlayerBox").css("height","240px");$jq(".nhs_ImagePlayerBox object").css("width","300px");$jq(".nhs_ImagePlayerTitleBar").css("width","300px");$jq(".ad-gallery .ad-image-wrapper").css("height","194px");$jq(".ad-gallery .ad-nav").css("width","265px");$jq(".ad-gallery .ad-nav .ad-thumbs").css("width","234px");$jq(".ad-nav .ad-thumbs").css("width","256px")}DisplayNoMedia=function(a){var b=$jq('<img src="'+a+'globalresourcesmvc/default/images/nophoto_460x307.jpg" alt="No photo or video available" />');$jq(".ad-gallery .ad-image-wrapper").append(b)};function InitGallery(a){_ended=false;_youtubeCreated=false;a.hasOwnProperty("titleBarText")&&$jq("#nhs_ImagePlayerTitle").text(a.titleBarText);_globalParams=a;if(a.mediaObjs.length==0&&a.externalLinks!=undefined&&a.externalLinks.length==0&&a.type!="results")DisplayNoMedia(a.imgStaticUrl);else{var b=a.hasOwnProperty("specID")?"spec":a.hasOwnProperty("planID")?"plan":a.hasOwnProperty("communityID")?"com":"commres";glistingType=b;var c=a.imgStaticUrl+"globalresourcesmvc/default/images/nophoto_460x307.jpg",e=a.imgStaticUrl+"globalresourcesmvc/default/images/nophoto_med.png",d=a.imgStaticUrl+"globalresourcesmvc/default/images/imgs-player/blank.gif";if(b=="commres"){_wrapperW=300;_wrapperH=194}else{_wrapperW=0;_wrapperH=0}glistingType=b;gnocdmain=d;gnoimgLarge=c;gnoimgMed=e;ProcessParams(a)}}function AfterProcess(){$jq(function(){var b={resource_root:_globalParams.imgBaseUrl,listingType:glistingType},a=$jq(".ad-gallery").adGallery(b);a[0].settings.effect="fade";a[0].settings.mp_type=glistingType;a[0].settings.nocdmain=gnocdmain;if(glistingType=="com")a[0].settings.noimg=gnoimgLarge;else{a[0].settings.noimg=gnoimgMed;a[0].settings.wrapperW=300;a[0].settings.wrapperH=124}})}function HideImgTitle(){$jq("div.nhs_MediaImageTitle").hide()}function SetCaption(f,b,c){var a;if(_mp_listingType=="com")a=b=="ci"||b=="lm"?"Community Image":"Home Image";else a=GallerylookUpTable[b];if(_globalParams.hasOwnProperty("captionBarText"))a=_globalParams.captionBarText+a;else a=" Now Showing: "+a;$jq("#"+mp_captionBarID).text(a);$jq.trim(c)==""&&$jq("div.nhs_MediaImageTitle").hide()}function GoBack(){$jq("#vidP").hide();$jq("#medP").show()}function GetCaption(b){var a;if(_mp_listingType=="com")if(b.Type=="v")a=b.SubType=="cv"||b.SubType=="sv"||b.SubType==null?"Community Video":"Home Video";else if(b.Type=="i")a=b.SubType=="ci"||b.SubType=="lm"?"Community Image":"Home Image";else a=GallerylookUpTable[b.SubType];else{a=GallerylookUpTable[b.SubType];if(a==null)a="Home Video"}if(_globalParams.hasOwnProperty("captionBarText"))a=_globalParams.captionBarText+a;else a=" Now showing: "+a;return a}function GalleryloadImage(k,a,j,i,g,e,f,c,l){var b;if(_mp_listingType=="com")if(e)b=a=="cv"||a=="sv"?"Community Video":"Home Video";else b=a=="ci"||a=="lm"?"Community Image":"Home Image";else b=GallerylookUpTable[a];b=" Now Showing: "+b;$jq("#"+mp_captionBarIDNew).text(b);_mp_listingType=="commres"&&$jq.googlepush("Videos","Search Results","Community");var d="",h=k.indexOf("youtu")!=-1;$jq("#medP").show();$jq("#vidP").hide();if(e){if(_toggleVideo!=1){$jq("#medP").hide();$jq("#vidP").show();if(h){$jq("#nhsplayerloading").hide();$jq("#brightcoveP").hide();$jq("#youtubeP").show()}else{$jq("#nhsplayerloading").show();player!=undefined&&player.stopVideo();$jq("#youtubeP").hide();$jq("#brightcoveP").show()}}this.myvidid=c;this.mysubtype=a;this.mytitle=j;this.myindex=i;this.mycue=g;this.myid=f;if(h){if(!_youtubeCreated){createPlayer("youtubeP",c,460,307);_youtubeCreated=true}else player.loadVideoById(c);NHS.Scripts.MediaPlayerVideo._logVideo(f)}else this.allLoaded&&NHS.Scripts.MediaPlayerVideo.loadVideo(c,a,j,i,g,f);_toggleVideo=1;d=l}else{if(_toggleVideo==1){player!=undefined&&player.stopVideo();$jq("#vidP").hide();$jq("#medP").show()}_toggleVideo=0;d=_imgBaseUrl+k;if(!_isBasicCommunity)if(_mp_listingType=="spec"||_mp_listingType=="plan")$jq.googlepush("Images","Home - Gallery","Select Images");else $jq.googlepush("Images","Community - Gallery","Select Images")}updatePinterest(d,e)}function updatePinterest(b,d){var a=$jq(".nhs_MediaPlayerContainer .pin-it-button");if(a.length>0){var c="http://pinterest.com/pin/create/button/?url="+encodeURIComponent(_globalParams.url)+"&media="+encodeURIComponent(b)+"&description="+encodeURIComponent(d?"Video!: "+_globalParams.description:_globalParams.description);a.attr("href",c);_globalParams.firstImgUrl=b}}function ProcessParams(a){if(a.mediaObjs.length==0)mp_mediaItems=null;else mp_mediaItems=a.mediaObjs;_imgBaseUrl=a.imgBaseUrl;_isBasicCommunity=a.isBasicCommunity;_mp_listingType=a.hasOwnProperty("specID")?"spec":a.hasOwnProperty("planID")?"plan":a.hasOwnProperty("communityID")?"com":"commres";this._externalLinks=a.externalLinks;_bcExperienceID=a.bcExperienceID;this._titlebarID=a.titleBarID;var b=_globalParams.hasOwnProperty("captionBarText");_mp_listingType=="com"?$jq("#"+this._titlebarID).text(b?_globalParams.titleBarText:"Community Gallery"):_mp_listingType=="commres"?$jq("#"+this._titlebarID).text(b?"Tour video gallery":"Community video gallery"):$jq("#"+this._titlebarID).text(b?_globalParams.titleBarText:"Home Gallery");mp_captionBarIDNew=a.captionBarID;_mp_imgtitleBar=a.imgtitleBar;var c;if(a.type=="community"||a.type=="home")_loadDetailsMediaPlayer("_popComVideos");else a.type=="results"&&_loadShowCasePlayer("_popShowcaseVideos")}_loadDetailsMediaPlayer=function(b){this._initialize(b);var a=this._getTags(),c=a!="";if(c)BCMAPI.find("find_videos_by_tags",{or_tags:a,fields:"id,referenceId,thumbnailURL,tags,videoStillURL"});else _popImgnLnksFromMediaItems(false)};_loadShowCasePlayer=function(c){this._initialize(c);var a=this._getTags(),d=a!="",b=_globalParams.marketName+"_"+_globalParams.marketID;a+=a!==""?",showcasevideo,":"showcasevideo";a=b+",allmarkets-"+_globalParams.brightCoveSuffix+","+a;BCMAPI.find("find_videos_by_tags",{or_tags:a,fields:"name,id,referenceId,thumbnailURL,tags,videoStillURL"})};_getTags=function(){var a="";if(mp_mediaItems!=null){jQuery.each(mp_mediaItems,function(c,b){if(b.Type==="v")a+=b.VideoID+","});a=a.substr(0,a.length-1)}return a};_popComVideos=function(a){_popVideos(a,"cv")};_popShowcaseVideos=function(a){_popVideos(a,"sv")};function initializePinterest(a){updatePinterest(a.items[0].videoStillURL,true)}_popVideos=function(c,j){_currentObjCache._popImgnLnksFromMediaItems(c.items.length!=0);c.items.length>0&&initializePinterest(c);var a=[],d=[],b=[],o=GallerylookUpTable,f=j,e="";jQuery.each(c.items,function(r,g){var j=0,p=0,i=0;if(g.referenceId==null)g.referenceId="";if(g.tags.length>=2){var h=g.tags[1],k=g.tags[0];if(h.indexOf("-")!=-1){var q=k;k=h;h=q}var l=k.split("-");if(l.length>2){j=l[1];i=l[2]}var n=true;mp_mediaItems!=null&&g.tags[0]!="showcasevideo"&&jQuery.each(mp_mediaItems,function(b,a){if(a.RefID==i){n=false;e=a.Title;p=a.Sort*1;return false}})}_videos=c.items;var m=false;a.length>0&&h!=""&&g.tags[0]!="showcasevideo"&&jQuery.each(a,function(b,a){if(h==a.hash){m=true;return false}});if(!m&&!n&&g.tags[0]!="showcasevideo")a[a.length]={Type:"v",SubType:f,Thumbnail:g.thumbnailURL,Title:e==null||e==""?g.name:e,Url:g.id,ID:j,Sort:p,hash:h,refID:i,VideoStillURL:g.videoStillURL,IsYouTubeVideo:false};if(g.tags[0]=="showcasevideo")d[d.length]={Type:"v",SubType:f,Thumbnail:g.thumbnailURL,Title:g.name,Url:g.id,ID:0,Sort:1,hash:h,VideoStillURL:g.videoStillURL,IsYouTubeVideo:false};if($jq.inArray(_globalParams.marketName+"_"+_globalParams.marketID,g.tags)!=-1||$jq.inArray("allmarkets-"+_globalParams.brightCoveSuffix,g.tags)!=-1){var o=1e3;if(g.referenceId!=null&&g.referenceId.indexOf("_")!=-1)o=g.referenceId.substr(g.referenceId.lastIndexOf("_")+1);b[b.length]={Type:"v",SubType:f,Thumbnail:g.thumbnailURL,Title:g.name,Url:g.id,ID:j,Sort:parseInt(o),hash:h,VideoStillURL:g.videoStillURL,Ref:g.referenceId,IsYouTubeVideo:false}}});if(c.items.length!=0){var i=[];if(typeof mp_mediaItems!="undefined"&&mp_mediaItems!=null)for(var g=0,m=mp_mediaItems.length;g<m;g++)$jq.each(a,function(){mp_mediaItems[g].RefID.toString()==this.refID&&i.push(this)});a=i.groupNSort(function(a){return a.ID},function(a,b){return a.Sort-b.Sort});if(d.length>0)a=a.concat(d);if(b.length>0){b=b.sort(function(c,d){var a=c.Sort,b=d.Sort;if(a<b)return -1;if(a>b)return 1;a=c.Ref.indexOf("allmarkets")!=-1?"z":c.Ref;b=d.Ref.indexOf("allmarkets")!=-1?"z":d.Ref;return a.localeCompare(b)});a=b.concat(a)}var h=a.length;if(!!_imgNLinks&&_imgNLinks.length!=0)h=h+_imgNLinks.length;var n=j=="sv"?2:3,k=_imgNLinks.length>0,l=a.length>0;_globalCaption=[];jQuery.each(a,function(b,a){_globalCaption.push(GetCaption(a))});jQuery.each(_imgNLinks,function(b,a){_globalCaption.push(GetCaption(a))});if(l){if(_mp_listingType=="com")caption=a[0].SubType=="cv"?"Community Video":"Home Video";else caption=GallerylookUpTable[a[0].SubType];caption="Now Showing: "+caption;$jq("#"+mp_captionBarIDNew).text(caption)}else if(k){if(_mp_listingType=="com")caption=_imgNLinks[0].SubType=="ci"||_imgNLinks[0].SubType=="lm"?"Community Image":"Home Image";else caption=GallerylookUpTable[_imgNLinks[0].SubType];caption="Now Showing: "+caption;$jq("#"+mp_captionBarIDNew).text(caption)}mytemp=$jq.template("mpTmpl","<li>                        {{if IsYouTubeVideo }}                         <a href=\"${Thumbnail}\"   tmpclick=\"GalleryloadImage('${Thumbnail}','${SubType}','${Title}','${$index+1}', false, true, 0, '${OnlineVideoID}','${Thumbnail}');\" >                         <img src=\"${Thumbnail}\" title=\"${Title} \" class=\"image0\" />                           <span></span>                         </a>                        {{/if}}                         {{if Type === 'v' && !IsYouTubeVideo}}                         <a href=\"${VideoStillURL}\"   tmpclick=\"GalleryloadImage('${Thumbnail}','${SubType}','${Title}','${$index+1}', false, true, ${ID}, '${Url}','${VideoStillURL}');\" >                         <img src=\"${Thumbnail}\" title=\"${Title} \" class=\"image0\" />                           <span></span>                         </a>                         {{/if}}                          {{if Type === 'i'}}                         <a href=\"${_imgBaseUrl+Url}\" tmpclick=\"GalleryloadImage('${Url}','${SubType}','${Title}','${$index+1}', false, false);\"  >                         <img src=\"${_imgBaseUrl+Thumbnail}\" title=\"${Title}\" class=\"image0\"  />                         </a>                         {{else Type === 'l'}}                         {{html Url}}                         {{/if}}                        </li>");$jq("#galleryList").empty();$jq.tmpl("mpTmpl",a).appendTo("#galleryList");$jq.tmpl("mpTmpl",_imgNLinks).appendTo("#galleryList");AfterProcess()}};Array.prototype.groupBy=function(d){for(var a=0,e=this.length,b={},c;a<e;a++){if(!b[c="k:"+d(this[a],a,this)])b[c]=[];b[c].push(this[a])}return b};Array.prototype.groupNSort=function(d,c){var b=this.groupBy(d),a=[];for(grp in b){b[grp].sort(c);a=a.concat(b[grp])}return a};_initialize=function(a){BCMAPI.token="HYWld5USmeg7f3O0xaq2UgSaQBVyuw72JRRcM_k4sRX7yIGlb-lcuQ..";BCMAPI.callback=a;_currentObjCache=this};_popImgnLnksFromMediaItems=function(c){_imgNLinks=[];_youtubeLinks=[];var a=false,b=false;if(mp_mediaItems!=null){var d=mp_mediaItems;jQuery.each(d,function(d,c){if(c.Type==="i"){_imgNLinks.push(c);a=true}else if(c.Type=="v"&&c.IsYouTubeVideo){_youtubeLinks.push(c);b=true}})}if(_currentObjCache._externalLinks!=null&&_currentObjCache._externalLinks.length>0){var e=_currentObjCache._externalLinks;jQuery.each(e,function(c,b){_imgNLinks.push(b);a=true})}if(!c){a=_imgNLinks.length>0;if(a){if(_mp_listingType=="com")caption=_imgNLinks[0].SubType=="ci"||_imgNLinks[0].SubType=="lm"?"Community Image":"Home Image";else caption=GallerylookUpTable[_imgNLinks[0].SubType];caption="Now Showing: "+caption;$jq("#"+mp_captionBarIDNew).text(caption)}if(!c&&!a&&!b)DisplayNoMedia(_imgBaseUrl);else{mytemp=$jq.template("mpTmpl","<li>                        {{if IsYouTubeVideo }}                         <a href=\"${Thumbnail}\"   tmpclick=\"GalleryloadImage('${Url}','${SubType}','${Title}','${$index+1}', false, true, 0, '${OnlineVideoID}','${Thumbnail}');\" >                            <img src=\"${Thumbnail}\" title=\"${Title} \" class=\"image0\" />                           <span></span>                         </a>                        {{/if}}                        {{if Type === 'v' && !IsYouTubeVideo}}                        <a href=\"${VideoStillURL}\"   tmpclick=\"GalleryloadImage('${Thumbnail}','${SubType}','${Title}','${$index+1}', false, true, ${ID}, '${Url}','${VideoStillURL}');\" >                            <img src=\"${Thumbnail}\" title=\"${Title} \" class=\"image0\" />                           <span></span>                         </a>                        {{/if}}                        {{if Type === 'i'}}                         <a href=\"${_imgBaseUrl+Url}\" tmpclick=\"GalleryloadImage('${Url}','${SubType}','${Title}','${$index+1}', false, false);\"  >                            <img src=\"${_imgBaseUrl+Thumbnail}\" title=\"${Title}\" class=\"image0\"  />                         </a>                         {{else Type === 'l'}}                            {{html Url}}                         {{/if}}                        </li>");_globalCaption=[];jQuery.each(_youtubeLinks,function(b,a){_globalCaption.push(GetCaption(a))});jQuery.each(_imgNLinks,function(b,a){_globalCaption.push(GetCaption(a))});$jq("#galleryList").empty();$jq.tmpl("mpTmpl",_youtubeLinks).appendTo("#galleryList");$jq.tmpl("mpTmpl",_imgNLinks).appendTo("#galleryList");AfterProcess()}}};(function(a){var b=a.scrollTo=function(b,d,c){a(window).scrollTo(b,d,c)};b.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1};b.window=function(){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){var b=this,d=!b.nodeName||a.inArray(b.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!d)return b;var c=(b.contentWindow||b).document||b.ownerDocument||b;return a.browser.safari||c.compatMode=="BackCompat"?c.body:c.documentElement})};a.fn.scrollTo=function(f,e,d){if(typeof e=="object"){d=e;e=0}if(typeof d=="function")d={onAfter:d};if(f=="max")f=9e9;d=a.extend({},b.defaults,d);e=e||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;if(d.queue)e/=2;d.offset=c(d.offset);d.over=c(d.over);return this._scrollable().each(function(){var i=this,j=a(i),g=f,k,h={},m=j.is("html,body");switch(typeof g){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(g)){g=c(g);break}g=a(g,this);case "object":if(g.is||g.style)k=(g=a(g)).offset()}a.each(d.axis.split(""),function(q,n){var e=n=="x"?"Left":"Top",c=e.toLowerCase(),a="scroll"+e,o=i[a],p=b.max(i,n);if(k){h[a]=k[c]+(m?0:o-j.offset()[c]);if(d.margin){h[a]-=parseInt(g.css("margin"+e))||0;h[a]-=parseInt(g.css("border"+e+"Width"))||0}h[a]+=d.offset[c]||0;if(d.over[c])h[a]+=g[n=="x"?"width":"height"]()*d.over[c]}else{var f=g[c];h[a]=f.slice&&f.slice(-1)=="%"?parseFloat(f)/100*p:f}if(/^\d+$/.test(h[a]))h[a]=h[a]<=0?0:Math.min(h[a],p);if(!q&&d.queue){o!=h[a]&&l(d.onAfterFirst);delete h[a]}});l(d.onAfter);function l(a){j.animate(h,e,d.easing,a&&function(){a.call(this,f,d)})}}).end()};b.max=function(b,h){var c=h=="x"?"Width":"Height",d="scroll"+c;if(!a(b).is("html,body"))return b[d]-a(b)[c.toLowerCase()]();var e="client"+c,f=b.ownerDocument.documentElement,g=b.ownerDocument.body;return Math.max(f[d],g[d])-Math.min(f[e],g[e])};function c(a){return typeof a=="object"?a:{top:a,left:a}}})(jQuery);/*
 * jQuery autoResize (textarea auto-resizer)
 * @copyright James Padolsey http://james.padolsey.com
 * @version 1.04
 */

(function(a){a.fn.autoResize=function(j){var b=a.extend({onResize:function(){},animate:true,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:1000},j);this.filter('textarea').each(function(){var c=a(this).css({resize:'none','overflow-y':'hidden'}),k=c.height(),f=(function(){var l=['height','width','lineHeight','textDecoration','letterSpacing'],h={};a.each(l,function(d,e){h[e]=c.css(e)});return c.clone().removeAttr('id').removeAttr('name').css({position:'absolute',top:0,left:-9999}).css(h).attr('tabIndex','-1').insertBefore(c)})(),i=null,g=function(){f.height(0).val(a(this).val()).scrollTop(10000);var d=Math.max(f.scrollTop(),k)+b.extraSpace,e=a(this).add(f);if(i===d){return}i=d;if(d>=b.limit){a(this).css('overflow-y','');return}b.onResize.call(this);b.animate&&c.css('display')==='block'?e.stop().animate({height:d},b.animateDuration,b.animateCallback):e.height(d)};c.unbind('.dynSiz').bind('keyup.dynSiz',g).bind('keydown.dynSiz',g).bind('change.dynSiz',g)});return this}})(jQuery);;NHS.Scripts.Paging=function(a){this._currentPage=0;this.onGoToPage=a.onGoToPage};NHS.Scripts.Paging.prototype={get_currentPage:function(){return this._currentPage},initialize:function(){this._currentPage=Number($jq("#txtPageNumber").val());this._previousHandler=NHS.Scripts.Helper.createDelegate(this,this._onPreviousClick);this._nextHandler=NHS.Scripts.Helper.createDelegate(this,this._onNextClick);this._goHandler=NHS.Scripts.Helper.createDelegate(this,this._onGoClick);$jq("#btnPrevious").click(this._previousHandler);$jq("#btnNext").click(this._nextHandler);$jq("#aGo").click(this._goHandler)},_onPreviousClick:function(){this.onGoToPage.call(this,this._currentPage-1,"PAGEPREV")},_onNextClick:function(){this.onGoToPage.call(this,this._currentPage+1,"PAGENEXT")},_onGoClick:function(){this.onGoToPage.call(this,Number($jq("#txtPageNumber").val()),"PAGEGO")}};function ShowSavedMessage(a){if(a.data!=undefined)window.location.href=a.redirectUrl;else $jq("#liSaveToPlanner").html('<span id="nhs_SaveThisItem">Saved</span>')};NHS.Scripts.CommunityResults.Sorting=function(a){this.onSort=a.onSort};NHS.Scripts.CommunityResults.Sorting.prototype={initialize:function(){this._sortingHandler=NHS.Scripts.Helper.createDelegate(this,this._onSort);$jq(".nhs_Sorting select").change(this._sortingHandler)},_onSort:function(a){this.onSort.call(this,$jq(a.target).find("option:selected").val())}};Encoder={EncodeType:"entity",isEmpty:function(a){if(a)return a===null||a.length==0||/^\s+$/.test(a);else return true},HTML2Numerical:function(c){var a=["&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&agrave;","&aacute;","&acirc;","&atilde;","&Auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&Ouml;","&times;","&oslash;","&ugrave;","&uacute;","&ucirc;","&Uuml;","&yacute;","&thorn;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&Oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&oelig;","&oelig;","&scaron;","&scaron;","&yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;"],b=["&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;"];return this.swapArrayVals(c,a,b)},NumericalToHTML:function(c){var a=["&#160;","&#161;","&#162;","&#163;","&#164;","&#165;","&#166;","&#167;","&#168;","&#169;","&#170;","&#171;","&#172;","&#173;","&#174;","&#175;","&#176;","&#177;","&#178;","&#179;","&#180;","&#181;","&#182;","&#183;","&#184;","&#185;","&#186;","&#187;","&#188;","&#189;","&#190;","&#191;","&#192;","&#193;","&#194;","&#195;","&#196;","&#197;","&#198;","&#199;","&#200;","&#201;","&#202;","&#203;","&#204;","&#205;","&#206;","&#207;","&#208;","&#209;","&#210;","&#211;","&#212;","&#213;","&#214;","&#215;","&#216;","&#217;","&#218;","&#219;","&#220;","&#221;","&#222;","&#223;","&#224;","&#225;","&#226;","&#227;","&#228;","&#229;","&#230;","&#231;","&#232;","&#233;","&#234;","&#235;","&#236;","&#237;","&#238;","&#239;","&#240;","&#241;","&#242;","&#243;","&#244;","&#245;","&#246;","&#247;","&#248;","&#249;","&#250;","&#251;","&#252;","&#253;","&#254;","&#255;","&#34;","&#38;","&#60;","&#62;","&#338;","&#339;","&#352;","&#353;","&#376;","&#710;","&#732;","&#8194;","&#8195;","&#8201;","&#8204;","&#8205;","&#8206;","&#8207;","&#8211;","&#8212;","&#8216;","&#8217;","&#8218;","&#8220;","&#8221;","&#8222;","&#8224;","&#8225;","&#8240;","&#8249;","&#8250;","&#8364;","&#402;","&#913;","&#914;","&#915;","&#916;","&#917;","&#918;","&#919;","&#920;","&#921;","&#922;","&#923;","&#924;","&#925;","&#926;","&#927;","&#928;","&#929;","&#931;","&#932;","&#933;","&#934;","&#935;","&#936;","&#937;","&#945;","&#946;","&#947;","&#948;","&#949;","&#950;","&#951;","&#952;","&#953;","&#954;","&#955;","&#956;","&#957;","&#958;","&#959;","&#960;","&#961;","&#962;","&#963;","&#964;","&#965;","&#966;","&#967;","&#968;","&#969;","&#977;","&#978;","&#982;","&#8226;","&#8230;","&#8242;","&#8243;","&#8254;","&#8260;","&#8472;","&#8465;","&#8476;","&#8482;","&#8501;","&#8592;","&#8593;","&#8594;","&#8595;","&#8596;","&#8629;","&#8656;","&#8657;","&#8658;","&#8659;","&#8660;","&#8704;","&#8706;","&#8707;","&#8709;","&#8711;","&#8712;","&#8713;","&#8715;","&#8719;","&#8721;","&#8722;","&#8727;","&#8730;","&#8733;","&#8734;","&#8736;","&#8743;","&#8744;","&#8745;","&#8746;","&#8747;","&#8756;","&#8764;","&#8773;","&#8776;","&#8800;","&#8801;","&#8804;","&#8805;","&#8834;","&#8835;","&#8836;","&#8838;","&#8839;","&#8853;","&#8855;","&#8869;","&#8901;","&#8968;","&#8969;","&#8970;","&#8971;","&#9001;","&#9002;","&#9674;","&#9824;","&#9827;","&#9829;","&#9830;"],b=["&nbsp;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&shy;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&agrave;","&aacute;","&acirc;","&atilde;","&Auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&Ouml;","&times;","&oslash;","&ugrave;","&uacute;","&ucirc;","&Uuml;","&yacute;","&thorn;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&Oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&quot;","&amp;","&lt;","&gt;","&oelig;","&oelig;","&scaron;","&scaron;","&yuml;","&circ;","&tilde;","&ensp;","&emsp;","&thinsp;","&zwnj;","&zwj;","&lrm;","&rlm;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&dagger;","&permil;","&lsaquo;","&rsaquo;","&euro;","&fnof;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigmaf;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;","&thetasym;","&upsih;","&piv;","&bull;","&hellip;","&prime;","&prime;","&oline;","&frasl;","&weierp;","&image;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&lang;","&rang;","&loz;","&spades;","&clubs;","&hearts;","&diams;"];return this.swapArrayVals(c,a,b)},numEncode:function(c){if(this.isEmpty(c))return "";for(var d="",b=0;b<c.length;b++){var a=c.charAt(b);if(a<" "||a>"~")a="&#"+a.charCodeAt()+";";d+=a}return d},htmlDecode:function(e){var c,b,a=e;if(this.isEmpty(a))return "";a=this.HTML2Numerical(a);arr=a.match(/&#[0-9]{1,5};/g);if(arr!=null)for(var d=0;d<arr.length;d++){b=arr[d];c=b.substring(2,b.length-1);if(c>=-32768&&c<=65535)a=a.replace(b,String.fromCharCode(c));else a=a.replace(b,"")}return a},htmlEncode:function(a,b){if(this.isEmpty(a))return "";b=b|false;if(b)if(this.EncodeType=="numerical")a=a.replace(/&/g,"&#38;");else a=a.replace(/&/g,"&amp;");a=this.XSSEncode(a,false);if(this.EncodeType=="numerical"||!b)a=this.HTML2Numerical(a);a=this.numEncode(a);if(!b){a=a.replace(/&#/g,"##AMPHASH##");if(this.EncodeType=="numerical")a=a.replace(/&/g,"&#38;");else a=a.replace(/&/g,"&amp;");a=a.replace(/##AMPHASH##/g,"&#")}a=a.replace(/&#\d*([^\d;]|$)/g,"$1");if(!b)a=this.correctEncoding(a);if(this.EncodeType=="entity")a=this.NumericalToHTML(a);return a},XSSEncode:function(a,b){if(!this.isEmpty(a)){b=b||true;if(b){a=a.replace(/\'/g,"&#39;");a=a.replace(/\"/g,"&quot;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;")}else{a=a.replace(/\'/g,"&#39;");a=a.replace(/\"/g,"&#34;");a=a.replace(/</g,"&#60;");a=a.replace(/>/g,"&#62;")}return a}else return ""},hasEncoded:function(a){if(/&#[0-9]{1,5};/g.test(a))return true;else if(/&[A-Z]{2,6};/gi.test(a))return true;else return false},stripUnicode:function(a){return a.replace(/[^\x20-\x7E]/g,"")},correctEncoding:function(a){return a.replace(/(&amp;)(amp;)+/,"$1")},swapArrayVals:function(b,a,d){if(this.isEmpty(b))return "";var e;if(a&&d)if(a.length==d.length)for(var c=0,f=a.length;c<f;c++){e=new RegExp(a[c],"g");b=b.replace(e,d[c])}return b},inArray:function(c,b){for(var a=0,d=b.length;a<d;a++)if(b[a]===c)return a;return -1}};$jq(document).ready(function(){InitializeLeadForm()});function InitializeLeadForm(){$jq("#frmBrochure").ajaxForm({target:"#divLeadMain"});$jq("textarea#Comments").focusin(function(){$jq('input[type="text"]').removeClass("nhs_Focus");$jq(this).addClass("nhs_Focus")});$jq("textarea#Comments").blur(function(){$jq(this).removeClass("nhs_Focus")});$jq("#LiveOutside").click(function(){if($jq(this).is(":checked")){$jq("input#UserPostalCode").attr("disabled","true");$jq("input#UserPostalCode").addClass("nhs_Disabled");$jq("input#UserPostalCode").val("")}else{$jq("input#UserPostalCode").removeAttr("disabled");$jq("input#UserPostalCode").removeClass("nhs_Disabled")}});$jq('input[type="text"]').focus(function(){$jq('input[type="text"]').removeClass("nhs_Focus");$jq(this).addClass("nhs_Focus")});$jq('input[type="text"]').blur(function(){$jq(this).removeClass("nhs_Focus")});$jq('input[type="password"]').focus(function(){$jq('input[type="text"]').removeClass("nhs_Focus");$jq(this).addClass("nhs_Focus")});$jq('input[type="password"]').blur(function(){$jq(this).removeClass("nhs_Focus")});$jq("textarea#Comments").keypress(function(){var a=this.value.length;if(a>=250)this.value=this.value.substring(0,250)})}function SetAutoresize(){$jq("textarea#Comments").autoResize({onResize:function(){$jq(this).css({opacity:1})},animateCallback:function(){$jq(this).css({opacity:1})},animateDuration:300,extraSpace:0,limit:100})}function toggleZipField(){if($jq("#LiveOutside").is(":checked")){$jq("input#UserPostalCode").attr("disabled","true");$jq("input#UserPostalCode").addClass("nhs_Disabled");$jq("input#UserPostalCode").val("")}else{$jq("input#UserPostalCode").removeAttr("disabled");$jq("input#UserPostalCode").removeClass("nhs_Disabled")}}function toggleRegZipField(){if($jq("#LiveOutsideReg").is(":checked")){$jq("input#ZipCodeReg").attr("disabled","true");$jq("input#ZipCodeReg").addClass("nhs_Disabled");$jq("input#ZipCodeReg").val("")}else{$jq("input#ZipCodeReg").removeAttr("disabled");$jq("input#ZipCodeReg").removeClass("nhs_Disabled")}}function showLogin(c){var b=document.getElementById("divLogin");b.style.display="";var a=document.getElementById("divConfirmationDefault");a.style.display="none";$jq("#Email").val()==""&&$jq("#Email").val($jq("#hfEmail").val());$jq.googlepush("Account Events",(c?"Community":"Home")+" - Access Account","Open Form - Link")}function showCreateAccount(c){var b=document.getElementById("divCreateAccount");b.style.display="";var a=document.getElementById("divConfirmationDefault");a.style.display="none";var d=document.getElementById("nhs_DetailsFormInfoActions");$jq("#FirstName").val()==""&&$jq("#FirstName").val($jq("#hfFirstName").val());$jq("#LastName").val()==""&&$jq("#LastName").val($jq("#hfLastName").val());$jq("#EmailReg").val()==""&&$jq("#EmailReg").val($jq("#hfEmail").val());$jq("#ZipCodeReg").val()==""&&$jq("#ZipCodeReg").val(jQuery.trim($jq("#hfPostalCode").val()));$jq("#hfLiveOutside").val()=="true"&&$jq("#LiveOutsideReg").attr("checked","checked");toggleRequestCreateAccountZipField();$jq.googlepush("Account Events",(c?"Community":"Home")+" - Create Account","Open Form - Link")}function toggleRequestCreateAccountZipField(){if($jq("#LiveOutsideReg").is(":checked")){$jq("input#ZipCodeReg").attr("disabled","true");$jq("input#ZipCodeReg").addClass("nhs_Disabled");$jq("input#ZipCodeReg").val("")}else{$jq("input#ZipCodeReg").removeAttr("disabled");$jq("input#ZipCodeReg").removeClass("nhs_Disabled")}}function hideLogin(){var b=document.getElementById("divLogin");b.style.display="none";var a=document.getElementById("divConfirmationDefault");a.style.display=""}function hideCreateAccount(){var b=document.getElementById("divCreateAccount");b.style.display="none";var a=document.getElementById("divConfirmationDefault");a.style.display="";var c=document.getElementById("nhs_DetailsFormInfoActions");c.style.display=""};if(typeof NHS=="undefined"){NHS={};NHS.Scripts={}}NHS.Scripts.GoogleMapApi=function(b){var a={};jQuery.extend(true,a,this.defaultOptios);this.options=jQuery.extend(true,a,b);this.markersArray=[];this.infowindow=new google.maps.InfoWindow(this.options.InfoWindowOptions);this.infowindowTooltip=new google.maps.InfoWindow(this.options.InfoWindowOptions);this.map=null;this.bounds=new google.maps.LatLngBounds;this.isMapCreate=false};NHS.Scripts.GoogleMapApi.prototype={defaultOptios:{MapOptions:{Latitude:null,Longitude:null,Zoom:8,ContainerName:"map-canvas",zoomControl:true,ZoomControlStyle:"LARGE",zoomControlPosition:null,disableDefaultUI:false,Draggable:true,Scrollwheel:true,DisableDoubleClickZoom:false,panControl:false,overviewControl:false,streetViewControl:false},CreateMapWrap:true,DirectionsDisplayPanel:null,MarkerPointOptions:{optimized:true},Loader:"",MinZoom:3,MaxZoom:null,MarkerClustererOptions:{gridSize:50,maxZoom:15,cssName:null,imagePath:null,zoomOnClick:true,minimumClusterSize:null},UseClusterer:false,InfoWindowOptions:{disableAutoPan:false},MarkerPointAsynOptions:{Listener:"idle",UrlServer:null},ProcessResultOptions:{Latitude:"",Longitude:"",Name:""},Events:{OnMapCreate:null,OnMarkersCreate:null,OnMarkersRemove:function(){},OnGetMarkerPointAsyn:function(){},MarkerClickCallBack:null,IdleCallBack:null,MarkerMouseOverCallBack:null,MarkerMouseOutCallBack:null,ZoomChangesCallBack:null,DragChangesCallBack:null,ClickCallBack:null,InfowindowTooltipReadyCallBack:null,InfowindowReadyCallBack:null,tInfowindowOffsetCallBack:null},Autocomplete:{CreateControl:false,BindToBound:false,Autocompletecontrol:"pac-input"}},createMap:function(){var a=this,b=a.options.MapOptions,d=a.options.MarkerClustererOptions,c={zoom:b.Zoom,center:new google.maps.LatLng(b.Latitude,b.Longitude),zoomControl:b.zoomControl,zoomControlOptions:{style:google.maps.ZoomControlStyle[b.ZoomControlStyle],position:google.maps.ControlPosition[b.zoomControlPosition]},disableDefaultUI:b.disableDefaultUI,draggable:b.Draggable,scrollwheel:b.Scrollwheel,disableDoubleClickZoom:b.DisableDoubleClickZoom,panControl:b.panControl,streetViewControl:b.streetViewControl,overviewMapControl:b.overviewMapControl,maxZoom:a.options.MaxZoom,minZoom:a.options.MinZoom};a.options.CreateMapWrap&&a.createMapWrap();a.map=new google.maps.Map(document.getElementById(b.ContainerName),c);google.maps.Map.prototype.clearOverlays=function(){a.clearOverlays()};jQuery.isFunction(a.options.Events.ClickCallBack)&&google.maps.event.addListener(a.map,"click",function(){a.options.Events.ClickCallBack.call(a)});google.maps.event.addListener(a.map,"dragend",function(){jQuery.isFunction(a.options.Events.DragChangesCallBack)&&a.options.Events.DragChangesCallBack.call(a)});if(window["MarkerClusterer"])a.markerCluster=new MarkerClusterer(a.map,[],d);a.getMarkerPointAsyn();a.CreateOverlay();jQuery.isFunction(a.options.Events.InfowindowTooltipReadyCallBack)&&google.maps.event.addListener(a.infowindowTooltip,"domready",function(){a.options.Events.InfowindowTooltipReadyCallBack.call(a)});jQuery.isFunction(a.options.Events.InfowindowReadyCallBack)&&google.maps.event.addListener(a.infowindow,"domready",function(){a.options.Events.InfowindowReadyCallBack.call(a)});jQuery.isFunction(a.options.Events.ZoomChangesCallBack)&&google.maps.event.addListener(a.map,"zoom_changed",function(){a.options.Events.ZoomChangesCallBack.call(a,a.map.getZoom())});google.maps.event.addListener(a.map,"idle",function(){a.RemoveGoogleInfo();jQuery.isFunction(a.options.Events.IdleCallBack)&&a.options.Events.IdleCallBack.call(a);jQuery.isFunction(a.options.Events.OnMapCreate)&&!a.isMapCreate&&a.options.Events.OnMapCreate();a.isMapCreate=true});google.maps.event.addListenerOnce(a.map,"tilesloaded",a.RemoveGoogleInfo)},createMapWrap:function(){var a=this,b=a.options.MapOptions;jQuery("#"+b.ContainerName).wrap('<div id="nhs_mapwrap" style="position:relative;" />');jQuery("#nhs_mapwrap").append('<div id="nhs_OverlayMap" style="position: absolute;z-index:99999;top: 0px;left: 0px;height:100%;width:100%;background-color: #000;filter: alpha(opacity=35);-moz-opacity: 0.35;opacity: 0.35;"></div>');jQuery("#nhs_mapwrap").append('<div id="nhs_LoadingMap" class="nhs_Loading" style="position:absolute;"><p>Updating</p></div>');a.showLoading()},hideLoading:function(){jQuery("#nhs_LoadingMap, #nhs_OverlayMap").hide();jQuery(".gm-style > div > a").attr("href")&&setTimeout(function(){for(var b=jQuery(".gm-style-cc").length,a=1;a<b;a+=1)jQuery(".gm-style-cc").eq("-1").remove();jQuery(".gm-style > div > a").removeAttr("href").removeAttr("title")},800)},showLoading:function(){jQuery("#nhs_LoadingMap, #nhs_OverlayMap").show()},clearOverlays:function(){for(var a=this,b=0;b<a.markersArray.length;b++)a.markersArray[b].setMap(null);a.markersArray=[];a.bounds=new google.maps.LatLngBounds;a.markerCluster&&a.markerCluster.clearMarkers();a.options.Events.OnMarkersRemove()},getMarkerPointAsyn:function(){var a=this,b=a.options.MarkerPointAsynOptions;if(b.Listener&&b.UrlServer){a.options.Events.OnGetMarkerPointAsyn(b);google.maps.event.addListener(a.map,b.Listener,function(){a.showLoading();var c=a.getBoundsFromMap();a.map.clearOverlays();jQuery.getJSON(b.UrlServer,c,function(b){a.processResult(b)})})}else a.hideLoading()},getBoundsFromMap:function(){var e=this,a=e.map.getBounds(),b=a.getNorthEast(),c=a.getSouthWest(),d={minLat:c.lat(),minLng:c.lng(),maxLat:b.lat(),maxLng:b.lng()};return d},processResult:function(a){var c=this;c.showLoading();var d=c.options.ProcessResultOptions;if(a!==null)for(var b=0;b<a.length;b++){var e=c.getHtmlInfowindow(a,a[b]),f=c.getIconMarkerPoint(a,a[b]),g=c.getNameMarkerPoint(a,a[b]);c.createMarkerPoint(a[b][d.Latitude],a[b][d.Longitude],g,e,f,a[b])}c.hideLoading()},getHtmlInfowindow:function(){return null},getIconMarkerPoint:function(){return null},getNameMarkerPoint:function(d,b){var c=this,a=c.options.ProcessResultOptions;return b[a.Name]},createMarkerPoint:function(g,h,f,c,d,e){var a=this,b=a._createMarkerPoint(g,h,f,c,d,e);if(a.options.UseClusterer==false)b.setMap(a.map);else a.markerCluster&&a.markerCluster.addMarker(b);a.markersArray.push(b)},_createMarkerPoint:function(j,k,i,d,h,c){var a=this,e=new google.maps.LatLng(j,k),f=a.options.MarkerPointOptions,g={position:e,icon:h,title:i,optimized:f.optimized,zIndex:99};a.bounds.extend(e);var b=new google.maps.Marker(g);jQuery.isFunction(a.options.Events.OnMarkersCreate)&&a.options.Events.OnMarkersCreate(c,a.infowindow,b);typeof d=="string"&&google.maps.event.addListener(b,"click",function(){a.infowindow.setContent(d);a.infowindow.open(a.map,b);jQuery.isFunction(a.options.Events.MarkerClickCallBack)&&a.options.Events.MarkerClickCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});typeof d!="string"&&jQuery.isFunction(a.options.Events.MarkerClickCallBack)&&google.maps.event.addListener(b,"click",function(){a.options.Events.MarkerClickCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});jQuery.isFunction(a.options.Events.MarkerMouseOverCallBack)&&google.maps.event.addListener(b,"mouseover",function(){a.options.Events.MarkerMouseOverCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});jQuery.isFunction(a.options.Events.MarkerMouseOutCallBack)&&google.maps.event.addListener(b,"mouseout",function(){a.options.Events.MarkerMouseOutCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});return b},AutoFit:function(){var a=this;a.map.fitBounds(a.bounds)},CreateOverlay:function(){this.ourOverlay=new google.maps.OverlayView;this.ourOverlay.draw=function(){};this.ourOverlay.setMap(this.map)},GetInfowindowOffset:function(b,f,g,h){var d=0,e=0,a=this.ourOverlay.getProjection().fromLatLngToContainerPixel(h.getPosition()),i=this.ourOverlay.getProjection().fromLatLngToContainerPixel(g.getBounds().getSouthWest()),c=this.ourOverlay.getProjection().fromLatLngToContainerPixel(g.getBounds().getNorthEast());if(a.x<b/2)d=b/2-a.x;else if(a.x>c.x-b/2)d=c.x-b/2-a.x;if(a.y<f)e=a.y+f-(a.y-c.y);else e=a.y+20-(a.y-c.y);return new google.maps.Size(d,e)},GetPixelFromLatLng:function(b){var a=this.map.getProjection(),c=a.fromLatLngToPoint(b);return c},RemoveGoogleInfo:function(){if(jQuery(".gm-style > div > a").attr("href")){for(var b=jQuery(".gm-style-cc").length,a=1;a<b;a+=1)jQuery(".gm-style-cc").eq("-1").remove();jQuery(".gm-style > div > a").removeAttr("href").removeAttr("title")}}};NHS.Scripts.GoogleMapApi.prototype.initializeAutoComplete=function(){var a=this,b;if(a.options.Autocomplete.CreateControl)b=a.createControles();else b=document.getElementById(a.options.Autocomplete.Autocompletecontrol);jQuery(b).on("paste",function(){return setTimeout(function(){var a,c;a=jQuery(b);c=a.val();a.focus();a.val(c);return a.focus()},1)});var c=new google.maps.places.Autocomplete(b);a.options.Autocomplete.CreateControl&&a.initializeAutoCompleteControles(c);a.options.Autocomplete.BindToBound&&c.bindTo("bounds",a.map);var d=new google.maps.Marker({map:a.map});google.maps.event.addListener(c,"place_changed",function(){a.placeChangedProcess(d,c)})};NHS.Scripts.GoogleMapApi.prototype.placeChangedProcess=function(c,e){var b=this;b.infowindow.close();c.setVisible(false);var a=e.getPlace();if(!a.geometry)return;if(a.geometry.viewport)b.map.fitBounds(a.geometry.viewport);else{b.map.setCenter(a.geometry.location);b.map.setZoom(17)}var f=b.iconAutoComplite(a);c.setIcon(f);c.setPosition(a.geometry.location);c.setVisible(true);var d="";if(a.address_components)d=[a.address_components[0]&&a.address_components[0].short_name||"",a.address_components[1]&&a.address_components[1].short_name||"",a.address_components[2]&&a.address_components[2].short_name||""].join(" ");b.infowindow.setContent("<div><strong>"+a.name+"</strong><br>"+d);b.infowindow.open(b.map,c)};NHS.Scripts.GoogleMapApi.prototype.iconAutoComplite=function(a){var b={url:a.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)};return b};NHS.Scripts.GoogleMapApi.prototype.createControles=function(){var c=this,a=document.getElementById(c.options.MapOptions.ContainerName),b=jQuery('<div><input id="pac-input" class="controls" type="text" placeholder="Enter a location" / ><div id="type-selector" class="controls"><input type="radio" name="type" id="changetype-all" checked="checked"><label for="changetype-all">All</label><input type="radio" name="type" id="changetype-establishment"><label for="changetype-establishment">Establishments</label><input type="radio" name="type" id="changetype-geocode"><label for="changetype-geocode">Geocodes</label></div></div>')[0];a.parentNode.insertBefore(b,a.nextSibling);return document.getElementById("pac-input")};NHS.Scripts.GoogleMapApi.prototype.initializeAutoCompleteControles=function(a){var b=this;jQuery("#changetype-all").change(function(){a.setTypes([])});jQuery("#changetype-establishment").change(function(){a.setTypes(["establishment"])});jQuery("#changetype-geocode").change(function(){a.setTypes(["geocode"])});var c=document.getElementById("pac-input"),d=document.getElementById("type-selector");b.map.controls[google.maps.ControlPosition.TOP_LEFT].push(c);b.map.controls[google.maps.ControlPosition.TOP_LEFT].push(d)};NHS.Scripts.GooglePropertyMap=function(a){this.parameters=a;this.isMapCreate=false;this.log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,fromPage:a.fromPage,partnerId:a.partnerId,marketId:a.marketId})};NHS.Scripts.GooglePropertyMap.prototype={init:function(){jQuery("#dd-collapsible").hide();jQuery("#nhs_propertyMapCollapsibleClose").hide();var a=this,c=a.parameters,d=this.parameters.OptionsForMap,b=new NHS.Scripts.GoogleMapApi(d);b.initializeAutoComplete();b.getIconMarkerPoint=function(b,a){if(a.MarketPoints.length>1)return c.iconNearByCommMulti;return c.iconNearByComm};b.options.Events.MarkerClickCallBack=function(a,e,h,g){if(a){for(var f=[],d=0;d<a.MarketPoints.length;d++)f.push(a.MarketPoints[d]["CommunityId"]+"|"+0);jQuery.ajax({url:c.getCommunityMapCards,type:"GET",data:{commIds:f.join(),basicIds:""},success:function(a){if(a){e.setContent(a);e.open(b.map,g);tb_initLive("a.thickbox")}}})}};b.placeChangedProcess=function(d,b){var c=b.getPlace();a.location=c.geometry.location};jQuery("#nhs_PropertyMap").width(c.mapWidth).height(c.mapHeight);jQuery("#nhs_propertyMapCollapsibleOpen, #nhs_mapTab").click(function(c){jQuery.NhsCancelEvent(c);jQuery("#dd-collapsible").css("display")=="none"&&jQuery("#dd-collapsible").toggle("fast");jQuery("#nhs_propertyMapCollapsibleOpen").hide();jQuery("#nhs_propertyMapCollapsibleClose").show();a.isMapCreate&&a.log.logMultiEvent("BLMAPV",a.parameters.communityId,a.parameters.builderId,0,0);if(!a.isMapCreate){a.isMapCreate=true;b.createMap();a.parameters.NearbyComms&&b.processResult(a.parameters.NearbyComms);google.maps.event.addListener(b.map,"idle",a.RemoveGoogleInfo);b.createMarkerPoint(d.MapOptions.Latitude,d.MapOptions.Longitude,null,null,a.parameters.icon,null);a.logClickEvent_propertyMapExpand()}});jQuery("#nhs_propertyMapCollapsibleClose").click(function(a){jQuery.NhsCancelEvent(a);jQuery("#dd-collapsible").toggle("fast");jQuery("#nhs_propertyMapCollapsibleClose").hide();jQuery("#nhs_propertyMapCollapsibleOpen").show()});a.InitDrivingDirection()},logClickEvent_propertyMapExpand:function(){var a=this,b=NHS.Scripts.Helper.readCookie("drivingDirectionsClicked");if(!parseInt(b)){if(a.parameters.isBasicCommunity){a.log.logMultiEvent("bcMapSectionReveal",a.parameters.communityId,a.parameters.builderId,0,0);jQuery.googlepush("Basic Listing","Driving Directions",a.parameters.communityId,2,false)}else if(!a.parameters.isBasicListing)if(a.parameters.specId>0||a.parameters.planId>0)a.log.logMultiEvent("HDSDD",a.parameters.communityId,a.parameters.builderId,a.parameters.planId,a.parameters.specId);else a.log.logMultiEvent("CDSDD",a.parameters.communityId,a.parameters.builderId,0,0);NHS.Scripts.Helper.createCookie("drivingDirectionsClicked",1,0)}},InitDrivingDirection:function(){var a=this,b=new Date,c=b.getMonth(),d=b.getDate(),e=b.getFullYear();jQuery("#nhs_drivingDirections").show();jQuery("#tabMQMap a").click(function(){if(!jQuery("#nhs_PropertyMap").is(":visible")){jQuery("#nhs_PropertyMap").toggle();jQuery(this).toggleClass("On");jQuery(jQuery("#tabBuilderMap").find("a")[0]).toggleClass("On");jQuery("#nhs_BuilderPropertyMap").toggle();jQuery("#nhs_drivingDirections").hide();jQuery("#nhs_GetDirections").show();jQuery("#nhs_drivingDirections").show()}return false});jQuery("#tabBuilderMap a").click(function(){if(!jQuery("#nhs_BuilderPropertyMap").is(":visible")){jQuery("#nhs_BuilderPropertyMap").toggle();jQuery(this).toggleClass("On");jQuery(jQuery("#tabMQMap").find("a")[0]).toggleClass("On");jQuery("#nhs_PropertyMap").toggle();jQuery("#nhs_drivingDirections").show();jQuery("#nhs_GetDirections").hide();jQuery("#nhs_drivingDirections").show()}var b=NHS.Scripts.Helper.readCookie("drivingDirectionsBuilderMapClicked");if(!b){if(!a.parameters.isBasicListing||!a.parameters.isBasicCommunity)if(a.parameters.specId>0||a.parameters.planId>0)a.log.logMultiEvent("HDSDD",a.parameters.communityId,a.parameters.builderId,a.parameters.planId,a.parameters.specId);else a.log.logMultiEvent("CDSDD",a.parameters.communityId,a.parameters.builderId,0,0);NHS.Scripts.Helper.createCookie("drivingDirectionsBuilderMapClicked",1,0)}return false});jQuery("#nhsTxtDate").kendoDatePicker({min:new Date,change:function(){var d=kendo.toString(this.value(),"d"),b=jQuery(".btn_NhsMapSend"),a=b.attr("href");if(typeof a!="undefined"){var c=a.substring(a.indexOf("=")+1,a.indexOf("&"));b.attr("href",encodeURI(a.replace(c,d)))}},month:{empty:'<div class="kdp-outofdayarray">#= data.value #</div>'}});jQuery("#nhsTxtDate").attr("disabled","disabled");jQuery("#btnUpdate").click(function(){if(a.parameters.isBasicCommunity){a.log.logMultiEvent("bcRoute",a.parameters.communityId,a.parameters.builderId,a.parameters.planId,a.parameters.specId);jQuery.googlepush("Basic Listing","Driving Route",a.parameters.communityId,4,false)}else if(!a.parameters.isBasicListing)if(a.parameters.specId>0||a.parameters.planId>0){a.log.logMultiEvent("HDSHWRT",a.parameters.communityId,a.parameters.builderId,a.parameters.planId,a.parameters.specId);a.log.logMultiEvent("HDSDD",a.parameters.communityId,a.parameters.builderId,a.parameters.planId,a.parameters.specId)}else{a.log.logMultiEvent("CDSHWRT",a.parameters.communityId,a.parameters.builderId,0,0);a.log.logMultiEvent("CDSDD",a.parameters.communityId,a.parameters.builderId,0,0)}if(a.location){var c=(screen.width-840)/2,d=(screen.height-600)/2,b=jQuery("#nhsTxtStreeAddress").val();jQuery("#nhsWrongAddress").hide();var f=a.parameters.drivingDirectionAction+"?communityId="+a.parameters.communityId+"&lat="+a.location.lat()+"&lng="+a.location.lng()+"&check=false&isBasicListing="+a.parameters.isBasicListing+"&startingPoint="+b;jQuery.SetDataLayerPair("siteDrivingRoute");window.open(f,"_blank","width=840,height=600,top="+d+",left="+c+",menubar=yes,status=no,location=no,toolbar=no,scrollbars=yes")}else{var b=jQuery("#nhsTxtStreeAddress").val(),e=new google.maps.Geocoder;e.geocode({address:b},function(e,f){if(f==google.maps.GeocoderStatus.OK){var g=a.parameters.drivingDirectionAction+"?communityId="+a.parameters.communityId+"&lat="+e[0].geometry.location.lat()+"&lng="+e[0].geometry.location.lng()+"&check=false&isBasicListing="+a.parameters.isBasicListing+"&startingPoint="+b;jQuery.SetDataLayerPair("siteDrivingRoute");window.open(g,"_blank","width=840,height=600,top="+d+",left="+c+",menubar=yes,status=no,location=no,toolbar=no,scrollbars=yes")}else jQuery("#nhsWrongAddress").show()})}return false})},RemoveGoogleInfo:function(){if(jQuery(".gm-style > div > a").attr("href")){for(var b=jQuery(".gm-style-cc").length,a=1;a<b;a+=1)jQuery(".gm-style-cc").eq("-1").remove();jQuery(".gm-style > div > a").removeAttr("href").removeAttr("title")}}};NHS.Scripts.PropertyMap.NearbyComms=function(a){this._communityId=a.communityId;this._builderId=a.builderId;this._planId=a.specId>0?0:a.planId;this._specId=a.specId;this._log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,fromPage:a.fromPage,partnerId:a.partnerId,marketId:a.marketId})};NHS.Scripts.PropertyMap.NearbyComms.prototype={get_log:function(){return this._log},attachClickEventsToCommLinks:function(){$jq(".nhs_NearbyImgBox a").click(function(){attachLogEventToHomesNearby(this)}.bind(this));$jq(".nhs_selector a").click(function(){attachLogEventToHomesNearby(this)}.bind(this))}};function onTemplateLoaded(a){_bcExperienceID=a;commDetail.get_mp().loadMediaPlayer("community")}NHS.Scripts.BasiCommunityDetail=function(a){this.method=a.method;this._searchParameters=a.searchParameters;this._searchAction=a.searchAction;this._communityId=a.communityId;this._builderId=a.builderId;this._tabsControlId=a.tabsControlId;this._loadingControlId=a.loadingControlId;this._partnerId=a.partnerId;this._isBilled=a.isBilled;this._showSocialIcons=a.showSocialIcons;this._log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,fromPage:a.fromPage,partnerID:a.partnerId,marketId:a.marketId});this._currentSort=null;a.galleryParams.logger=this._log;this._mp=new NHS.Scripts.MediaPlayerVideo(a.galleryParams);this.googlePropertyMap=new NHS.Scripts.GooglePropertyMap(a.mapParametes);this._nearbyHomes=new NHS.Scripts.PropertyMap.NearbyComms(a.nearByParams);this._paging=new NHS.Scripts.Paging({onGoToPage:this._goToPage.bind(this)});this._sort=new NHS.Scripts.CommunityResults.Sorting({onSort:this._sortResults.bind(this)});InitGallery(a.galleryParams)};NHS.Scripts.BasiCommunityDetail.prototype={get_searchParameters:function(){return this._searchParameters},set_searchParameters:function(a){this._searchParameters=a},get_log:function(){return this._log},get_drivingDirections:function(){return this._drivingDirections},get_commId:function(){return this._communityId},get_builderId:function(){return this._builderId},get_mp:function(){return this._mp},initialize:function(){this._setUpControls();this._paging.initialize();this._sort2();this.googlePropertyMap.init();this._nearbyHomes.attachClickEventsToCommLinks();this._updateAdsPosition()},initializeEvents:function(){this._setUpControls();this._paging.initialize()},hideProgressIndicator:function(){$jq("#"+this._loadingControlId).hide()},_setUpControls:function(){var a=this;if(a._showSocialIcons.toLowerCase()=="false"){$jq("#addthis_bookmark").remove();$jq(".addthis_separator").remove();$jq(".addthis_button_facebook").remove();$jq(".addthis_button_twitter").remove();$jq(".nhs_DetailSmBrandImg").remove();$jq(".builder_link").remove();$jq("#addthis_more_sharing").remove();$jq("#addthis_bookmark_bottom").remove();$jq(".nhs_MediaShareOverlay, .nhs_PinterestOverlayBig").hide();$jq("#brochure_pro_step2").remove()}$jq("a[href=#top]").click(function(){$jq("html, body").animate({scrollTop:0},"slow");return false});$jq(window).bind("mousewheel",function(){$jq("html, body").stop()});$jq(window).bind("keydown",function(b){var a=b.which;(a===33||a==34||a>=37&&a<=40)&&$jq("html, body").stop()});$jq(".addthis_button_print").click(function(){setTimeout(function(){commDetail.get_log().logEvent("bcPrint",commDetail.get_commId(),commDetail.get_builderId())},1);$jq.googlepush("Basic Listing","Print Page",commDetail.get_commId(),null,false)});$jq("#button_pin_it a,.addthis_button_email,#btn_fb_mh,#btn_tw_mh").click(function(){setTimeout(function(){commDetail.get_log().logEvent("bcSocialShare",commDetail.get_commId(),commDetail.get_builderId())},1);$jq.googlepush("Basic Listing","Social Media Share",commDetail.get_commId(),1,false)});typeof addthis!="undefined"&&addthis.addEventListener("addthis.menu.share",function(a){if(_callAddThis)if(a.data.service=="print"){setTimeout(function(){commDetail.get_log().logEvent("bcPrint",commDetail.get_commId(),commDetail.get_builderId())},1);$jq.googlepush("Basic Listing","Print Page",commDetail.get_commId(),null,false)}else{setTimeout(function(){commDetail.get_log().logEvent("bcSocialShare",commDetail.get_commId(),commDetail.get_builderId())},1);$jq.googlepush("Basic Listing","Social Media Share",commDetail.get_commId(),1,false)}});$jq("#galleryList a").click(function(){setTimeout(function(){commDetail.get_log().logEvent("bcViewPicture",commDetail.get_commId(),commDetail.get_builderId())},1);$jq.googlepush("Basic Listing","Photo View",commDetail.get_commId(),null,false)});$jq("#nhs_detailDescriptionToggle").click(function(){if($jq("#nhs_detailDescriptionToggle").text().trim()=="...more"){$jq("#nhs_detailDescriptionToggle").text("less");$jq("#nhsDetailDescriptionArea").html("");$jq("#nhsDetailDescriptionArea").html(Encoder.htmlDecode(description));return false}else{$jq("#nhs_detailDescriptionToggle").text("...more");$jq("#nhsDetailDescriptionArea").html("");$jq("#nhsDetailDescriptionArea").html(Encoder.htmlDecode(chunkedDescription));return false}});$jq("#nhs_HomesGalleryLink").click(function(){var a=window.location.pathname;if($jq(".nhsFlag").hasClass("nhsHideRow")){$jq(".nhsFlag").removeClass("nhsHideRow");$jq(".nhsFlag").addClass("nhsShowRow");if(a.indexOf("communitydetailv1")!=-1)$jq("#nhs_HomesGalleryLink").text("Show only top 9 matching homes");else $jq("#nhs_HomesGalleryLink").text("Show only top 12 matching homes")}else if($jq(".nhsFlag").hasClass("nhsShowRow")){$jq(".nhsFlag").removeClass("nhsShowRow");$jq(".nhsFlag").addClass("nhsHideRow");if(a.indexOf("communitydetailv1")!=-1)$jq("#nhs_HomesGalleryLink").text("9 matching homes shown. See all ");else $jq("#nhs_HomesGalleryLink").text("12 matching homes shown. See all ")}metricLogger.logHomeResultsMetrics("CDHV",0);return false});$jq("a[href=#top]").click(function(){$jq("html, body").animate({scrollTop:0},"slow");return false})},_sort2:function(){var a=this;$jq("#SortOptionSelected").change(function(b){a._sortResults(b.currentTarget.value)})},_goToPage:function(a){this._retrieveResults(a,null,false)},update:function(){this._retrieveResults(1,null,true)},_updateAdsPosition:function(){if(jQuery("#nhs_CommunityDetails").length>0&jQuery("#nhs_AdColumn").length>0){var a=jQuery("#nhs_CommunityDetails").height();this._adsHeight=jQuery("#nhs_AdColumn").height();var d=a+jQuery("#nhs_AdColumn").offset().top,f=a-this._adsHeight-10,c=this._adsHeight+jQuery("#nhs_AdColumn").offset().top,b=jQuery(window).height(),e;jQuery(window).scroll(function(){var g=jQuery(document).scrollTop();a=jQuery("#nhs_CommunityDetails").height();d=a+jQuery("#nhs_AdColumn").offset().top;f=a-this._adsHeight-10;c=this._adsHeight+jQuery("#nhs_AdColumn").offset().top;b=jQuery(window).height();e=g+b;if(d>c)if(g>=c-b)if(e>d){jQuery("#nhs_AdColumn > div").removeClass("fixedBottom");jQuery("#nhs_AdColumn > div").addClass("absolute");jQuery("#nhs_AdColumn > div").css("top",f+"px");jQuery("#nhs_AdColumn > div").css("bottom","auto")}else{jQuery("#nhs_AdColumn > div").removeClass("absolute");jQuery("#nhs_AdColumn > div").addClass("fixedBottom");jQuery("#nhs_AdColumn > div").css("top","auto");jQuery("#nhs_AdColumn > div").css("bottom",0)}else{jQuery("#nhs_AdColumn > div").removeClass("fixedBottom");jQuery("#nhs_AdColumn > div").removeClass("absolute");jQuery("#nhs_AdColumn > div").css("top","auto");jQuery("#nhs_AdColumn > div").css("bottom","auto")}}.bind(this))}},_sortResults:function(a){switch(a){case "homematches":this._searchParameters.SortOrder=3;break;case "Price":this._searchParameters.SortOrder=2;break;case "Size":this._searchParameters.SortOrder=6;break;case "Status":this._searchParameters.SortOrder=5;break;case "Name":this._searchParameters.SortOrder=7}this._retrieveResults(1,a,false)},_getCurrentSort:function(){var a=$jq("#SortOptionSelected").val();switch(a){case "homematches":this._currentSort=3;break;case "Price":this._currentSort=2;break;case "Size":this._currentSort=6;break;case "Status":this._currentSort=5;break;case "Name":this._currentSort=7}return this._currentSort},_retrieveResults:function(b,a){$jq("#"+this._loadingControlId).show();if(a==null)a=this._getCurrentSort();$jq.ajax({url:this._searchAction,type:"POST",data:{searchParameters:NHS.Scripts.Helper.JSON.toString(this._searchParameters),page:b,sortColumn:a},success:function(a){$jq("#ViewHomes").html(a);this.initializeEvents()}.bind(this),error:function(c,b,a){NHS.Scripts.Helper.logError(a,this._searchAction,"error on search")}});this.hideProgressIndicator()}};var paging;NHS.Scripts.SendToPhone=function(){};NHS.Scripts.SendToPhone.prototype={initialize:function(a){if(a===undefined)a="Phone";$jq("#"+a).mask("(999) 999-9999");$jq("#"+a).focus();$jq("#Cancel").click(tb_remove)}};var player;$jq(document).ready(function(){var b=document.createElement("script");b.src="https://www.youtube.com/iframe_api";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)});function onYouTubeIframeAPIReady(){}function createPlayer(a,b,d,c){player=new YT.Player(a,{height:c,width:d,videoId:b,events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerReady(a){a.target.playVideo()}function onPlayerStateChange(){}