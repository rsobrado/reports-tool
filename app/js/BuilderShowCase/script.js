NHS={};NHS.Scripts={};NHS.Scripts.Helper={};NHS.Scripts.Helper.JSON={};NHS.Scripts.Globals={};NHS.Scripts.CommunityResults={};NHS.Scripts.CommunityDetail={};NHS.Scripts.HomeDetail={};NHS.Scripts.PropertyMap={};NHS.Scripts.MediaPlayer={};NHS.Scripts.SearchAlert={};var tempNum,fromP,createeBook=true,$jq=jQuery.noConflict();$jq(document).ready(function(){HighlightNav();$jq("#lnkSignIn").click(function(){$jq.googlepush("Account Events","Create Account","Open Form - Header Link")});$jq(".GAPush li a").click(function(){var a=$jq(this).parent().parent(),d=a.attr("id"),b=a.find("li"),c=b.index($jq(this).parent())+1;$jq.googlepush("Site Links","SEO Links",d+c)});setTimeout(function(){$jq(".nhs_SpotCommImg a").click(function(){var b=$jq(this),a=b.attr("type");$jq.googlepush("Images","Spotlight - "+a,"Select Images")})},5e3);jQuery("#nhs_Header > nav > ul > li > a").click(function(a){jQuery.NhsCancelEvent(a)});var a=jQuery("#nhs_Header > nav > ul"),b=0;a.find("li").each(function(){jQuery(this).find(">div").hide();if(jQuery(this).find(">div").length>0){jQuery(this).children("li>a").on("touchstart mouseenter mouseup",function(b){if(jQuery(this).hasClass("nhs_Active")){if(b.type=="mouseenter")return false;if(b.type=="touchstart")return true;if(b.type=="mouseup"){jQuery(this).parent().find(">div").stop(true,true).fadeOut(500);jQuery(this).removeClass("nhs_Active")}}else{if(b.type=="touchstart"){a.find("li>a").removeClass("nhs_Active");a.find("li>div").stop(true,true).fadeOut(500)}jQuery(this).parent().find(">div").stop(true,true).fadeIn(300);jQuery(this).addClass("nhs_Active")}if(b.type=="touchstart")return false});jQuery(this).mouseleave(function(){jQuery(this).find(">div").stop(true,true).fadeOut(500);jQuery(this).find("a").removeClass("nhs_Active")})}});ReferModuleHandler.SetRefer()});NHS.Scripts.Helper.logError=function(a,f,e){var c="Browser: "+navigator.appCodeName+" - "+navigator.appName+" Version: "+navigator.appVersion;if(a!==null&&typeof a!=="undefined"){var d={Message:a.hasOwnProperty("message")?a.message:a,Number:a.hasOwnProperty("lineNumber")?a.lineNumber:a,Name:a.hasOwnProperty("message")?a.name:a,Href:f,AddInfo:e,BrowserInfo:c},b=$jq.toJSON(d);$jq.ajax({type:"POST",url:"/Log/LogError",data:{nhsJsError:b},dataType:"json"});return true}};NHS.Scripts.Helper.createDelegate=function(b,a){return function(){a.apply(b,arguments)}};Function.prototype.bind=function(a){var c=this;if(arguments.length<=1)return function(){return c.apply(a,arguments)};else{var b=Array.prototype.slice.call(arguments,1);return function(){return c.apply(a,arguments.length===0?b:b.concat(Array.prototype.slice.call(arguments)))}}};NHS.Scripts.Helper.createCookie=function(e,d,b){if(b){var a=new Date;a.setTime(a.getTime()+b*24*60*60*1e3);var c="; expires="+a.toGMTString()}else var c="";document.cookie=e+"="+d+c+"; path=/"};NHS.Scripts.Helper.readCookie=function(e){for(var c=e+"=",d=document.cookie.split(";"),b=0;b<d.length;b++){var a=d[b];while(a.charAt(0)==" ")a=a.substring(1,a.length);if(a.indexOf(c)==0)return a.substring(c.length,a.length)}return null};NHS.Scripts.Helper.eraseCookie=function(a){NHS.Scripts.Helper.createCookie(a,"",-1)};NHS.Scripts.Helper.JSON.toString=function(b){var c=typeof b;if(c!="object"||b===null)return String(b);else{var e,a,f=[],d=b&&b.constructor==Array;for(e in b){a=b[e];c=typeof a;if(c=="string")a='"'+a+'"';else if(c=="object"&&a!==null)a=JSON.stringify(a);f.push((d?"":'"'+e+'":')+String(a))}return (d?"[":"{")+String(f)+(d?"]":"}")}};NHS.Scripts.Helper.stopBubble=function(a){if(!a)var a=window.event;a.cancelBubble=true;a.stopPropagation&&a.stopPropagation()};window.onerror=function(){};NHS.Scripts.Helper.FieldDefaultValue=function(a,e,d,c,b){if(typeof a=="string")this._field=$jq("#"+a);else this._field=$jq(a);this._defaultValue=e;this._defaultValueClass=d;if(c!=null)this._submitButton=$jq("#"+c);if(b!=null)this._submitButton2=$jq("#"+b)};NHS.Scripts.Helper.FieldDefaultValue.prototype={initialize:function(){if(this._field.val()==""){this._field.addClass(this._defaultValueClass);this._field.val(this._defaultValue)}this._focusHandler=NHS.Scripts.Helper.createDelegate(this,this._onFocus);this._blurHandler=NHS.Scripts.Helper.createDelegate(this,this._onBlur);this._submitHandler=NHS.Scripts.Helper.createDelegate(this,this._onSubmit);this._field.focus(this._focusHandler);this._field.blur(this._blurHandler);this._submitButton!=null&&this._submitButton.click(this._submitHandler);typeof this._submitButton2!="undefined"&&this._submitButton2.click(this._submitHandler)},_onFocus:function(){if(this._field.val()==this._defaultValue){this._field.removeClass(this._defaultValueClass);this._field.val("")}},_onBlur:function(){if(this._field.val()==""){this._field.addClass(this._defaultValueClass);this._field.val(this._defaultValue)}},_onSubmit:function(){this._field!=null&&this._field.val()==this._defaultValue&&this._field.val("")}};$jq.fn.clearSelect=function(){return this.each(function(){if(this.tagName=="SELECT")this.options.length=0})};$jq.fn.fillSelect=function(a){return this.clearSelect().each(function(){if(this.tagName=="SELECT"){var b=this;$jq.each(a,function(d,a){var c=new Option(a.Text,a.Value);if($jq.browser.msie)b.add(c);else b.add(c,null)})}})};Number.prototype.formatCurrency=function(g,a,f,e){var d=this,a=isNaN(a=Math.abs(a))?2:a,f=f==undefined?",":f,e=e==undefined?".":e,h=d<0?"-":"",c=parseInt(d=Math.abs(+d||0).toFixed(a))+"",b=(b=c.length)>3?b%3:0;return g+h+(b?c.substr(0,b)+e:"")+c.substr(b).replace(/(\d{3})(?=\d)/g,"$1"+e)+(a?f+Math.abs(d-c).toFixed(a).slice(2):"")};function UseOnSubmit(){var a=navigator.userAgent.toLowerCase(),b=false;if(a.indexOf("firefox")==-1&&a.indexOf("apple")==-1&&a.indexOf("msie 9.0")==-1&&a.indexOf("chrome")==-1&&a.indexOf("msie 10.0")==-1)b=true;return b}function FillMarkets(){try{var b=$jq("#ddlMarket"),a=$jq("[id*='ddlState'] :selected").text();a!=null&&a!=""&&$jq.ajax({type:"GET",url:"/BoylSearch/GetAreas",dataType:"json",data:{state:a},success:function(a){b.empty();$jq.each(a,function(c,a){b.append($jq("<option></option>").text(a.Text).val(a.Value))})}})}catch(c){}}function getThePath(e,a){for(var d,b=0;b<e.length;b++){var c=e[b].replace("\\","//");a=a.replace("/","\\").toLowerCase();if(c.toLowerCase().indexOf(a)!=-1&&a!=""){d=c;break}}return d}function reload(a){window.location.href=a}function HighlightRegion(e){var b=[];b=e.split(",");for(var d=[],a=1,h,g,c=0;c<b.length;c++){var f=b[c].split(";");d.push(f[1])}$jq("div").each(function(){var a=$jq(this).attr("class");if(a=="nhsStaticContent"){$jq(this).addClass("nhs_Overlay");$jq(this).mouseover(function(){$jq(this).removeClass("nhs_Overlay_Out");$jq(this).addClass("nhs_Overlay_Over");var a=$jq(this).children().children("[class*='stNumber']");tempNum=$jq(a).html();var b=$jq(a).attr("title");$jq(a).html(tempNum+'   <b class="stNumberPath">'+getThePath(d,b)+"</b>")});$jq(this).mouseout(function(){$jq(this).removeClass("nhs_Overlay_Over");$jq(this).addClass("nhs_Overlay_Out");var a=$jq(this).children().children("[class*='stNumber']");$jq(a).html(tempNum)})}});$jq("b").each(function(){var b=$jq(this).attr("class");if(b=="stNumber"){$jq(this).html(a);a>9&&$(this).css("left","8px");a=a+1}})}function closeThisModal(){reloadParent()}function SetTextBoxesDescriptions(){!Modernizr.input.placeholder&&jQuery("[placeholder]").focus(function(){var a=jQuery(this);if(a.val()==a.attr("placeholder")){a.val("");a.removeClass("placeholder")}}).blur(function(){var a=jQuery(this);if(a.val()==""||a.val()==a.attr("placeholder")){a.addClass("placeholder");a.val(a.attr("placeholder"))}}).blur().parents("form").submit(function(){jQuery(this).find("[placeholder]").each(function(){var a=jQuery(this);a.val()==a.attr("placeholder")&&a.val("")})})}function ss(c,b){var a=$jq("#FromPage").val();if(a.indexOf("createalertmodal")!=-1){$jq("#nhs_Login").fadeOut();tb_resizeWindow(c,b)}}function getRecoCheckedBox(a){var d=a.checked,c=a.name.split("_"),b=c[3];if(a.checked)$jq("#CblReqComm_"+b.toString()).val(false);else $jq("#CblReqComm_"+b.toString()).val(true)}function SetPromosToggle(){var a=215,b="...more",c="less";if($jq("#liPromos").hasClass("option2"))a=100;else if($jq("#liPromos").hasClass("option3"))a=55;$jq(".more").each(function(){var c=$jq(this).html();if(c.length>a){var e=c.substr(0,a),f=c.substr(a,c.length-a+1),d=e+'<span class="moreellipses">&nbsp;</span><span class="morecontent"><span>'+f+'</span>&nbsp;&nbsp;<a href="javascript:void(0)" class="morelink">'+b+"</a></span>";$jq(this).html(d)}});$jq(".morelink").click(function(){if($jq(this).hasClass("less")){$jq(this).removeClass("less");$jq(this).html(b)}else{$jq(this).addClass("less");$jq(this).html(c)}$jq(this).parent().prev().toggle();$jq(this).prev().toggle();return false})}function tb_refresParentDetailPage(){refreshparentwindow=true}$jq(document).ready(function(){if(NHS.Scripts.Globals.IsDebug&&$j.browser.mozilla)try{window.loadFirebugConsole()}catch(a){if(typeof console=="undefined")console={log:function(){}}}else if(typeof console=="undefined")console={log:function(){}}});if(!Array.prototype.indexOf)Array.prototype.indexOf=function(c,b){for(var a=b||0,d=this.length;a<d;a++)if(this[a]==c)return a;return -1};function Reload(){window.location.reload()}function ValidFullName(b){var a=new RegExp(/^[a-zA-Z]+\s[a-zA-Z]+$/i);return a.test(b)}function ValidEmail(b){var a=new RegExp(/^([0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/i);return a.test(b)}function ValidFullNameWithNumberLastName(a){var b=new RegExp(/^([A-Za-z]+(-?'?[A-Za-z+'?-?]+)?)(\s([A-Za-z]+(-?'?[A-Za-z+'?-?]+)?))+?$/i);return b.test(a)&&a.split(" ").length>1}function ValidZipcode(b){var a=new RegExp(/^\d{5}(-\d{4})?$/i);return a.test(b)}function HighlightNav(){var a=location.pathname,b=false;if($jq('#mv_SearchNav li a[href="'+a+'"]')!=null){$jq('#mv_SearchNav li a[href="'+a+'"]').parent().addClass("active");b=true}if(a.charAt(a.length-1)=="/"&&!b){$jq('#mv_SearchNav li a[href="'+a.substring(0,a.length-1)+'"]').parent().addClass("active");b=true}var c=a.split("/");c.length>2&&$jq('#mv_SearchNav li a[href="/'+c[1]+'/"]').parent().addClass("active")}function FreeBrochureSubmitGAEvents(){jQuery("#CreateAlert").prop("checked")&&jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Option Checked - Send Me More");jQuery("#Newsletter").prop("checked")&&jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Option Checked - Free Newsletter");jQuery("#Promos").prop("checked")&&jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Option Checked - Special Promotions")}function disableScrollKeys(){jQuery(document).keypress(function(b){var a=b.keyCode;if(a>=37&&a<=40)return false})}function enableScrollKeys(){jQuery(document).unbind("keypress",null)}function SubmitGetBrochures(){var a=jQuery("input[id^='chkReqCommBrochure_']:checked").length+jQuery("input[id^='chkReqHomeBrochure_']:checked").length;jQuery.googlepush("Lead Events","Search Results CTA Free Brochure","Submit Form - Get Free Brochures",a);jQuery.SetDataLayerPair("recommendedLead",a)}var VWOCountTimer=null;function VWOReady(a){if(typeof _vwo_code!="undefined")if(_vwo_code.finished()){clearTimeout(VWOCountTimer);jQuery.isFunction(a)&&a.call()}else VWOCountTimer=setTimeout(function(){VWOReady(a)},500);else jQuery.isFunction(a)&&a.call()}var ReferModuleHandler=function(b){"use strict";var a={},e="/common/setrefer";function c(){return b.GetHashTagParameter("refer")}function d(){var a=c(),d="";if(a!=null&&a!=""){if(typeof document.referrer!="undefined"&&document.referrer!="")d=document.referrer;b.ajax({type:"GET",url:e,data:{refVal:a,refUrl:d}}).done(function(){})}}a.SetRefer=function(){d()};return a}(jQuery);NHS.Scripts.CommunityResults.Map=function(a){this._partnerId=a.partnerID;this._brandPartnerId=a.brandPartnerId;this._siteRoot=a.siteRoot;this._communityPage=a.communityPage;this._communityResultsPage=a.communityResultsPage;this._basicListingPage=a.basicListingPage;this._basicCommPage=a.basicCommPage;this._resourceRoot=a.resourceRoot;this._mapContainerId=a.mapContainerId;this._searchMapAreaParagraphId=a.searchMapAreaParagrapId;this._mapLoadingId=a.mapLoadingId;this._mapTipBox=a.mapTipBoxId;this._mapMaxResultsMsgId=a.mapMaxResultsMsgId;this._mqZoom=null;this._maxResults=a.maxResults;this._isBuilderMap=a.isBuilderMap;this._brandId=a.brandId;this._marketId=a.marketId;this._brandName=a.brandName;this._mapWidth=a.Width;this._mapHeight=a.Height;this._mapCommsAction=a.mapCommsAction;this._mapMarketsAction=a.mapMarketsAction;this._mapStatesAction=a.mapStatesAction;if(this._brandPartnerId==333){this._mqIconPath=this._resourceRoot+"globalresources/move/images/map/marker.gif";this._mqIconMultPath=this._resourceRoot+"globalresources/move/images/map/marker_multiple.gif";this._mqIconMktPath=this._resourceRoot+"globalresources/move/images/map/marker_market.gif"}else{this._mqIconPath=this._resourceRoot+"globalresources/default/images/map/marker.gif";this._mqIconMultPath=this._resourceRoot+"globalresources/default/images/map/marker_multiple.gif";this._mqIconMktPath=this._resourceRoot+"globalresources/default/images/map/mkt_icon.gif"}this._mqBLIconPath=this._resourceRoot+"globalresourcesmvc/default/images/map/marker_basic.png";this._mqIconShadowPath=this._resourceRoot+"globalresources/default/images/map/marker_shadow.png";this._viewOnMapLinkScript=a.viewOnMapLinkScript;this._freeBrochureLink=a.freeBrochureLink;this._requestPromoLink=a.requestPromoLink;this._requestAppointmentLink=a.requestAppointmentLink;this._pageUrl=document.location.href;this._iteration=0;this._isBeingShowed=false;this._updateMapFlag=true;this._doingViewonMap=false;this._updateResultsFlag=true;this._nhsMqMap=null;this._nhsMapIconShadow=null;this._mqOrigZoom=null;this._mqOrigCenter=null;this._mqCenter=null;this._mqIconOffset=null;this._nhsMapIconMult=null;this._mqIconMultOffset=null;this._nhsMapIcon=null;this._nhsMapIconMkt=null;this._mqIconMktOffset=null;this._mqMoveRefPoint=null;this._prevBrowserSize=null;this._searchParameters=a.searchParams;this._mqMinLat=a.mqMinLat;this._mqMinLng=a.mqMinLng;this._mqMaxLat=a.mqMaxLat;this._mqMaxLng=a.mqMaxLng;this._mqCenterLat=a.mqCenterLat;this._mqCenterLng=a.mqCenterLng;this._mqZoomLevel=a.mqZoomLevel;this._commResults=a.commResults;if(typeof this._commResults!="undefined")this._log=this._commResults.get_log();else this._log=a.logger};NHS.Scripts.CommunityResults.Map.prototype={get_searchParameters:function(){return this._searchParameters},set_searchParameters:function(a){this._searchParameters=a},get_log:function(){return this._log},get_updateMapFlag:function(a){this._updateMapFlag=a},get_updateResultsFlag:function(a){this._updateResultsFlag=a},show:function(){if(!this._isBeingShowed){this._resizeMapDiv();this._mqZoom=this._mqZoomLevel;this._mqOrigZoom=this._mqZoom;this._mqOrigCenter=new MQA.LatLng(this._mqCenterLat,this._mqCenterLng);this._mqCenter=this._mqOrigCenter;this._nhsMqMap=new MQA.TileMap(document.getElementById(this._mapContainerId),this._mqZoom,this._mqOrigCenter,"map");this._nhsMapIconShadow=new MQA.Icon(this._mqIconShadowPath,0,0);this._nhsMapIcon=new MQA.Icon(this._mqIconPath,20,26);this._nhsBLMapIcon=new MQA.Icon(this._mqBLIconPath,14,14);this._mqIconOffset=new MQA.Point(-10,-26);this._nhsMapIconMult=new MQA.Icon(this._mqIconMultPath,28,28);this._mqIconMultOffset=new MQA.Point(-14,-28);this._nhsMapIconMkt=new MQA.Icon(this._mqIconMktPath,40,37);this._mqIconMktOffset=new MQA.Point(-20,-37);this._mqMoveRefPoint=this._nhsMqMap.pixToLL(new MQA.Point(0,0));var a=null;if(!this._isBuilderMap){a=new MQA.ZoomControl;this._nhsMqMap.addControl(a,new MQA.MapCornerPlacement(MQA.MapCorner.TOP_LEFT,new MQA.Size(10,21)))}else{a=new MQA.LargeZoomControl;this._nhsMqMap.addControl(a,new MQA.MapCornerPlacement(MQA.MapCorner.TOP_RIGHT,new MQA.Size(10,21)))}this._setMapWindowCoordinates();if(this.mqZoom<7)$jq("#"+this._searchMapAreaParagraphId).hide();else $jq("#"+this._searchMapAreaParagraphId).show();this._prevBrowserSize=this._getBrowserSize();this.browserResize();if(!this._isBuilderMap){MQA.EventManager.addListener(this._nhsMqMap,"zoomEnd",function(a){this.get_log().logEvent("MAPZOOM",0,0);this._zoomEnd(a)}.bind(this));MQA.EventManager.addListener(this._nhsMqMap,"moveend",this._mapMoveEnd.bind(this))}MQA.EventManager.addListener(this._nhsMqMap.getInfoWindow(),"opened",this._infoWindowOpen);MQA.EventManager.addListener(this._nhsMqMap.getInfoWindow(),"closed",this._infoWindowClose);MQA.EventManager.addListener(this._nhsMqMap.getRolloverWindow(),"opened",this._rolloverWindowOpen.bind(this));MQA.EventManager.addListener(this._nhsMqMap.getRolloverWindow(),"closed",this._rolloverWindowClose.bind(this));this._autoViewOnMapLink();this._isBuilderMap&&$jq("#nhs_CommResHideMap").hide();this._displayMapTip();$jq("#mqmaptilediv").css("z-index","0")}this._isBeingShowed=true},refresh:function(){var a=0;if(this._searchParameters==null)a=this._mqZoomLevel;else if(this._searchParameters.Radius>=10)a=7;else if(this._searchParameters.Radius==5)a=8;else if(this._searchParameters.Radius==3)a=9;else if(this._searchParameters.Radius==1)a=10;else if(this._searchParameters.City!=""||this._searchParameters.CityNameFilter!=""||this._searchParameters.PostalCode!="")a=8;else a=7;if(a!=this._nhsMqMap.getZoomLevel()||this._nhsMqMap.getCenter().getLatitude()!=this._mqCenterLat)this.zoomToLatLng(this._mqCenterLat,this._mqCenterLng,a);else this._updateMapPoints()},resetSearchArea:function(){this._mqMinLat=0;this._mqMinLng=0;this._mqMaxLat=0;this._mqMaxLng=0},viewCommunityOnMapOnHover:function(a,c,b){if(this._nhsMqMap){if(!a)var a=window.event;a.cancelBubble=true;a.stopPropagation&&a.stopPropagation();poiCollection=this._nhsMqMap.getShapes();keyToFind=""+c+b;for(i=0;i<poiCollection.getSize();i++){commPoi=poiCollection.getAt(i);if(commPoi.getKey().match(keyToFind)==keyToFind){commPoi.showRolloverWindow();break}}}},hideCommunityOnMapOnHover:function(a,c,b){if(this._nhsMqMap){if(!a)var a=window.event;a.cancelBubble=true;a.stopPropagation&&a.stopPropagation();poiCollection=this._nhsMqMap.getShapes();keyToFind=""+c+b;for(i=0;i<poiCollection.getSize();i++){commPoi=poiCollection.getAt(i);if(commPoi.getKey().match(keyToFind)==keyToFind){commPoi.mqrw&&commPoi.mqrw.hide();break}}}},viewCommunityOnMap:function(c,b,a,m,o,t,s,p,f,l,k,g,h,n,q,r,j,d,e){this._doingViewonMap=true;if(d=="true")this.get_log().logEvent("CRBLMD",b,a);else if(e=="true")this.get_log().logEvent("CRBCMD",b,a);else this.get_log().logEvent("VIEWMAP",b,a);if(this._viewOnMapLinkScript==""){c.cancelBubble=true;c.stopPropagation&&c.stopPropagation();c.preventDefault&&c.preventDefault()}!$jq("#nhs_CommResShowMap").is(".nhs_CommResShowMapOpen")&&typeof commResults!="undefined"&&commResults.showMap();poiCollection=this._nhsMqMap.getShapes();keyToFind=""+b+a;pointFound=false;for(i=0;i<poiCollection.getSize();i++){commPoi=poiCollection.getAt(i);if(commPoi.getKey().match("mkey")=="mkey"){if(commPoi.getKey().match(keyToFind)==keyToFind){pointFound=true;commPoiLatLng=commPoi.getLatLng();this._nhsMqMap.panToLatLng(commPoiLatLng);this._viewOnMapLinkScript==""&&commPoi.showRolloverWindow();break}}else if(commPoi.getKey()==keyToFind){pointFound=true;commPoiLatLng=commPoi.getLatLng();this._nhsMqMap.panToLatLng(commPoiLatLng);this._viewOnMapLinkScript==""&&commPoi.showRolloverWindow();break}}if(!pointFound&&this._nhsMqMap.getZoomLevel()>=7){commPoi=this._createCommPoi(b,a,m,o,t,s,p,f,l,k,g,h,n,q,r,j,null,null,d,e);this._nhsMqMap.addShape(commPoi);commPoi.setValue("rolloverEnabled",true);commPoiLatLng=commPoi.getLatLng();this._nhsMqMap.panToLatLng(commPoiLatLng);this._viewOnMapLinkScript==""&&commPoi.showRolloverWindow()}else if(!pointFound&&this._nhsMqMap.getZoomLevel()<7){commPoi=this._createCommPoi(b,a,m,o,t,s,p,f,l,k,g,h,n,q,r,j,null,null,d,e);this._nhsMqMap.setZoomLevel(7);commPoiLatLng=commPoi.getLatLng();this._nhsMqMap.panToLatLng(commPoiLatLng);commPoi.setValue("rolloverEnabled",true);this._nhsMqMap.addShape(commPoi);this._viewOnMapLinkScript==""&&commPoi.showRolloverWindow()}setTimeout(function(){this._doingViewonMap=false}.bind(this),1e3);$jq("html,body").animate({scrollTop:$jq("a[name='MapAnchor']").offset().top},"fast")},zoomToLatLng:function(b,c,a){this._updateResultsFlag=false;this._nhsMqMap.setCenter(new MQA.LatLng(b,c));this._nhsMqMap.setZoomLevel(a);this._updateResultsFlag=true},zoomToLatLngBC:function(d,e,a,c,b){this._updateResultsFlag=false;this._nhsMqMap.setCenter(new MQA.LatLng(d,e));this._nhsMqMap.setZoomLevel(a);!this._isBuilderMap&&this.get_log.logEvent("HOVZOOM",c,b);this._updateResultsFlag=true},_updateIFrameAd:function(b,c){var d="nhsIFrameAd"+b,a=document.getElementById(d);if(a&&a.style.display!="none")a.src=c},_resizeMapDiv:function(){var a=this._getMapSize();$jq("#"+this._mapContainerId).width(a.getWidth());$jq("#"+this._mapContainerId).height(a.getHeight())},_setMapWindowCoordinates:function(){var c=this._getMapSize(),b=this._nhsMqMap.pixToLL(new MQA.Point(0,0)),a=this._nhsMqMap.pixToLL(new MQA.Point(c.getWidth(),c.getHeight()));this._mqMinLat=b.getLatitude();this._mqMinLng=b.getLongitude();this._mqMaxLat=a.getLatitude();this._mqMaxLng=a.getLongitude();this._mqCenterLat=this._nhsMqMap.getCenter().getLatitude();this._mqCenterLng=this._nhsMqMap.getCenter().getLongitude();this._mqZoomLevel=this._nhsMqMap.getZoomLevel()},updateResults:function(){if(this._searchParameters!=null){this._searchParameters.MinLatitude=this._mqMaxLat;this._searchParameters.MinLongitude=this._mqMinLng;this._searchParameters.MaxLatitude=this._mqMinLat;this._searchParameters.MaxLongitude=this._mqMaxLng;this._commResults.saveSearchState();this.get_log().logEvent("MAPUPD",0,0);this._commResults.updateResults()}},browserResize:function(){var a=this._getBrowserSize();(this._prevBrowserSize.getWidth()!=a.getWidth()||this._prevBrowserSize.getHeight()!=a.getHeight())&&this._resizeMap();this._prevBrowserSize=a;if(this._isBuilderMap)var b=setTimeout("builderShowCase.get_map().browserResize()",250);else var c=setTimeout("commResults.get_map().browserResize()",250)},_resizeMap:function(){var a=this._getMapSize();this._nhsMqMap.setSize(a);$jq("#"+this._mapContainerId).width(a.getWidth());$jq("#"+this._mapContainerId).height(a.getHeight())},_getMapSize:function(){var b=this._mapWidth,a=this._mapHeight;return new MQA.Size(b,a)},_getBrowserSize:function(){var a=new MQA.Size(0,0);if(document.body.scrollHeight>document.body.offsetHeight){a.width=document.body.scrollWidth;a.height=document.body.scrollHeight}else{a.width=document.body.offsetWidth;a.height=document.body.offsetHeight}if(document.body.clientWidth){a.width=document.body.clientWidth;a.height=document.body.clientHeight}else{a.width=document.body.offsetWidth;a.height=document.body.offsetHeight}if(document.documentElement.clientWidth){a.width=document.documentElement.clientWidth;a.height=document.documentElement.clientHeight}if(self.innerWidth){a.width=self.innerWidth;a.height=self.innerHeight}return a},_renderPoiCollection:function(a){if(this._mqZoom<7||a.getSize()==0)$jq("#"+this._searchMapAreaParagraphId).hide();else $jq("#"+this._searchMapAreaParagraphId).show();this._nhsMqMap.replaceShapes(a)},_mapMoveEnd:function(){if(this._updateMapFlag&&!this._doingViewonMap){this.get_log().logEvent("MAPDRAG",0,0);this._showMapStatus();this._setMapWindowCoordinates();this._updateMapPoints();this._updateResultsFlag&&this.updateResults()}},_zoomEnd:function(a){if(a.zoom<7)$jq("#"+this._searchMapAreaParagraphId).hide();else $jq("#"+this._searchMapAreaParagraphId).show();this._setMapWindowCoordinates();this._updateMapPoints();this._updateResultsFlag&&this.updateResults()},_infoWindowOpen:function(){if(typeof commResults!="undefined"){commResults.get_map().get_updateMapFlag(false);!this._isBuilderMap&&commResults.get_map().get_log().logEvent("MAPCLICK",0,0);tb_init(".nhs_CommResHoverBox a.thickbox, .nhs_MultiHoverBox a.thickbox")}},_infoWindowClose:function(){typeof commResults!="undefined"&&commResults.get_map().get_updateMapFlag(true)},_rolloverWindowOpen:function(){this._updateMapFlag=false},_rolloverWindowClose:function(){this._updateMapFlag=true},_autoViewOnMapLink:function(){if(this._viewOnMapLinkScript!=""){eval(this._viewOnMapLinkScript);this._hideMapStatus()}},_hideMapStatus:function(){$jq("#"+this._mapLoadingId).hide()},_showMapStatus:function(){$jq("#"+this._mapLoadingId).show()},_updateMapPoints:function(){var d=this._mqMinLat,e=this._mqMinLng,b=this._mqMaxLat,c=this._mqMaxLng,f=this._maxResults;this._showMapStatus();var a=this._nhsMqMap.getZoomLevel();if(a<4&&!this._isBuilderMap)this._getStateMapPois(d,e,b,c);else if(a<7&&(this._isBuilderMap&&a<6))this._getMarketMapPois(d,e,b,c);else this._getCommMapPois(this._searchParameters,d,e,b,c,f)},_getCommMapPois:function(a,e,f,c,d,b){if(this._isBuilderMap)$jq.ajax({url:this._mapCommsAction,data:{partnerId:this._partnerId,brandId:this._brandId,marketId:this._marketId},success:this._onCommPoiSuccess.bind(this)});else $jq.ajax({url:this._mapCommsAction,data:{searchParameters:NHS.Scripts.Helper.JSON.toString(a),minLat:this._mqMinLat,minLng:this._mqMinLng,maxLat:this._mqMaxLat,maxLng:this._mqMaxLng,maxResults:b},success:this._onCommPoiSuccess.bind(this)})},_getMarketMapPois:function(){if(this._isBuilderMap)$jq.ajax({url:this._mapMarketsAction,data:{partnerId:this._partnerId,brandId:this._brandId,minLat:this._mqMinLat,minLng:this._mqMinLng,maxLat:this._mqMaxLat,maxLng:this._mqMaxLng},success:this._onMarketPoiSuccess.bind(this)});else $jq.ajax({url:this._mapMarketsAction,data:{partnerId:this._partnerId,minLat:this._mqMinLat,minLng:this._mqMinLng,maxLat:this._mqMaxLat,maxLng:this._mqMaxLng},success:this._onMarketPoiSuccess.bind(this)})},_getStateMapPois:function(){$jq.ajax({url:this._mapStatesAction,data:{partnerId:this._partnerId,minLat:this._mqMinLat,minLng:this._mqMinLng,maxLat:this._mqMaxLat,maxLng:this._mqMaxLng},success:this._onStatePoiSuccess.bind(this)})},_onMarketPoiSuccess:function(a){var e=new MQA.ShapeCollection;a=eval(a);for(i=0;i<a.length;i++){var h=a[i].Id,f=a[i].Lat,g=a[i].Lng,d=a[i].Title,n=a[i].Content,c='<div class="nhs_CommResHoverMarket">';if(this._isBuilderMap){var j=this._siteRoot+this._communityResultsPage+"/market-"+h+"/brandid-"+this._brandId,m=d.substring(0,d.indexOf("(")).replace("<strong>",""),l=d.substring(d.indexOf("(")).replace("</strong>","");c+='<h2><a href="'+j+'" >'+m+"</a></h2> <p>by "+this._brandName+"</p> <p>"+l+"</p>";c+="</div>"}else{c+='<a href="javascript:void(0);" onclick="if(typeof commResults != \'undefined\') commResults.get_map().zoomToLatLng('+f+","+g+',7);">View Communities in '+n+"</a>";c+="</div>"}var k=new MQA.LatLng(f,g),b=new MQA.Poi(k,this._nhsMapIconMkt);b.setValue("iconOffset",this._mqIconMktOffset);b.setValue("shadow",this._nhsMapIconShadow);b.setValue("infoTitleHTML","<strong>"+d+"</strong>");b.setValue("infoContentHTML",c);b.setValue("key",h);e.add(b)}this._renderPoiCollection(e);this._hideMapStatus()},_onStatePoiSuccess:function(a){var e=new MQA.ShapeCollection;a=eval(a);for(i=0;i<a.length;i++){var f=a[i].Lat,g=a[i].Lng,d=a[i].StateName,h=a[i].TotalCommunities,c='<div class="nhsCommResHoverState">';c+='<a href="javascript:void(0);" onclick="if(typeof commResults != \'undefined\') commResults.get_map().zoomToLatLng('+f+","+g+',4);">View Markets in '+d+"</a>";c+="</div>";var j=new MQA.LatLng(f,g),b=new MQA.Poi(j,this._nhsMapIconMkt);b.setValue("iconOffset",this._mqIconMktOffset);b.setValue("shadow",this._nhsMapIconShadow);b.setValue("infoTitleHTML","<strong>"+d+" ("+h+" communities)</strong>");b.setValue("infoContentHTML",c);b.setValue("key",d);e.add(b)}this._renderPoiCollection(e);this._hideMapStatus();typeof this._commResults!="undefined"&&this._commResults.hideProgressIndicator()},_onCommPoiSuccess:function(b){if(this._viewOnMapLinkScript==""){var a=this._buildCommPois(b),c=(eval(b))[0];c>this._maxResults&&this._displayMapMaxResultsMsg(a.getSize());this._renderPoiCollection(a);typeof this._commResults!="undefined"&&this._commResults.hideProgressIndicator()}else this._viewOnMapLinkScript="";this._hideMapStatus()},_buildCommPois:function(f){var G=new MQA.ShapeCollection;f=eval(f);var t=[],l=[].concat(f),r=f.length-1;for(i=r-1;i>0;i--){var q=f[i].split(";"),g=q[0],o=q[1],x=q[13],y=q[14],u="",U=1,K=l.length;for(j=K-1;j>=0;j--){var p=l[j].split(";"),db=p[0],cb=p[1],ab=p[13],bb=p[14];if(ab==x&&bb==y){U++;u+=l[j];l.splice(j,1)}}l.splice(i,1);u!=""&&t.push(u)}t.reverse();f=t;r=f.length;for(i=0;i<r;i++){var a=f[i].split(";"),s=a.length;if(s==19)var g=a[0],o=a[1],n=a[2],w=a[3],A=a[4],z=a[5],e=a[6],W=a[7],k=a[8],I=a[9],Y=a[10],Z=a[11],v=a[12],x=a[13],y=a[14],H=a[15],d=a[16]=="True",h=a[17]=="True",X=false,V=false,F=this._createCommPoi(g,o,n,w,A,z,e,W,k,I,Y,Z,v,x,y,H,X,V,d,h);else if(s>19){var m=(s-1)/18,J="mkey",b=[];b.push('<div class="nhs_MultiHoverBox">');var d=false,h=false,B=0,C=0;for(j=0;j<m;j++){var c=18*j,g=a[0+c],o=a[1+c],n=a[2+c],w=a[3+c],A=a[4+c],z=a[5+c],e=a[6+c],W=a[7+c],k=a[8+c],I=a[9+c],Y=a[10+c],Z=a[11+c],v=a[12+c],x=a[13+c],y=a[14+c],H=a[15+c],d=a[16+c]=="True",h=a[17+c]=="True";if(d)B++;if(h)C++;J+="_"+g+o;b.push('<div class="nhs_MultiHoverRow">');if(e=="N"||e=="n"||e=="")if(d||h)e=this._resourceRoot+"globalresourcesmvc/default/images/nophoto_75x58.png";else e=this._resourceRoot+"globalresourcesmvc/default/images/nophoto_sm.png";else e=this._resourceRoot.substring(0,this._resourceRoot.length-1)+e;var Q=this._siteRoot+this._basicListingPage+"/"+g+"/"+(n+"-"+w+"-"+A+"-"+z).replace(" ","-").trim(),O=this._siteRoot+this._basicCommPage+"/community"+g+"/"+(n+"-"+w+"-"+A+"-"+z).replace(" ","-").trim(),S=this._siteRoot+this._communityPage+"/community-"+g+"/builder-"+o,N=this._resourceRoot+"GlobalResourcesMvc/Default/images/icons/icon2_coming_soon_overlay.png",E=d?Q:h?O:S,L=d?"CRBLMD":"bcMapDetailBtn",P=" onclick=\"if(typeof commResults != 'undefined') commResults.get_map().get_log().logBasicListingAndRedirect(event,'"+E+"', '"+L+"',"+g+'); return false;">',R=" onclick=\"if(typeof commResults != 'undefined') commResults.get_map().get_log().logAndRedirect(event,'"+E+"/logevent-HOVNAME', 'HOVNAME', "+g+","+o+'); return false;">',D=d||h?P:R;b.push('<div class="nhs_ResultsThumb"><a ');b.push(D);b.push('<img src="');b.push(e);b.push('" alt="');b.push(n);b.push('" />');b.push("</a>");v=="comingsoon"&&b.push('<img src="'+N+'" class="nhs_ResultThumbComingSoonImg" alt="Coming Soon"/>');b.push("</div>");b.push("<h3><a ");b.push(D);b.push(n);b.push("</a></h3>");if(!d&&!h){b.push('<p class="nhs_ResultsBuilder">by ');b.push(I);b.push("</p>")}if(k!="$ - $"&&k!="$2,147,483,647 - $"){b.push('<p class="nhs_ResultsPrice">'+(!d?"from ":""));if(d)b.push(k.substring(0,k.indexOf(" - ")));else b.push(k);b.push("</p>")}if(!d&&!h&&!this._isBuilderMap&&v!="comingsoon"){var T=this._freeBrochureLink.replace("-text-","Free brochure").replace("-commid-",g).replace("-builderid-",o).replace("-marketid-",H).replace("-logEvent-","HOVFBROCH");b.push("<p>"+T+"</p>")}b.push('<br style="clear: both;" />');b.push("</div>")}if(m>2)b.push("</div></div>");else b.push("</div>");d=B==m||C==m;var M=b.join("");F=this._createMultiCommPoi(m,J,M,x,y,d)}G.add(F)}return G},_createCommPoi:function(e,h,g,l,n,m,c,F,f,z,H,I,k,A,B,y,G,E,b,d){var K="",J="",C=false,D=this._nhsMqMap.getZoomLevel(),q=this._resourceRoot+"GlobalResourcesMvc/Default/images/icons/icon2_coming_soon_overlay.png";if(c=="N"||c=="n"||c=="")if(b||d)c=this._resourceRoot+"globalresourcesmvc/default/images/nophoto_75x58.png";else c=this._resourceRoot+"globalresourcesmvc/default/images/nophoto_sm.png";else c=this._resourceRoot.substring(0,this._resourceRoot.length-1)+c;var a=[],u=this._siteRoot+this._basicListingPage+"/"+e+"/"+(g+"-"+l+"-"+n+"-"+m).replace(" ","-").trim(),s=this._siteRoot+this._basicCommPage+"/community-"+e+"/"+(g+"-"+l+"-"+n+"-"+m).replace(" ","-").trim(),w=this._siteRoot+this._communityPage+"/community-"+e+"/builder-"+h,j=b?u:d?s:w,o=b?"CRBLMD":"bcMapDetailBtn",t=" onclick=\"if(typeof commResults != 'undefined') commResults.get_map().get_log().logBasicListingAndRedirect(event,'"+j+"', '"+o+"',"+e+'); return false;">',v=" onclick=\"if(typeof commResults != 'undefined') commResults.get_map().get_log().logAndRedirect(event,'"+j+"/logevent-HOVNAME', 'HOVNAME', "+e+","+h+'); return false;">',i=b||d?t:v;if(b||d)a.push('<div class="nhs_CommResHoverBox nhs_BasicHoverBox">');else a.push('<div class="nhs_CommResHoverBox">');a.push('<div class="nhs_ResultsThumb"><a ');a.push(i);a.push('<img src="'+c);a.push('" alt="');a.push(g);a.push('" /></a>');k=="comingsoon"&&a.push('<img src="'+q+'" class="nhs_ResultThumbComingSoonImg" alt="Coming Soon"/>');a.push("</div>");a.push("<h3><a ");a.push(i);a.push(g);a.push("</a></h3>");if(!b&&!d){a.push('<p class="nhs_ResultsBuilder">by ');a.push(z);a.push("</p>")}if(f!="$ - $"&&f!=""&&f!="$2,147,483,647 - $"){a.push('<p class="nhs_ResultsPrice">'+(!b?"from ":""));if(b)a.push(f.substring(0,f.indexOf(" - ")));else a.push(f);a.push("</p>")}a.push('<p class="nhs_ResultsLink"><a ');a.push(i);a.push((b?"View Details":"See new homes, <br />photos and floor plans")+"</a>");a.push("</p>");if(!b&&!d&&!this._isBuilderMap&&k!="comingsoon"){var x=this._freeBrochureLink.replace("-text-","Free brochure").replace("-commid-",e).replace("-builderid-",h).replace("-marketid-",y).replace("-logEvent-","HOVFBROCH");a.push("<p>"+x+"</p>")}a.push("</div>");var p=a.join(""),r=new MQA.LatLng(A,B);mqPoint=new MQA.Poi(r,b||d?this._nhsBLMapIcon:this._nhsMapIcon);mqPoint.setValue("iconOffset",this._mqIconOffset);mqPoint.setValue("shadow",this._nhsMapIconShadow);mqPoint.setValue("infoTitleHTML","<strong>"+g+"</strong>");mqPoint.setValue("infoContentHTML",p);mqPoint.setValue("key",e+h);mqPoint.setValue("onclick","alert('onclick')");return mqPoint},_createMultiCommPoi:function(d,e,c,f,g,a){var b=new MQA.LatLng(f,g);mqPoint=new MQA.Poi(b,a?this._nhsBLMapIcon:this._nhsMapIconMult);mqPoint.setValue("iconOffset",a?this._mqIconOffset:this._mqIconMultOffset);mqPoint.setValue("shadow",this._nhsMapIconShadow);mqPoint.setValue("infoTitleHTML","<strong>"+d+" communities</strong>");mqPoint.setValue("infoContentHTML",c);mqPoint.setValue("key",e);return mqPoint},_displayMapTip:function(){$jq("#"+this._mapTipBox).css("left",$jq("#"+this._mapContainerId).width()/2-$jq("#"+this._mapTipBox).width()/2+"px");$jq("#"+this._mapTipBox).show("medium");$jq("#"+this._mapContainerId).mouseenter(function(){$jq("#"+this._mapTipBox).is(":visible")&&$jq("#"+this._mapTipBox).hide("medium")}.bind(this))},_displayMapMaxResultsMsg:function(a){$jq("#"+this._mapMaxResultsMsgId).show("medium");$jq("#"+this._mapMaxResultsMsgId+" p").text($jq("#"+this._mapMaxResultsMsgId+" p").text().replace("[pincount]",a));setTimeout(function(){$jq("#"+this._mapMaxResultsMsgId).hide("medium")}.bind(this),4e3)}};NHS.Scripts.Search=function(b,a){this._typeAheadUrl=b;this.alreadyiInitialize=false;a=typeof a==="undefined"?true:a;a&&this.initialize()};NHS.Scripts.Search.prototype={initialize:function(){var a=this;if(a.alreadyiInitialize==false){jQuery("#nhs_GlobalSearchNavSubmit").click(function(){var c=a.showErrorSearchTextMessage,b=jQuery("#nhs_GlobalSearchNavLocation").val();if(!c(b)){b=jQuery.trim(b);if(b.length>0&&b!="Enter Location or Community Name"){jQuery.googlepush("Search Events","Search Action","Search - NavigationNew");return true}}jQuery("#nhs_field_validation_error").show();jQuery("#nhs_GlobalSearchNavSubmit").removeAttr("disabled");return false});var b=jQuery("#nhs_GlobalSearchNavLocation");a.validateSearchBox(b.closest("form"),jQuery("span.field-validation-error"),b,false);this.setupSearchBox("nhs_GlobalSearchNavLocation","SearchType",false);SetTextBoxesDescriptions();a.alreadyiInitialize=true}},testValidation:function(d){var g=this,b=[["",true,"NOK"],[" ",true,"NOK"],[" , ",true,"NOK"],["123",true,"NOK"],["12345",false,"NOK"],["123456",true,"NOK"],["123,",true,"NOK"],["12345,",true,"NOK"],["123456,",true,"NOK"],["test",false,"NOK"],["test test",false,"NOK"],["test,",true,"NOK"],["test test,",true,"NOK"],["test 23",false,"NOK"],["test 123",false,"NOK"],["test 1234",false,"NOK"],["test 23,",true,"NOK"],["test 123,",true,"NOK"],["test 1234,",true,"NOK"],["g 5 q a,r",true,"NOK"],["g 5 q a, r",true,"NOK"],["g 5 q a, 1",true,"NOK"],["test 23,tx",false,"NOK"],["test 123,fx",false,"NOK"],["test 1234, zd",false,"NOK"],["test 23,tx Area",false,"NOK"],["test 123,fx Area",false,"NOK"],["test 1234, zd Area",false,"NOK"],[",",true,"NOK"],[",t",true,"NOK"],[",tx",true,"NOK"],[", t",true,"NOK"],[", t x",true,"NOK"],[",  tx",true,"NOK"],["  ,  tx",true,"NOK"],[",tx Area",true,"NOK"],["0,tx Area",false,"NOK"]];console.log(b);if(typeof d!="undefined")for(index in d)b.push(d[index]);for(index in b){var a=String(b[index][0]),f=g.showErrorSearchTextMessage(a)==Boolean(b[index][1]);if(f==false){console.info("\n ============ + ERROR + =================");console.info("ERROR :: "+a+" ["+index+"] :: "+String(g.showErrorSearchTextMessage(a))+" == "+String(b[index][1])+" => "+String(f));if(typeof a=="undefined"||a=="")console.info("num #1 :: "+String(true));else if(a.indexOf(",")==-1&&!isNaN(a)&&(new RegExp(/(?:^|[^\d])(\d{5})(?:$|[^\d])/mg)).test(a)==false)console.info("num #2 :: "+String(true));else if(a.split(",").length>1&&(a.split(",")[0].trim()===""||a.split(",")[1].trim()===""||a.split(",")[1].trim().length<2))console.info("num #3 :: "+String(true));else a.indexOf(",")==-1&&(new RegExp("[a-zA-Z0-9 ]+$")).test(a)==false&&console.info("num #4 :: "+String(true));console.info("=================================== \n")}else b[index][2]="OK"}var c="The test is 100% OK!",e=true;for(index in b)if(b[index][2]=="NOK"){c="TEST FAIL!";e=false;break}console.info("\n ************************");if(e)console.info(c);else console.error(c);console.info("************************ \n")},showErrorSearchTextMessage:function(c){var a=String(c).trim(),b=false;if(typeof a=="undefined"||a=="")b=true;else if(a.indexOf(",")==-1&&!isNaN(a)&&(new RegExp(/(?:^|[^\d])(\d{5})(?:$|[^\d])/mg)).test(a)==false)b=true;else if(a.split(",").length>1&&(a.split(",")[0].trim()===""||a.split(",")[1].trim()===""||a.split(",")[1].trim().length<2))b=true;else if(a.indexOf(",")==-1&&(new RegExp("[a-zA-Z0-9 ]+$")).test(a)==false)b=true;return b},validateSearchFormFromInputText:function(b,a){var c=this;a=typeof a==="undefined"?false:a;c.validateSearchBox(b.closest("form"),b.closest("form").find(".field-validation-error"),b,a)},validateSearchBox:function(a,c,b,d){var e=this;jQuery(a).on("submit",function(g){var f=jQuery(b).val().trim(),a=e;if(a.showErrorSearchTextMessage(f)){jQuery.NhsCancelEvent(g);if(d)alert("Enter a valid text to search");else jQuery(c).show();return false}return true})},setupSearchBox:function(b,e,c){var d=this;c=typeof c==="undefined"?false:c;jQuery("#"+b).keypress(function(){jQuery(".field-validation-error").hide()});var a=jQuery("#"+b);if(a!==null&&a.length>0){d.validateSearchBox(a.closest("form"),a.closest("form").find(".field-validation-error"),a,c);a.autocomplete({source:this._typeAheadUrl,select:function(g,a){g.preventDefault();var c=a.item.value.substring(a.item.value.indexOf("|")+1),f=a.item.value.substring(0,a.item.value.indexOf("|"));jQuery("#"+e).val(c);jQuery("#"+b).val(f);jQuery.isFunction(d.AutoCompleteSelect)&&d.AutoCompleteSelect(c,f)},focus:function(a){a.preventDefault()}}).data("ui-autocomplete")._renderItem=function(b,a){a.label=a.value.substring(0,a.value.indexOf("|"));a.label=a.label.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+$jq.ui.autocomplete.escapeRegex(this.term.trim())+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong id='ui-id'>$1</strong>");if(a.label.indexOf(" in ")!=-1)a.label=a.label.substring(0,a.label.indexOf(" in "))+"<span id='ui-id'> in "+a.label.substring(a.label.indexOf(" in ")+4)+"</span>";return jQuery("<li></li>").data("item.autocomplete",a).append("<a>"+a.label+"</a>").appendTo(b)};a.autocomplete().data("ui-autocomplete").menu.element.detach().appendTo(jQuery("#"+b).parent())}}};var BCMAPI=new function(){this.token="";this.callback="BCMAPI.flush";this.url="http://api.brightcove.com/services/library";this.calls=[{command:"find_all_videos",def:false},{command:"find_video_by_id",def:"video_id"},{command:"find_video_by_id_unfiltered",def:"video_id"},{command:"find_videos_by_ids",def:"video_ids"},{command:"find_videos_by_ids_unfiltered",def:"video_ids"},{command:"find_video_by_reference_id",def:"reference_id"},{command:"find_video_by_reference_id_unfiltered",def:"reference_id"},{command:"find_videos_by_reference_ids",def:"reference_ids"},{command:"find_videos_by_reference_ids_unfiltered",def:"reference_ids"},{command:"find_videos_by_campaign_id",def:"campaign_id"},{command:"find_videos_by_tags",def:"or_tags"},{command:"find_videos_by_text",def:"text"},{command:"find_videos_by_user_id",def:"user_id"},{command:"find_modified_videos",def:"from_date"},{command:"find_related_videos",def:"video_id"},{command:"find_all_playlists",def:false},{command:"find_playlist_by_id",def:"playlist_id"},{command:"find_playlists_by_ids",def:"playlist_ids"},{command:"find_playlist_by_reference_id",def:"reference_id"},{command:"find_playlists_by_reference_ids",def:"reference_ids"},{command:"find_playlists_for_player_id",def:"player_id"},{command:"search_videos",def:"all"}];this.inject=function(b){var a=document.createElement("script");a.setAttribute("src",this.url+"?"+b);a.setAttribute("type","text/javascript");document.getElementsByTagName("head")[0].appendChild(a);return true};this.find=function(c,a){c=c.toLowerCase().replace(/(find_)|(_)|(get_)/g,"");a=a||null;var f=null,b="";for(var d in this.calls){if(typeof this.calls[d].command=="undefined")continue;if(c==this.calls[d].command.toLowerCase().replace(/(find_)|(_)|(get_)/g,"")){c=this.calls[d].command;if(typeof this.calls[d].def!="undefined")f=this.calls[d].def;break}}b="command="+c;if(typeof a=="object"&&a){for(var e in a)if(e=="selector")b+="&"+f+"="+encodeURIComponent(a[e]);else b+="&"+e+"="+encodeURIComponent(a[e]);if(typeof a.callback!="string")b+="&callback="+this.callback;if(typeof a.token!="string")b+="&token="+this.token}else if(a){b+="&"+f+"="+encodeURIComponent(a)+"&callback="+this.callback;b+="&token="+this.token}else{b+="&token="+this.token;b+="&callback="+this.callback}this.inject(b);return true};this.search=function(a){return this.find("search_videos",a)};this.flush=function(){return true}};(function(a){a.fn.slides=function(b){b=a.extend({},a.fn.slides.option,b);return this.each(function(){a("."+b.container,a(this)).children().wrapAll('<div class="slides_control"/>');var d=a(this),c=a(".slides_control",d),p=c.children().size(),h=c.children().outerWidth(),x=c.children().outerHeight(),g=b.start-1,k=b.effect.indexOf(",")<0?b.effect:b.effect.replace(" ","").split(",")[0],u=b.effect.indexOf(",")<0?k:b.effect.replace(" ","").split(",")[1],e=0,j=0,m=0,f=0,s,l,o,q,z,t,v,r;if(p<2){a("."+b.container,a(this)).fadeIn(b.fadeSpeed,b.fadeEasing,function(){s=true;b.slidesLoaded()});a("."+b.next+", ."+b.prev).fadeOut(0);return false}function i(g,k,i){if(!l&&s){l=true;switch(g){case "next":j=f;e=f+1;e=p===e?0:e;q=h*2;g=-h*2;f=e;break;case "prev":j=f;e=f-1;e=e===-1?p-1:e;q=0;g=0;f=e;break;case "pagination":e=parseInt(i,10);j=a("."+b.paginationClass+" li."+b.currentClass+" a",d).attr("href").match("[^#/]+$");if(e>j){q=h*2;g=-h*2}else{q=0;g=0}f=e}b.animationStart(f);if(k==="fade")if(b.crossfade)c.children(":eq("+e+")",d).css({zIndex:10}).fadeIn(b.fadeSpeed,b.fadeEasing,function(){if(b.autoHeight)c.animate({height:c.children(":eq("+e+")",d).outerHeight()},b.autoHeightSpeed,function(){c.children(":eq("+j+")",d).css({display:"none",zIndex:0});c.children(":eq("+e+")",d).css({zIndex:0});b.animationComplete(e+1);l=false});else{c.children(":eq("+j+")",d).css({display:"none",zIndex:0});c.children(":eq("+e+")",d).css({zIndex:0});b.animationComplete(e+1);l=false}});else c.children(":eq("+j+")",d).fadeOut(b.fadeSpeed,b.fadeEasing,function(){if(b.autoHeight)c.animate({height:c.children(":eq("+e+")",d).outerHeight()},b.autoHeightSpeed,function(){c.children(":eq("+e+")",d).fadeIn(b.fadeSpeed,b.fadeEasing)});else c.children(":eq("+e+")",d).fadeIn(b.fadeSpeed,b.fadeEasing,function(){a.browser.msie&&a(this).get(0).style.removeAttribute("filter")});b.animationComplete(e+1);l=false});else{c.children(":eq("+e+")").css({left:q,display:"block"});if(b.autoHeight)c.animate({left:g,height:c.children(":eq("+e+")").outerHeight()},b.slideSpeed,b.slideEasing,function(){c.css({left:-h});c.children(":eq("+e+")").css({left:h,zIndex:5});c.children(":eq("+j+")").css({left:h,display:"none",zIndex:0});b.animationComplete(e+1);l=false});else c.animate({left:g},b.slideSpeed,b.slideEasing,function(){c.css({left:-h});c.children(":eq("+e+")").css({left:h,zIndex:5});c.children(":eq("+j+")").css({left:h,display:"none",zIndex:0});b.animationComplete(e+1);l=false})}if(b.pagination){a("."+b.paginationClass+" li."+b.currentClass,d).removeClass(b.currentClass);a("."+b.paginationClass+" li:eq("+e+")",d).addClass(b.currentClass);a("#slides_count > span").html(f+1)}}}function w(){clearInterval(d.data("interval"))}function n(){if(b.pause){clearTimeout(d.data("pause"));clearInterval(d.data("interval"));v=setTimeout(function(){clearTimeout(d.data("pause"));r=setInterval(function(){i("next",k)},b.play);d.data("interval",r)},b.pause);d.data("pause",v)}else w()}if(p<2)return;if(g<0)g=0;if(g>p)g=p-1;if(b.start)f=g;b.randomize&&c.randomize();a("."+b.container,d).css({overflow:"hidden",position:"relative"});c.children().css({position:"absolute",top:0,left:c.children().outerWidth(),zIndex:0,display:"none"});c.css({position:"relative",width:h*3,height:x,left:-h});a("."+b.container,d).css({display:"block"});if(b.autoHeight){c.children().css({height:"auto"});c.animate({height:c.children(":eq("+g+")").outerHeight()},b.autoHeightSpeed)}if(b.preload&&c.find("img:eq("+g+")").length){a("."+b.container,d).css({background:"url("+b.preloadImage+") no-repeat 50% 50%"});var y=c.find("img:eq("+g+")").attr("src")+"?"+(new Date).getTime();if(a("img",d).parent().attr("class")!="slides_control")t=c.children(":eq(0)")[0].tagName.toLowerCase();else t=c.find("img:eq("+g+")");c.find("img:eq("+g+")").attr("src",y).load(function(){c.find(t+":eq("+g+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){a(this).css({zIndex:5});a("."+b.container,d).css({background:""});s=true;b.slidesLoaded()})})}else c.children(":eq("+g+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){s=true;b.slidesLoaded()});if(b.bigTarget){c.children().css({cursor:"pointer"});c.children().click(function(){i("next",k);return false})}if(b.hoverPause&&b.play){c.bind("mouseover",function(){w()});c.bind("mouseleave",function(){n()})}if(b.generateNextPrev){a("."+b.container,d).after('<a href="#" class="'+b.prev+'">Prev</a>');a("."+b.prev,d).after('<a href="#" class="'+b.next+'">Next</a>')}if(b.bigNextPrev){a("."+b.container,d).after('<a href="#" class="big'+b.prev+'">Prev</a>');a(".big"+b.prev,d).after('<a href="#" class="big'+b.next+'">Next</a>')}a("."+b.next,d).click(function(a){a.preventDefault();b.play&&n();i("next",k)});a("."+b.prev,d).click(function(a){a.preventDefault();b.play&&n();i("prev",k)});a(".big"+b.next,d).click(function(a){a.preventDefault();b.play&&n();i("next",k)});a(".big"+b.prev,d).click(function(a){a.preventDefault();b.play&&n();i("prev",k)});if(b.generateCount){c.children().each(function(){m++});d.prepend('<p id="slides_count"><span></span> of '+m+"</p>")}a("#slides_count > span").html(f+1);if(b.generatePagination){if(b.prependPagination)d.prepend("<ul class="+b.paginationClass+"></ul>");else d.append("<ul class="+b.paginationClass+"></ul>");c.children().each(function(){a("."+b.paginationClass,d).append('<li><a href="#'+m+'">'+(m+1)+"</a></li>");m++})}else a("."+b.paginationClass+" li a",d).each(function(){a(this).attr("href","#"+m);m++});a("."+b.paginationClass+" li:eq("+g+")",d).addClass(b.currentClass);a("."+b.paginationClass+" li a",d).click(function(){b.play&&n();o=a(this).attr("href").match("[^#/]+$");f!=o&&i("pagination",u,o);return false});a("a.link",d).click(function(){b.play&&n();o=a(this).attr("href").match("[^#/]+$")-1;f!=o&&i("pagination",u,o);return false});if(b.play){r=setInterval(function(){i("next",k)},b.play);d.data("interval",r)}})};a.fn.slides.option={preload:false,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:false,next:"next",prev:"prev",pagination:true,generatePagination:true,prependPagination:false,paginationClass:"pagination",currentClass:"current",generateCount:false,fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:false,randomize:false,play:0,pause:0,hoverPause:false,autoHeight:false,autoHeightSpeed:350,bigTarget:false,bigNextPrev:false,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}};a.fn.randomize=function(b){function c(){return Math.round(Math.random())-.5}return a(this).each(function(){var g=a(this),e=g.children(),f=e.length;if(f>1){e.hide();var d=[];for(i=0;i<f;i++)d[d.length]=i;d=d.sort(c);a.each(d,function(f,d){var a=e.eq(d),c=a.clone(true);c.show().appendTo(g);b!==undefined&&b(a,c);a.remove()})}})}})(jQuery);var _callAddThis=true,_commIdHD=0,_builderIdHD=0,_marketIdCR=0;NHS.Scripts.Globals.EventLogger=function(a){this._siteRoot=a.siteRoot;this._partnerId=a.partnerID;this._marketId=a.marketId;this._fromPage=a.fromPage;this._communityId=a.communityId;this._builderId=a.builderId;this._planId=a.planId;this._specId=a.specId;this._homeSearchViewMetricDisplayed=a.homeSearchViewMetricDisplayed;this._homeSearchViewMetricHidden=a.homeSearchViewMetricHidden};NHS.Scripts.Globals.EventLogger.prototype={logListHubEvent:function(a,d,c,b){try{var f=new ListHubTracker({provider:a,test:d});f.submit(c,b)}catch(e){}},logAndRedirect:function(i,h,a,d,c,f,g,e,b){this._marketId=e;this.logEvent(a,d,c,f,g);this._redirect(i,h,b);return false},logFeaturedListingAndRedirect:function(i,h,b,e,g,f,a,c){this._marketId=a;var d={featuredlistingId:e,communityId:g,builderId:f,marketId:a};this.logEventWithParameters(b,d);this._redirect(i,h,c);return false},logBasicListingAndRedirect:function(d,c,a,b){this.logBasicListingEvent(a,b);this._redirect(d,c);return false},logEventWithParameters:function(a,c){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logViewWithParameters(b,a,c)}},logEvent:function(a,d,c){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,d,c,0,0,0)}},logBasicListingEvent:function(a,c){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,0,0,0,0,c)}},logEvent:function(a,d,c,e,f){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,d,c,e,f,0)}},setAllowAddThis:function(){_callAddThis=false;setTimeout(function(){_callAddThis=true},2e3)},logMultiEvent:function(a,c,d,e,f){if(a){var b=this._siteRoot+"eventlogger/logevent-"+a;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logView(b,a,c,d,e,f,0)}},logHomeResultsMetrics:function(c,d){if(c){var a;if(d==1)a=this._homeSearchViewMetricDisplayed;else a=this._homeSearchViewMetricHidden;var b=this._siteRoot+"eventlogger/logevent-"+c;if(this._siteRoot.substring(this._siteRoot.length-1)!="/")b="/"+b;this._logMetrics(b,a)}},attachEventsToAddThis:function(){var a=this;typeof addthis!="undefined"&&addthis.addEventListener("addthis.menu.share",function(e){if(_callAddThis){var d=e.data.service.toString().toLowerCase(),b="MHSMS",c=a._planId>0||a._specId>0;if(d.indexOf("favorites")==-1&&d.indexOf("print")==-1&&d.indexOf("email")==-1){if(a._planId==0&&a._specId==0&&a._communityId==0)b="MHSMS";else{c=a._planId>0||a._specId>0;b=c?"HDSMS":"CDSMS"}a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId)}else if(d.indexOf("email")>-1){c=a._planId>0||a._specId>0;b=c?"HOMSTF":"COMSTF";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()}else if(d.indexOf("print")>-1){c=a._planId>0||a._specId>0;b=c?"HOMPR":"COMPR";if($jq(this).hasClass("nextStepsPrint"))b=c?"HDNSPRN":"CDNSPRN";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()}}});$jq(".addthis_button_email").click(function(){var c=a._planId>0||a._specId>0,b=c?"HOMSTF":"COMSTF";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()});$jq(".addthis_button_print").click(function(){var c=a._planId>0||a._specId>0,b=c?"HOMPR":"COMPR";if($jq(this).hasClass("nextStepsPrint"))b=c?"HDNSPRN":"CDNSPRN";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()});$jq("#btn_fb_mh").click(function(){var b="MHSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()});$jq("#btn_tw_mh").click(function(){var b="MHSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()})},attachEventsToDetails:function(){var a=this;try{FB.Event.subscribe("edge.create",function(){var c=a._planId>0||a._specId>0,b=c?"HDSMS":"CDSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis()})}catch(b){}$jq("#btn_fb_bottom").click(function(){var c=a._planId>0||a._specId>0,b=c?"HDSMS":"CDSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis();jQuery.SetDataLayerPair("siteSocialMediaS")});$jq("#btn_tw_bottom").click(function(){var c=a._planId>0||a._specId>0,b=c?"HDSMS":"CDSMS";a.logMultiEvent(b,a._communityId,a._builderId,a._planId,a._specId);a.setAllowAddThis();jQuery.SetDataLayerPair("siteSocialMediaS")})},_redirect:function(a,b,c){if(!a)var a=window.event;try{a.cancelBubble=true}catch(d){}a.stopPropagation&&a.stopPropagation();if(b)if(c)window.open(b);else setTimeout(function(){window.location.href=b},500)},_logViewWithParameters:function(a,e,b){var d=a;if(this._fromPage=="communityresults"){d=a;if(this._siteRoot=="/")d="/NewHomeSource"+a}if(b.builderId)a=a+"/builder-"+b.builderId;if(b.communityId)a=a+"/community-"+b.communityId;if(b.communityList)a=a+"/communitylist-"+b.communityList;if(b.marketId)a=a+"/market-"+b.marketId;if(b.planId)a=a+"/planid-"+b.planId;if(b.specId)a=a+"/specid-"+b.specId;if(b.basiclistingId)a=a+"/basiclistingid-"+b.basiclistingId;if(b.featuredlistingId)a=a+"/featuredlistingid-"+b.featuredlistingId;if(b.refer)a=a+"/refer-"+b.refer;if(b.totalHomes)a=a+"/totalhomes-"+b.totalHomes;if(b.builderCommunityList)a=a+"?buildercommunitylist="+b.builderCommunityList;if(b.basicListingList)a=a+"?basiclistinglist="+b.basicListingList;if(b.homeList)a=a+"?homeList="+b.homeList;if(b.featuredListingList)a=a+"?featuredlistinglist="+b.featuredListingList;var c=true;if(typeof b.async!="undefined")c=b.async;$jq.ajax({type:"Post",url:a,async:c})},_logView:function(a,j,c,b,f,g,i){if(a.indexOf("http://")<0)a=a.replace(" ","").replace("//","/");var d=this._fromPage,h=a,e=f>0||g>0;if(c==0&&e)c=_commIdHD;if(b==0&&e)b=_builderIdHD;if(this._fromPage=="communityresults"){h=a;d=this._siteRoot+"communityresults";if(this._siteRoot=="/"){h="/NewHomeSource"+a;d="/NewHomeSource/communityresults"}}if(i==0)a=a+"/builder-"+b+"/community-"+c+"/planid-"+f+"/specid-"+g+"/market-"+this._marketId;else a=a+"/basiclisting-"+i+"/market-"+this._marketId;$jq.ajax({type:"Post",url:a,async:true})},_logMetrics:function(c,a){var b={logsInChains:a};$jq.ajax({type:"POST",url:"http://"+location.host+"/metricseventlogger/",data:b,dataType:"json"})}};if(typeof NHS=="undefined"){NHS={};NHS.Scripts={}}NHS.Scripts.Facebook=function(a){this._parameters=a};var redirect=null;NHS.Scripts.Facebook.prototype={initialize:function(){var a=this;jQuery.getScript("//connect.facebook.net/en_US/all.js",function(){jQuery("#fbLoginButton").click(function(){jQuery.googlepush("Account Events","Access Account","Sign In - Create Account - Facebook")});redirect=jQuery("#FromPage").val();if(a._parameters.redirect)redirect=a._parameters.redirect;jQuery.InitFacebookControls(a._parameters.appId);jQuery("#fbLoginButton").click(function(b){jQuery.NhsCancelEventAndStopPropagation(b);FB.login(a.statusChange,{scope:"email"});return false});jQuery("#lnkSignOff,.lnkSignOff").click(function(){FB.logout()})})},statusChange:function(a){a.status==="connected"&&FB.api("/me",function(a){var b={Email:a.email,Id:a.id,FirstName:a.first_name,LastName:a.last_name,MiddleName:a.middle_name,Name:a.name};jQuery.ajax({type:"POST",url:"/Facebook/FacebookLogin",data:b,success:function(b){if(b){typeof _gaq!="undefined"&&_gaq.push(["_setCustomVar",1,"User","{facebook:"+a.id+"}",2]);setTimeout(function(){if(redirect)location.href=redirect;else location.reload()},100)}}})})}};jQuery.extend({CheckLoginState:function(){FB.getLoginStatus(function(b){var a=new NHS.Scripts.Facebook;a.statusChange(b)})},InitFacebookControls:function(a){FB.init({appId:a,status:true,cookie:true,xfbml:true,oauth:true,version:"v2.0"})}});if(typeof NHS=="undefined"){NHS={};NHS.Scripts={}}NHS.Scripts.GoogleMapApi=function(b){var a={};jQuery.extend(true,a,this.defaultOptios);this.options=jQuery.extend(true,a,b);this.markersArray=[];this.infowindow=new google.maps.InfoWindow(this.options.InfoWindowOptions);this.infowindowTooltip=new google.maps.InfoWindow(this.options.InfoWindowOptions);this.map=null;this.bounds=new google.maps.LatLngBounds;this.isMapCreate=false};NHS.Scripts.GoogleMapApi.prototype={defaultOptios:{MapOptions:{Latitude:null,Longitude:null,Zoom:8,ContainerName:"map-canvas",zoomControl:true,ZoomControlStyle:"LARGE",zoomControlPosition:null,disableDefaultUI:false,Draggable:true,Scrollwheel:true,DisableDoubleClickZoom:false,panControl:false,overviewControl:false,streetViewControl:false},CreateMapWrap:true,DirectionsDisplayPanel:null,MarkerPointOptions:{optimized:true},Loader:"",MinZoom:3,MaxZoom:null,MarkerClustererOptions:{gridSize:50,maxZoom:15,cssName:null,imagePath:null,zoomOnClick:true,minimumClusterSize:null},UseClusterer:false,InfoWindowOptions:{disableAutoPan:false},MarkerPointAsynOptions:{Listener:"idle",UrlServer:null},ProcessResultOptions:{Latitude:"",Longitude:"",Name:""},Events:{OnMapCreate:null,OnMarkersCreate:null,OnMarkersRemove:function(){},OnGetMarkerPointAsyn:function(){},MarkerClickCallBack:null,IdleCallBack:null,MarkerMouseOverCallBack:null,MarkerMouseOutCallBack:null,ZoomChangesCallBack:null,DragChangesCallBack:null,ClickCallBack:null,InfowindowTooltipReadyCallBack:null,InfowindowReadyCallBack:null,tInfowindowOffsetCallBack:null},Autocomplete:{CreateControl:false,BindToBound:false,Autocompletecontrol:"pac-input"}},createMap:function(){var a=this,b=a.options.MapOptions,d=a.options.MarkerClustererOptions,c={zoom:b.Zoom,center:new google.maps.LatLng(b.Latitude,b.Longitude),zoomControl:b.zoomControl,zoomControlOptions:{style:google.maps.ZoomControlStyle[b.ZoomControlStyle],position:google.maps.ControlPosition[b.zoomControlPosition]},disableDefaultUI:b.disableDefaultUI,draggable:b.Draggable,scrollwheel:b.Scrollwheel,disableDoubleClickZoom:b.DisableDoubleClickZoom,panControl:b.panControl,streetViewControl:b.streetViewControl,overviewMapControl:b.overviewMapControl,maxZoom:a.options.MaxZoom,minZoom:a.options.MinZoom};a.options.CreateMapWrap&&a.createMapWrap();a.map=new google.maps.Map(document.getElementById(b.ContainerName),c);google.maps.Map.prototype.clearOverlays=function(){a.clearOverlays()};jQuery.isFunction(a.options.Events.ClickCallBack)&&google.maps.event.addListener(a.map,"click",function(){a.options.Events.ClickCallBack.call(a)});google.maps.event.addListener(a.map,"dragend",function(){jQuery.isFunction(a.options.Events.DragChangesCallBack)&&a.options.Events.DragChangesCallBack.call(a)});if(window["MarkerClusterer"])a.markerCluster=new MarkerClusterer(a.map,[],d);a.getMarkerPointAsyn();a.CreateOverlay();jQuery.isFunction(a.options.Events.InfowindowTooltipReadyCallBack)&&google.maps.event.addListener(a.infowindowTooltip,"domready",function(){a.options.Events.InfowindowTooltipReadyCallBack.call(a)});jQuery.isFunction(a.options.Events.InfowindowReadyCallBack)&&google.maps.event.addListener(a.infowindow,"domready",function(){a.options.Events.InfowindowReadyCallBack.call(a)});jQuery.isFunction(a.options.Events.ZoomChangesCallBack)&&google.maps.event.addListener(a.map,"zoom_changed",function(){a.options.Events.ZoomChangesCallBack.call(a,a.map.getZoom())});google.maps.event.addListener(a.map,"idle",function(){a.RemoveGoogleInfo();jQuery.isFunction(a.options.Events.IdleCallBack)&&a.options.Events.IdleCallBack.call(a);jQuery.isFunction(a.options.Events.OnMapCreate)&&!a.isMapCreate&&a.options.Events.OnMapCreate();a.isMapCreate=true});google.maps.event.addListenerOnce(a.map,"tilesloaded",a.RemoveGoogleInfo)},createMapWrap:function(){var a=this,b=a.options.MapOptions;jQuery("#"+b.ContainerName).wrap('<div id="nhs_mapwrap" style="position:relative;" />');jQuery("#nhs_mapwrap").append('<div id="nhs_OverlayMap" style="position: absolute;z-index:99999;top: 0px;left: 0px;height:100%;width:100%;background-color: #000;filter: alpha(opacity=35);-moz-opacity: 0.35;opacity: 0.35;"></div>');jQuery("#nhs_mapwrap").append('<div id="nhs_LoadingMap" class="nhs_Loading" style="position:absolute;"><p>Updating</p></div>');a.showLoading()},hideLoading:function(){jQuery("#nhs_LoadingMap, #nhs_OverlayMap").hide();jQuery(".gm-style > div > a").attr("href")&&setTimeout(function(){for(var b=jQuery(".gm-style-cc").length,a=1;a<b;a+=1)jQuery(".gm-style-cc").eq("-1").remove();jQuery(".gm-style > div > a").removeAttr("href").removeAttr("title")},800)},showLoading:function(){jQuery("#nhs_LoadingMap, #nhs_OverlayMap").show()},clearOverlays:function(){for(var a=this,b=0;b<a.markersArray.length;b++)a.markersArray[b].setMap(null);a.markersArray=[];a.bounds=new google.maps.LatLngBounds;a.markerCluster&&a.markerCluster.clearMarkers();a.options.Events.OnMarkersRemove()},getMarkerPointAsyn:function(){var a=this,b=a.options.MarkerPointAsynOptions;if(b.Listener&&b.UrlServer){a.options.Events.OnGetMarkerPointAsyn(b);google.maps.event.addListener(a.map,b.Listener,function(){a.showLoading();var c=a.getBoundsFromMap();a.map.clearOverlays();jQuery.getJSON(b.UrlServer,c,function(b){a.processResult(b)})})}else a.hideLoading()},getBoundsFromMap:function(){var e=this,a=e.map.getBounds(),b=a.getNorthEast(),c=a.getSouthWest(),d={minLat:c.lat(),minLng:c.lng(),maxLat:b.lat(),maxLng:b.lng()};return d},processResult:function(a){var c=this;c.showLoading();var d=c.options.ProcessResultOptions;if(a!==null)for(var b=0;b<a.length;b++){var e=c.getHtmlInfowindow(a,a[b]),f=c.getIconMarkerPoint(a,a[b]),g=c.getNameMarkerPoint(a,a[b]);c.createMarkerPoint(a[b][d.Latitude],a[b][d.Longitude],g,e,f,a[b])}c.hideLoading()},getHtmlInfowindow:function(){return null},getIconMarkerPoint:function(){return null},getNameMarkerPoint:function(d,b){var c=this,a=c.options.ProcessResultOptions;return b[a.Name]},createMarkerPoint:function(g,h,f,c,d,e){var a=this,b=a._createMarkerPoint(g,h,f,c,d,e);if(a.options.UseClusterer==false)b.setMap(a.map);else a.markerCluster&&a.markerCluster.addMarker(b);a.markersArray.push(b)},_createMarkerPoint:function(j,k,i,d,h,c){var a=this,e=new google.maps.LatLng(j,k),f=a.options.MarkerPointOptions,g={position:e,icon:h,title:i,optimized:f.optimized,zIndex:99};a.bounds.extend(e);var b=new google.maps.Marker(g);jQuery.isFunction(a.options.Events.OnMarkersCreate)&&a.options.Events.OnMarkersCreate(c,a.infowindow,b);typeof d=="string"&&google.maps.event.addListener(b,"click",function(){a.infowindow.setContent(d);a.infowindow.open(a.map,b);jQuery.isFunction(a.options.Events.MarkerClickCallBack)&&a.options.Events.MarkerClickCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});typeof d!="string"&&jQuery.isFunction(a.options.Events.MarkerClickCallBack)&&google.maps.event.addListener(b,"click",function(){a.options.Events.MarkerClickCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});jQuery.isFunction(a.options.Events.MarkerMouseOverCallBack)&&google.maps.event.addListener(b,"mouseover",function(){a.options.Events.MarkerMouseOverCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});jQuery.isFunction(a.options.Events.MarkerMouseOutCallBack)&&google.maps.event.addListener(b,"mouseout",function(){a.options.Events.MarkerMouseOutCallBack.call(a,c,a.infowindow,a.infowindowTooltip,b)});return b},AutoFit:function(){var a=this;a.map.fitBounds(a.bounds)},CreateOverlay:function(){this.ourOverlay=new google.maps.OverlayView;this.ourOverlay.draw=function(){};this.ourOverlay.setMap(this.map)},GetInfowindowOffset:function(b,f,g,h){var d=0,e=0,a=this.ourOverlay.getProjection().fromLatLngToContainerPixel(h.getPosition()),i=this.ourOverlay.getProjection().fromLatLngToContainerPixel(g.getBounds().getSouthWest()),c=this.ourOverlay.getProjection().fromLatLngToContainerPixel(g.getBounds().getNorthEast());if(a.x<b/2)d=b/2-a.x;else if(a.x>c.x-b/2)d=c.x-b/2-a.x;if(a.y<f)e=a.y+f-(a.y-c.y);else e=a.y+20-(a.y-c.y);return new google.maps.Size(d,e)},GetPixelFromLatLng:function(b){var a=this.map.getProjection(),c=a.fromLatLngToPoint(b);return c},RemoveGoogleInfo:function(){if(jQuery(".gm-style > div > a").attr("href")){for(var b=jQuery(".gm-style-cc").length,a=1;a<b;a+=1)jQuery(".gm-style-cc").eq("-1").remove();jQuery(".gm-style > div > a").removeAttr("href").removeAttr("title")}}};NHS.Scripts.BuilderShowCase=function(a){this.parameters=a;if(a)this._log=new NHS.Scripts.Globals.EventLogger({siteRoot:a.siteRoot,partnerId:a.partnerID,marketId:a.marketID,builderId:a.brandID})};NHS.Scripts.BuilderShowCase.prototype={get_log:function(){return this._log},initMap:function(){var c=this.parameters.OptionsForMap,a=this.parameters,b=new NHS.Scripts.GoogleMapApi(c);b.options.Events.OnMapCreate=function(){var c=b.getBoundsFromMap(),d={partnerId:a.partnerID,brandId:a.brandID,minLat:c.minLat,minLng:c.minLng,maxLat:c.maxLat,maxLng:c.maxLng};jQuery.getJSON("/MapSearch/GetBrandMarketMapPoints",d,function(a){b.processResult(a)})};b.processResult=function(c){var e=this;e.showLoading();for(var b=0;b<c.length;b++){var l=c[b].Id,j=c[b].Lat,k=c[b].Lng,d=c[b].Title.replace("<strong>","").replace("</strong>",""),f='<div class="nhs_CommResHoverMarket">',g=a.siteRoot+a.communityResultsPage+"/market-"+l+"/brandid-"+a.brandID,i=d.substring(0,d.indexOf("(")),h=d.substring(d.indexOf("("));f+='<h2><a href="'+g+'" >'+i+"</a></h2> <p>by "+a.brandName+"</p> <p>"+h+"</p>";f+="</div>";e.createMarkerPoint(j,k,d,f,a.icon,c[b])}e.hideLoading();e.AutoFit()};b.createMap()},initialize:function(){this.parameters&&this.initMap();$jq("#pinit").click(function(){$jq("#pinmarklet").remove();var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("charset","UTF-8");a.setAttribute("id","pinmarklet");a.setAttribute("src","http://assets.pinterest.com/js/pinmarklet.js?r="+Math.random()*99999999);document.body.appendChild(a)});$jq("#btnSend").click(function(){$jq(this).hide();$jq("#btnSendFake").show()});if(this._map){this._map.show(true);this._map.refresh()}},setupTwitter:function(b,e,d){var a,c=b.getElementsByTagName(e)[0];if(!b.getElementById(d)){a=b.createElement(e);a.id=d;a.src="//platform.twitter.com/widgets.js";c.parentNode.insertBefore(a,c)}},checkLatestNewsItems:function(b){var a=b.getElementById("nhs_ShowcaseLatestNews");if(a.childNodes.length<4)a.style.display="none"},initGallery:function(a){$jq("#nhs_ShowcaseSlides").slides(a);$jq(".bigprev").hide();$jq(".bignext").hide();$jq("#nhs_ShowcaseSlides").on("mouseenter",function(){$jq(".bigprev").show();$jq(".bignext").show()});$jq("#nhs_ShowcaseSlides").on("mouseleave",function(){$jq(".bigprev").hide();$jq(".bignext").hide()})},InitVideoGallery:function(b,a,c){this.Initialize("NHS.Scripts.BuilderShowCase.PopVideos");tags="brandvideo_"+b+"_"+a;Url=c;BCMAPI.find("find_videos_by_tags",{or_tags:tags,fields:"name,id,referenceId,thumbnailURL,tags,videoStillURL"})},Initialize:function(a){BCMAPI.token="HYWld5USmeg7f3O0xaq2UgSaQBVyuw72JRRcM_k4sRX7yIGlb-lcuQ..";BCMAPI.callback=a},LoadVideo:function(a){VideoId=a},Pagination:function(d){this.currentPage=1;var b=this,e=$jq("#"+d.id).find(".nhs_ShowcaseMetroArea > ul > li");e.hide();var f=$jq("."+d.navigation).find("ul");$jq(f).find("li").remove();if(e.length>0){var j=e.length/d.maxPage,c=parseInt(j,10);if(e.length-c*d.maxPage>0)c++;c>1&&f.append('<li><a page="back"><</a></li>');for(var a=0;a<c;a++){for(var h=a*d.maxPage;h<(a+1)*d.maxPage;h++)h<=e.length&&$jq(e[h]).attr("page",a+1);if(a+1==1)f.append('<li><a class="nhs_Active" page="'+(a+1)+'">'+(a+1)+"</a></li>");else f.append('<li><a page="'+(a+1)+'">'+(a+1)+"</a></li>")}$jq("li[page^='1']").show();c>1&&f.append('<li><a page="next">></a></li><li><a page="all">View All</a></li>');if(c>1)for(var g=f.find("a"),i=0;i<g.length;i++)$jq(g[i]).click(function(){$jq("a.nhs_Active").removeClass("nhs_Active");var a=$jq(this).attr("page");if(a=="back"){if(b.currentPage>1)a=b.currentPage-1}else if(a=="next")if(b.currentPage<c)a=b.currentPage+1;if(a=="all")if($jq(this).html()=="View All"){$jq("li[page]").fadeIn("normal");g.hide();$jq("a[page='all']").show().addClass("nhs_Active");$jq("a[page='all']").html("Collapse")}else{g.show();$jq("a[page^='"+b.currentPage+"']").addClass("nhs_Active");$jq("li[page]").hide();$jq("li[page^='"+b.currentPage+"']").fadeIn("normal");$jq("a[page='all']").html("View All")}else if(a!=b.currentPage&&a!="back"&&a!="next"){$jq("a[page^='"+a+"']").addClass("nhs_Active");$jq("li[page]").hide();$jq("li[page^='"+a+"']").fadeIn("normal");b.currentPage=parseInt(a,10)}})}},setupCarousel:function(){$jq("#nhs_ShowcaseSpotlightCarousel").jCarouselLite({btnNext:".bignext",btnPrev:".bigprev",visible:4,circular:true})}};var tags="",VideoId,Url="",bcVP,bcExp,modExp,modCon;function myTemplateLoaded(a){bcExp=brightcove.api.getExperience(a);bcVP=bcExp.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);modExp=bcExp.getModule(brightcove.api.modules.APIModules.EXPERIENCE);modCon=bcExp.getModule(brightcove.api.modules.APIModules.CONTENT)}function onTemplateReady(){bcVP.loadVideoByID(VideoId);bcVP.play()}NHS.Scripts.BuilderShowCase.PopVideos=function(a){var b=[];tags+="_";if(a.items.length!=0){$jq("#nhs_ShowcaseVideos").show();if(a.items.length==1)if($jq("#nhs_ShowcaseVideos").find("a").length>1)$jq("#nhs_ShowcaseVideos .nhs_Title").html("Videos");else $jq("#nhs_ShowcaseVideos .nhs_Title").html("Video");else $jq("#nhs_ShowcaseVideos .nhs_Title").html("Videos");b=a.items.sort(function(c,d){var a=parseInt(c.referenceId.substring(tags.length)),b=parseInt(d.referenceId.substring(tags.length));return a-b});var c=$jq.template("mpTmpl",'<a class="thickbox" href="'+Url+'?videoref=${id}&KeepThis=true&TB_iframe=true&width=700&height=500&videowidth=670&videoheight=480&videourl=frombrightcove&title=${name}"><span></span><img src="${thumbnailURL}" alt=""  /><p>${name}</p></a>');$jq.tmpl("mpTmpl",b).appendTo("#nhs_ShowcaseVideosGallery");tb_init("#nhs_ShowcaseVideosGallery a.thickbox")}};NHS.Scripts.eBook=function(a){this.parameters=a};NHS.Scripts.eBook.prototype={init:function(){if(createeBook){createeBook=false;this.AttachEvents();var a=this;jQuery("#nhs_BookPage .btn_eBookSend").click(function(){var b=jQuery("#nhs_BookPage .nhs_eBookEmail");a.submit(b,"eBook Landing Page Opt-in");jQuery.googlepush("Lead Events","eBook Landing","Submit Form - Get the Book")});jQuery("#nhs_eBookHeader .btn_eBookSend").click(function(){var b=jQuery("#nhs_eBookHeader .nhs_eBookEmail");a.submit(b,"eBook Header Opt-in");jQuery.googlepush("Lead Events","eBook Top Box","Submit Form - Get the Book")});jQuery("#nhs_eBookHomepage .btn_eBookSend").click(function(){var b=jQuery("#nhs_eBookHomepage .nhs_eBookEmail");a.submit(b,"eBook Home Page Opt-in");jQuery.googlepush("Lead Events","Main","Submit Form - Get the Book")})}},submit:function(a,e){var b=this;a.removeAttr("style");var c=a.val(),d=ValidEmail(c);if(c==""||!d){a.attr("style","border: 1px solid #FF0000");jQuery(".nhs_EbookSignUpErrors").html('<p class="nhs_Error">Please enter a valid email address.</p>').show();a.focus()}else{jQuery(".nhs_EbookSignUpErrors").hide();jQuery.ajax({url:b.parameters.postUrl,data:{email:c,source:e},cache:false,type:"POST",async:false,success:function(e){if(e){jQuery("#nhs_eBookHeader").remove();var h="",f=b.parameters.popUrl+"?email="+c+"&marketId="+b.parameters.marketId,g=false;tb_show(h,f,g,function(){return b.LoadDefault(b.parameters.marketId)});var d=a.parent().parent();d.find(".nhs_eBookFields").remove();d.find(".nhs_eBookPrivacy").remove();d.find(".nhs_eBookThanks").show()}},error:function(){}})}},AttachEvents:function(){var a=this;jQuery(document).on("click","#nhs_eBookSingUp",function(){var d=true,e=jQuery("#nhs_homeOfTheWeek").is(":checked"),b=jQuery("#nhs_weeklyMarketUpdate").is(":checked"),c=jQuery(".nhs_newletter_dropMarket").val();jQuery("#nhs_EbookSignUpErrorsModal").html("");if(!e&&!b){jQuery("#nhs_EbookSignUpErrorsModal").append('<p class="nhs_Error">Please select an option.</p>');d=false}if(b&&c===""){jQuery("#nhs_EbookSignUpErrorsModal").append('<p class="nhs_Error">Please select a market from the list.</p>');d=false}if(d){var f={homeOfTheWeek:e,weeklyMarketUpdate:b,marketId:c===""?0:c,email:jQuery("#nhs_eBookEmail").val()};jQuery.ajax({url:a.parameters.popUrl,data:f,cache:false,type:"POST",success:function(a){if(a){jQuery("#nhs_EbookModal").remove();jQuery("#nhs_ebookClose").show()}},error:function(){}})}});jQuery(document).on("click",".nhs_eBookOption",function(){if(jQuery("#nhs_homeOfTheWeek").is(":checked")||jQuery("#nhs_weeklyMarketUpdate").is(":checked")){jQuery("#nhs_eBookSingUp").removeAttr("disabled");jQuery("#nhs_eBookSingUp").removeClass("nhs_eBookSingUpDisable")}else{jQuery("#nhs_eBookSingUp").attr("disabled","disabled");jQuery("#nhs_eBookSingUp").addClass("nhs_eBookSingUpDisable")}});jQuery(".nhs_newletter_dropMarket").change(function(){jQuery(".nhs_newletter_dropMarket").val()===""&&jQuery("#nhs_EbookSignUpErrorsModal").html("")})},LoadDefault:function(a){a>0&&jQuery(".nhs_newletter_dropMarket").val(a)}};(function ($) {                                          // Compliant with jquery.noConflict()
    $.fn.jCarouselLite = function (o) {
        o = $.extend({
            btnPrev: null,
            btnNext: null,
            btnGo: null,
            mouseWheel: false,
            auto: null,

            speed: 200,
            easing: null,

            vertical: false,
            circular: true,
            visible: 3,
            start: 0,
            scroll: 1,
            resultSetLength: 3,

            beforeStart: null,
            afterEnd: null
        }, o || {});

        return this.each(function () {                           // Returns the element collection. Chainable.

            var running = false, animCss = o.vertical ? "top" : "left", sizeCss = o.vertical ? "height" : "width";
            var div = $(this), ul = $("ul", div), tLi = $("li", ul), tl = tLi.size(), v = o.visible;

            // Patch to fix the problem with the vertical scroll by Alex (it is a fix to the patch that was made to the control originally bc it doesnt support the desired functionality) case 44311
            var tempv = o.vertical ? 3 : v; // if vertical o.visible = 1 (patch to use it on comm results) so set it to 3 that is the size of the visible items

            if (o.circular && tl > tempv) { // execute the circular logic only if there are items to scroll
                // if it is vertical and the number of items is not exact to the scroll page size, add empty items to fill the page size so it works as normally
                if (o.vertical) {
                    var gap = 3 - (tl % 3), emptyLi = tLi.slice(tl - 1).clone().empty(), i = 0; // compute how many items need to fit the scroll page size, and initialize the empty item based on an existing il item

                    // add the empty il elements to fit the scroll page size
                    for (i = 0; i < gap && gap != 3; i++) {
                        ul.append(emptyLi.css('visibility', 'hidden').clone());
                    }

                    tLi = $("li", ul); tl = tLi.size(); // recompute the list size
                }

                // execute the same logic (duplicate the last N visible items in the begining and the first N visible items in the end to emulate the infinite effect
                ul.prepend(tLi.slice(tl - tempv).clone()).append(tLi.slice(0, tempv).clone());
                o.start += tempv;
            }

            div.hover(function () {
                div.hovered = true;
            }, function () {
                div.hovered = false;
            });

            var li = $("li", ul), itemLength = o.vertical ? li.size() / o.resultSetLength : li.size(), curr = o.start;
            div.css("visibility", "visible");

            li.css({ overflow: "hidden", float: "left" });
            ul.css({ margin: "0", padding: "0", position: "relative", "list-style-type": "none", "z-index": "1" });
            div.css({ overflow: "hidden", position: "relative", "z-index": "2", left: "0px" });

            var liSize = o.vertical ? height(li) : width(li);   // Full li size(incl margin)-Used for animation
            var ulSize = liSize * itemLength + 40;                   // size of full ul(total length, not just for the visible items)
            var divSize = liSize * v;                           // size of entire div(total length for just the visible items)

            li.css({ width: li.width(), height: li.height() });
            ul.css(sizeCss, ulSize + "px").css(animCss, -(curr * liSize));

            div.css(sizeCss, divSize + "px");                     // Width of the DIV. length of visible images

            if (o.btnPrev)
                $(o.btnPrev).click(function () {
                    div.navigated = true;
                    return go(curr - o.scroll);
                });

            if (o.btnNext)
                $(o.btnNext).click(function () {
                    div.navigated = true;
                    return go(curr + o.scroll);
                });

            if (o.btnGo)
                $.each(o.btnGo, function (i, val) {
                    $(val).click(function () {
                        div.navigated = true;
                        return go(o.circular ? o.visible + i : i);
                    });
                });

            if (o.mouseWheel && div.mousewheel)
                div.mousewheel(function (e, d) {
                    return d > 0 ? go(curr - o.scroll) : go(curr + o.scroll);
                });

            if (o.auto && tl > tempv) // execute the auto start logic only if there are items to scroll
                setInterval(function () {
                    if (!div.hovered)
                        go(curr + o.scroll);
                }, o.auto + o.speed);

            function vis() {
                return li.slice(curr).slice(0, v);
            };

            function go(to) {
                if (!running) {

                    if (o.beforeStart)
                        o.beforeStart.call(this, vis());

                    if (o.circular) {            // If circular we are in first or last, then goto the other end

                        if (to <= o.start - v - 1) {           // If first, then goto last
                            ul.css(animCss, -((itemLength - (v * 2)) * liSize) + "px");
                            // If "scroll" > 1, then the "to" might not be equal to the condition; it can be lesser depending on the number of elements.
                            curr = to == o.start - v - 1 ? itemLength - (v * 2) - 1 : itemLength - (v * 2) - o.scroll;
                        } else if (to >= itemLength - v + 1) { // If last, then goto first
                            ul.css(animCss, -((v) * liSize) + "px");
                            // If "scroll" > 1, then the "to" might not be equal to the condition; it can be greater depending on the number of elements.
                            curr = to == itemLength - v + 1 ? v + 1 : v + o.scroll;
                        } else curr = to;
                    } else {                    // If non-circular and to points to first or last, we just return.
                        if (to < 0 || to > itemLength - v) return;
                        else curr = to;
                    }                           // If neither overrides it, the curr will still be "to" and we can proceed.

                    running = true;

                    ul.animate(
                    animCss == "left" ? { left: -(curr * liSize)} : { top: -(curr * liSize) }, o.speed, o.easing,
                    function () {
                        if (o.afterEnd)
                            o.afterEnd.call(this, vis());
                        running = false;
                    }
                );
                    // Disable buttons when the carousel reaches the last/first, and enable when not
                    if (!o.circular) {
                        $(o.btnPrev).removeClass("carousel-prev-disabled");
                        $(o.btnNext).removeClass("carousel-next-disabled");
                        if (curr - o.scroll < 0) $(o.btnPrev).addClass("carousel-prev-disabled");
                        if (curr + o.scroll > itemLength - v) $(o.btnNext).addClass("carousel-next-disabled");
                    }

                }
                return false;
            };
        });
    };

    function css(el, prop) {
        return parseInt($.css(el[0], prop)) || 0;
    };
    function width(el) {
        return el[0].offsetWidth + css(el, 'marginLeft') + css(el, 'marginRight');
    };
    function height(el) {
        return el[0].offsetHeight + css(el, 'marginTop') + css(el, 'marginBottom');
    };

})(jQuery);